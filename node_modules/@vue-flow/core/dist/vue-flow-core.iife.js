var VueFlowCore=function(K,r){"use strict";var io;const nn=typeof window<"u",Qi=e=>typeof e<"u",Ji=e=>typeof e=="boolean",_e=e=>typeof e=="function",xe=e=>typeof e=="number",Ee=e=>typeof e=="string",er=()=>{};nn&&((io=window==null?void 0:window.navigator)!=null&&io.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function oe(e){return typeof e=="function"?e():r.unref(e)}function tr(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const ro=e=>e();function nr(e=ro){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:r.readonly(t),pause:n,resume:o,eventFilter:i}}function ao(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function or(e){return e}function on(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const s=_e(t)?t:t.get,c=_e(t)?void 0:t.set,u=r.customRef((d,g)=>(o=d,i=g,{get(){return a.value&&(n=s(),a.value=!1),o(),n},set(m){c==null||c(m)}}));return Object.isExtensible(u)&&(u.trigger=l),u}function Ze(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function ir(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function rn(e,t=!1){function n(g,{flush:m="sync",deep:E=!1,timeout:h,throwOnTimeout:f}={}){let x=null;const N=[new Promise(D=>{x=r.watch(e,w=>{g(w)!==t&&(x==null||x(),D(w))},{flush:m,deep:E,immediate:!0})})];return h!=null&&N.push(ao(h,f).then(()=>oe(e)).finally(()=>x==null?void 0:x())),Promise.race(N)}function o(g,m){if(!r.isRef(g))return n(w=>w===g,m);const{flush:E="sync",deep:h=!1,timeout:f,throwOnTimeout:x}=m??{};let _=null;const D=[new Promise(w=>{_=r.watch([e,g],([M,R])=>{t!==(M===R)&&(_==null||_(),w(M))},{flush:E,deep:h,immediate:!0})})];return f!=null&&D.push(ao(f,x).then(()=>oe(e)).finally(()=>(_==null||_(),oe(e)))),Promise.race(D)}function i(g){return n(m=>Boolean(m),g)}function a(g){return o(null,g)}function l(g){return o(void 0,g)}function s(g){return n(Number.isNaN,g)}function c(g,m){return n(E=>{const h=Array.from(E);return h.includes(g)||h.includes(oe(g))},m)}function u(g){return d(1,g)}function d(g=1,m){let E=-1;return n(()=>(E+=1,E>=g),m)}return Array.isArray(oe(e))?{toMatch:n,toContains:c,changed:u,changedTimes:d,get not(){return rn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:u,changedTimes:d,get not(){return rn(e,!t)}}}function ue(e){return rn(e)}var lo=Object.getOwnPropertySymbols,rr=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,lr=(e,t)=>{var n={};for(var o in e)rr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&lo)for(var o of lo(e))t.indexOf(o)<0&&ar.call(e,o)&&(n[o]=e[o]);return n};function sr(e,t,n={}){const o=n,{eventFilter:i=ro}=o,a=lr(o,["eventFilter"]);return r.watch(e,tr(i,t),a)}var cr=Object.defineProperty,ur=Object.defineProperties,dr=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,co=Object.prototype.propertyIsEnumerable,uo=(e,t,n)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fr=(e,t)=>{for(var n in t||(t={}))so.call(t,n)&&uo(e,n,t[n]);if(gt)for(var n of gt(t))co.call(t,n)&&uo(e,n,t[n]);return e},hr=(e,t)=>ur(e,dr(t)),gr=(e,t)=>{var n={};for(var o in e)so.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&gt)for(var o of gt(e))t.indexOf(o)<0&&co.call(e,o)&&(n[o]=e[o]);return n};function Ae(e,t,n={}){const o=n,{eventFilter:i}=o,a=gr(o,["eventFilter"]),{eventFilter:l,pause:s,resume:c,isActive:u}=nr(i);return{stop:sr(e,t,hr(fr({},a),{eventFilter:l})),pause:s,resume:c,isActive:u}}function fo(e){var t;const n=oe(e);return(t=n==null?void 0:n.$el)!=null?t:n}const an=nn?window:void 0;function ln(...e){let t,n,o,i;if(Ee(e[0])||Array.isArray(e[0])?([n,o,i]=e,t=an):[t,n,o,i]=e,!t)return er;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(d=>d()),a.length=0},s=(d,g,m,E)=>(d.addEventListener(g,m,E),()=>d.removeEventListener(g,m,E)),c=r.watch(()=>[fo(t),oe(i)],([d,g])=>{l(),d&&a.push(...n.flatMap(m=>o.map(E=>s(d,m,E,g))))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return Ze(u),u}const mr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function ho(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=an,eventName:a="keydown",passive:l=!1}=o,s=mr(t);return ln(i,a,u=>{s(u)&&n(u)},l)}function pr(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),ir(o,t),n}function yr(e){return JSON.parse(JSON.stringify(e))}const sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cn="__vueuse_ssr_handlers__";sn[cn]=sn[cn]||{},sn[cn];var go=Object.getOwnPropertySymbols,vr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,_r=(e,t)=>{var n={};for(var o in e)vr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&go)for(var o of go(e))t.indexOf(o)<0&&wr.call(e,o)&&(n[o]=e[o]);return n};function xr(e,t,n={}){const o=n,{window:i=an}=o,a=_r(o,["window"]);let l;const s=pr(()=>i&&"ResizeObserver"in i),c=()=>{l&&(l.disconnect(),l=void 0)},u=r.watch(()=>fo(e),g=>{c(),s.value&&i&&g&&(l=new ResizeObserver(t),l.observe(g,a))},{immediate:!0,flush:"post"}),d=()=>{c(),u()};return Ze(d),{isSupported:s,stop:d}}var mo;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(mo||(mo={}));var Er=Object.defineProperty,po=Object.getOwnPropertySymbols,br=Object.prototype.hasOwnProperty,Sr=Object.prototype.propertyIsEnumerable,yo=(e,t,n)=>t in e?Er(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nr=(e,t)=>{for(var n in t||(t={}))br.call(t,n)&&yo(e,n,t[n]);if(po)for(var n of po(t))Sr.call(t,n)&&yo(e,n,t[n]);return e};Nr({linear:or},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function Ke(e,t,n,o={}){var i,a,l;const{clone:s=!1,passive:c=!1,eventName:u,deep:d=!1,defaultValue:g}=o,m=r.getCurrentInstance(),E=n||(m==null?void 0:m.emit)||((i=m==null?void 0:m.$emit)==null?void 0:i.bind(m))||((l=(a=m==null?void 0:m.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(m==null?void 0:m.proxy));let h=u;t||(t="modelValue"),h=u||h||`update:${t.toString()}`;const f=_=>s?_e(s)?s(_):yr(_):_,x=()=>Qi(e[t])?f(e[t]):g;if(c){const _=x(),N=r.ref(_);return r.watch(()=>e[t],D=>N.value=f(D)),r.watch(N,D=>{(D!==e[t]||d)&&E(h,D)},{deep:d}),N}else return r.computed({get(){return x()},set(_){E(h,_)}})}function Y(e=()=>{}){const t=r.ref(new Set);e&&t.value.add(e);const n=a=>{t.value.delete(a)};return{on:a=>{t.value.has(e)&&t.value.delete(e),t.value.add(a);const l=()=>n(a);return Ze(l),{off:l}},off:n,trigger:a=>Promise.all(Array.from(t.value).map(l=>l(a))),fns:t}}const Cr=["production","prod"];function We(e,...t){Cr.includes(production||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function kr(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>We(e.message))}}function Mr(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),Ze(()=>{o.off(i)})}})}var ae=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(ae||{});const un={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class se extends Error{constructor(t,...n){var o;super((o=un[t])==null?void 0:o.call(un,...n)),this.code=t}}const dn=()=>typeof window<"u"?window:{chrome:!1};function vo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function fn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function mt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Oe(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function hn(e,t){return{x:Oe(e.x,t[0][0],t[1][0]),y:Oe(e.y,t[0][1],t[1][1])}}function wo(e){const t=e.getRootNode(),n=dn();return"elementFromPoint"in t?t:n.document}function fe(e){return e&&"id"in e&&"source"in e&&"target"in e}function _o(e){return fe(e)&&"sourceNode"in e&&"targetNode"in e}function Ve(e){return e&&"id"in e&&!fe(e)}function Te(e){return Ve(e)&&"computedPosition"in e}function $r(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function Rr(e,t={}){let n=t;return Te(e)||(n={type:e.type??t.type??"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:ie(e.data)?e.data:{},events:r.markRaw(ie(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function gn(e,t={}){const n=ie(e.events)?e.events:t.events&&ie(t.events)?t.events:{},o=ie(e.data)?e.data:t.data&&ie(t.data)?t.data:{};return t=_o(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!Ee(e.label)?r.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function xo(e,t,n){if(!Ve(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>fe(a)&&a[o]===e.id).map(a=>fe(a)&&a[n]);return t.filter(a=>i.includes(a.id))}function Or(e,t){return xo(e,t,"target")}function Tr(e,t){return xo(e,t,"source")}function pt({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function mn(e,t){return t.some(n=>fe(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Br(e,t,n){if(!e.source||!e.target)return We("Can't create edge. An edge needs a source and a target."),t;let o;return fe(e)?o={...e}:o={...e,id:pt(e)},o=gn(o,n),mn(o,t)||t.push(o),t}function Ir(e,t,n){if(!t.source||!t.target)return We("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>fe(a)&&a.id===e.id);if(!o)return We(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:pt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)}function pn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function yt({x:e,y:t},{x:n,y:o,zoom:i},a,[l,s]){const c={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(c.x/l),y:s*Math.round(c.y/s)}:c}function Eo(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function vt({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function bo({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function Pr(e,t){return bo(Eo(vt(e),vt(t)))}function wt(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Eo(n,vt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bo(t)}function yn(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,l=!1){const s={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(c=>{const{computedPosition:u={x:0,y:0},dimensions:d={width:0,height:0},selectable:g}=c;if(l&&!g)return!1;const m={...u,width:d.width||0,height:d.height||0},E=fn(s,m),h=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,f=a&&E>0,x=d.width*d.height;return h||f||E>=x})}function qe(e,t){const n=e.map(o=>Ee(o)?o:o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function je(e,t,n,o,i,a=.1,l={x:0,y:0}){const s=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(s,c),d=Oe(u,o,i),g=e.x+e.width/2,m=e.y+e.height/2,E=t/2-g*d+(l.x??0),h=n/2-m*d+(l.y??0);return{x:E,y:h,zoom:d}}function Dr(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function So(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:So(n,t):!1}function ke(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function ie(e){return typeof r.unref(e)<"u"}function zr(e,t,n){if(!e.source||!e.target)return n(new se(ae.EDGE_INVALID,e.id)),!1;let o;return fe(e)?o=e:o={...e,id:pt(e)},o=gn(o),mn(o,t)?!1:o}function Ar(e,t,n,o,i,a){if(!t.source||!t.target)return a(new se(ae.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return a(new se(ae.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...c}=e,u={...c,id:i?pt(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,u),u}function No(e,t,n,o){const i={},a=e.map(s=>{const c=Rr(s,{...n(s.id),parentNode:s.parentNode});return s.parentNode&&(i[s.parentNode]=!0),c}),l=[...a,...t];return a.forEach(s=>{const c=l.find(u=>u.id===s.parentNode);s.parentNode&&!c&&o(new se(ae.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||i[s.id])&&(i[s.id]&&(s.isParent=!0),c&&(c.isParent=!0))}),a}var j=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(j||{}),_t=(e=>(e.Partial="partial",e.Full="full",e))(_t||{}),Me=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Me||{}),$e=(e=>(e.Strict="strict",e.Loose="loose",e))($e||{}),xt=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(xt||{}),Qe=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Qe||{}),Co=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Co||{});const vn=Symbol("vueFlow"),wn=Symbol("nodeId"),ko=Symbol("nodeRef"),Mo=Symbol("edgeId"),$o=Symbol("edgeRef"),Et=Symbol("slots");function Ro(e){const t=e??r.inject(wn,""),n=r.inject(ko,null),{findNode:o,edges:i,emits:a}=re(),l=o(t);return l||a.error(new se(ae.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:r.computed(()=>o(l.parentNode)),connectedEdges:r.computed(()=>qe([l],i.value))}}function _n(e){return"clientX"in e}function He(e,t){var a,l;const n=_n(e),o=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}function bt(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,a=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case j.Top:return{x:o+a/2,y:i};case j.Right:return{x:o+a,y:i+l/2};case j.Bottom:return{x:o+a/2,y:i+l};case j.Left:return{x:o,y:i+l/2}}}function Oo(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function Vr(e,t,n,o,i,a){const l=bt(n,{...e.dimensions,...e.computedPosition},t),s=bt(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}}function Hr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:s,viewport:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=vt({x:(0-c.x)/c.zoom,y:(0-c.y)/c.zoom,width:l/c.zoom,height:s/c.zoom}),g=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(g*m)>0}function Fr(e,t,n=!1){let o=-1;const i=e.reduce((a,l)=>{const s=xe(l.zIndex);let c=s?l.zIndex:0;const u=t(l.source),d=t(l.target);return!u||!d||(n&&(c=s?l.zIndex:Math.max(u.computedPosition.z||0,d.computedPosition.z||0)),a[c]?a[c].push(l):a[c]=[l],o=c>o?c:o),a},{});return Object.entries(Object.keys(i).length?i:{0:[]}).map(([a,l])=>{const s=+a;return{edges:l,level:s,isMaxLevel:s===o}})}function xn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function To(e,t,n,o){return(t[n]||[]).reduce((i,a)=>(`${e.id}-${a.id}-${n}`!==o&&i.push({id:a.id||null,type:n,nodeId:e.id,...bt(a.position,{...e.dimensions,...e.computedPosition},a)}),i),[])}function Lr(e,t,n){let o=null,i=1/0;return n.forEach(a=>{const l=Math.sqrt((a.x-e.x)**2+(a.y-e.y)**2);l<=t&&l<i&&(i=l,o=a)}),o}function Bo(e,t,n,o,i,a,l,s,c,u){const d=a==="target",g=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:m,y:E}=He(e),h=s.elementFromPoint(m,E),f=h!=null&&h.classList.contains("vue-flow__handle")?h:g,x={handleDomNode:f,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(f){const _=Io(void 0,f),N=f.getAttribute("data-nodeid"),D=f.getAttribute("data-handleid"),w=f.classList.contains("connectable"),M=f.classList.contains("connectableend"),R={source:d?N:o,sourceHandle:d?D:i,target:d?o:N,targetHandle:d?i:D};x.connection=R,w&&M&&(n===$e.Strict?d&&_==="source"||!d&&_==="target":N!==o||D!==i)&&(x.endHandle={nodeId:N,handleId:D,type:_},x.isValid=l(R,{edges:c,sourceNode:u(R.source),targetNode:u(R.target)}))}return x}function Gr({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,a)=>{const{handleBounds:l}=a;let s=[],c=[];return l&&(s=To(a,l,"source",`${t}-${n}-${o}`),c=To(a,l,"target",`${t}-${n}-${o}`)),i.push(...s,...c),i},[])}function Io(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Yr(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Po(e,t,n){return e<t?Oe(Math.abs(e-t),1,50)/50:e>n?-Oe(Math.abs(e-n),1,50)/50:0}function Do(e,t){const n=Po(e.x,35,t.width-35)*20,o=Po(e.y,35,t.height-35)*20;return[n,o]}function St(){return!0}function En({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const s=r.computed(()=>oe(n)==="target"),{vueFlowRef:c,connectionMode:u,connectionRadius:d,connectOnClick:g,connectionClickStartHandle:m,nodesConnectable:E,autoPanOnConnect:h,findNode:f,panBy:x,getNodes:_,startConnection:N,updateConnection:D,endConnection:w,emits:M,viewport:R,edges:y,isValidConnection:L}=re();let B=null,k=!1,V=null;function Q(v){var H;const z=_n(v),S=wo(v.target);if(z&&v.button===0||!z){let X=function(P){F=He(P,p),I=Lr(yt(F,R.value,!1,[1,1]),d.value,A),O||(C(),O=!0);const te=Bo(P,I,u.value,oe(t),oe(e),s.value?"target":"source",Z,S,y.value,f);if(B=te.connection,k=te.isValid,V=te.handleDomNode,D(I&&k?pn({x:I.x,y:I.y},R.value):F,te.endHandle,Yr(!!I,k)),!I&&!k&&!V)return xn(b);B&&B.source!==B.target&&V&&(xn(b),b=V,V.classList.add("connecting","vue-flow__handle-connecting"),V.classList.toggle("valid",k),V.classList.toggle("vue-flow__handle-valid",k))},W=function(P){(I||V)&&B&&k&&(a?a(P,B):M.connect(B)),M.connectEnd(P),i&&(l==null||l(P)),xn(b),cancelAnimationFrame(J),w(P),O=!1,k=!1,B=null,V=null,S.removeEventListener("mousemove",X),S.removeEventListener("mouseup",W),S.removeEventListener("touchmove",X),S.removeEventListener("touchend",W)};const T=f(oe(t));let Z=o||L.value||St;!Z&&T&&(Z=(s?T.isValidSourcePos:T.isValidTargetPos)||St);let I,J=0;const{x:U,y:q}=He(v),$=S==null?void 0:S.elementFromPoint(U,q),G=Io(oe(i),$),p=(H=c.value)==null?void 0:H.getBoundingClientRect();if(!p||!G)return;let b,F=He(v,p),O=!1;const A=Gr({nodes:_.value,nodeId:oe(t),handleId:oe(e),handleType:G}),C=()=>{if(!h)return;const[P,te]=Do(F,p);x({x:P,y:te}),J=requestAnimationFrame(C)};N({nodeId:oe(t),handleId:oe(e),type:G},{x:U-p.left,y:q-p.top},v),M.connectStart({event:v,nodeId:oe(t),handleId:oe(e),handleType:G}),S.addEventListener("mousemove",X),S.addEventListener("mouseup",W),S.addEventListener("touchmove",X),S.addEventListener("touchend",W)}}function ee(v){if(g.value)if(!m.value)M.clickConnectStart({event:v,nodeId:oe(t),handleId:oe(e)}),N({nodeId:oe(t),type:oe(n),handleId:oe(e)},void 0,v,!0);else{let z=o||L.value||St;const S=f(oe(t));if(!z&&S&&(z=(s?S.isValidSourcePos:S.isValidTargetPos)||St),S&&(typeof S.connectable>"u"?E.value:S.connectable)===!1)return;const H=wo(v.target),{connection:X,isValid:W}=Bo(v,{nodeId:oe(t),id:oe(e),type:oe(n)},u.value,m.value.nodeId,m.value.handleId||null,m.value.type,z,H,y.value,f),T=X.source===X.target;W&&!T&&M.connect(X),M.clickConnectEnd(v),w(v,!0)}}return{handlePointerDown:Q,handleClick:ee}}function Xr(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Ur=["data-id","data-handleid","data-nodeid","data-handlepos"],Zr={name:"Handle",compatConfig:{MODE:3}},Je=r.defineComponent({...Zr,props:{id:null,type:null,position:{default:j.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Xr(e,["position","connectable","connectableStart","connectableEnd","id","isValidConnection"]),n=r.toRef(t,"type","source"),{connectionStartHandle:o,connectionClickStartHandle:i,connectionEndHandle:a,vueFlowRef:l,nodesConnectable:s,noDragClassName:c,noPanClassName:u}=re(),{id:d,node:g,nodeEl:m,connectedEdges:E}=Ro(),h=r.ref(),f=r.computed(()=>e.id??`${d}__handle-${e.position}`),x=r.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),_=r.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:N,handleClick:D}=En({nodeId:d,handleId:f,isValidConnection:e.isValidConnection,type:n}),w=r.computed(()=>Ee(e.connectable)&&e.connectable==="single"?!E.value.some(B=>{const k=B[`${n.value}Handle`];return B[n.value]!==d?!1:k?k===f.value:!0}):_e(e.connectable)?e.connectable(g,E.value):ie(e.connectable)?e.connectable:s.value),M=r.computed(()=>{var B,k,V,Q,ee,v;return((B=o.value)==null?void 0:B.nodeId)===d&&((k=o.value)==null?void 0:k.handleId)===f.value&&((V=o.value)==null?void 0:V.type)===n.value||((Q=a.value)==null?void 0:Q.nodeId)===d&&((ee=a.value)==null?void 0:ee.handleId)===f.value&&((v=a.value)==null?void 0:v.type)===n.value}),R=r.computed(()=>{var B,k,V;return((B=i.value)==null?void 0:B.nodeId)===d&&((k=i.value)==null?void 0:k.handleId)===f.value&&((V=i.value)==null?void 0:V.type)===n.value});ue(()=>g.initialized).toBe(!0,{flush:"post"}).then(()=>{var S;const B=(S=g.handleBounds[n.value])==null?void 0:S.find(H=>H.id===f.value);if(!l.value||B)return;const k=l.value.querySelector(".vue-flow__transformationpane");if(!m||!h.value||!k||!f.value)return;const V=m.value.getBoundingClientRect(),Q=h.value.getBoundingClientRect(),ee=window.getComputedStyle(k),{m22:v}=new window.DOMMatrixReadOnly(ee.transform),z={id:f.value,position:e.position,x:(Q.left-V.left)/v,y:(Q.top-V.top)/v,...mt(h.value)};g.handleBounds[n.value]=[...g.handleBounds[n.value]??[],z]});function y(B){const k=_n(B);w.value&&x.value&&(k&&B.button===0||!k)&&N(B)}function L(B){!d||!i.value&&!x.value||w.value&&D(B)}return(B,k)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:h,"data-id":`${r.unref(d)}-${r.unref(f)}-${r.unref(n)}`,"data-handleid":r.unref(f),"data-nodeid":r.unref(d),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.unref(f)}`,r.unref(c),r.unref(u),r.unref(n),{connectable:r.unref(w),connecting:r.unref(R),connectablestart:r.unref(x),connectableend:r.unref(_),connectionindicator:r.unref(w)&&(r.unref(x)&&!r.unref(M)||r.unref(_)&&r.unref(M))}]]),onMousedown:y,onTouchstartPassive:y,onClick:L},[r.renderSlot(B.$slots,"default",{id:e.id})],42,Ur))}}),Nt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(Je,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(Je,{type:"source",position:e,connectable:o,isValidConnection:a})]};Nt.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"],Nt.inheritAttrs=!1,Nt.compatConfig={MODE:3};const Kr=Nt,Ct=function({sourcePosition:e=j.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(Je,{type:"source",position:e,connectable:n,isValidConnection:o})]};Ct.props=["sourcePosition","label","isValidSourcePos","connectable"],Ct.inheritAttrs=!1,Ct.compatConfig={MODE:3};const Wr=Ct,kt=function({targetPosition:e=j.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(Je,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};kt.props=["targetPosition","label","isValidTargetPos","connectable"],kt.inheritAttrs=!1,kt.compatConfig={MODE:3};const qr=kt;function zo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function jr(e,t,n,o,i){return e.filter(a=>(a.selected||a.id===i)&&(!a.parentNode||!So(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var l,s;return r.markRaw({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((l=a.computedPosition)==null?void 0:l.x)||0,y:n.y-((s=a.computedPosition)==null?void 0:s.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions})})}function bn({id:e,dragItems:t,findNode:n}){const o=t.map(i=>n(i.id));return[e?o.find(i=>i.id===e):o[0],o]}function Ao(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Qr(e,t,n){const[o,i,a,l]=typeof e!="string"?Ao(e.padding):[0,0,0,0];return n&&xe(n.computedPosition.x)&&xe(n.computedPosition.y)&&xe(n.dimensions.width)&&xe(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-i,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-a]]:!1}function Jr(e,t,n,o){let i=e.extent||n;if(i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=Qr(i,e,o);a&&(i=a)}else t(new se(ae.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+l],[i[1][0]+a,i[1][1]+l]]}else if(i!=null&&i.range&&Array.isArray(i.range)){const[a,l,s,c]=Ao(i.padding),u=(o==null?void 0:o.computedPosition.x)||0,d=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+u+c,i.range[0][1]+d+a],[i.range[1][0]+u-l,i.range[1][1]+d-s]]}return i}function Sn(e,t,n,o,i){const a=Jr(e,n,o,i),l=hn(t,a);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function Vo(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:l,emits:s}=re();return(c,u=!1)=>{const d=a.value?i.value[0]:5,g=a.value?i.value[1]:5,m=u?4:1,E=c.x*d*m,h=c.y*g*m,f=e.value.filter(x=>x.draggable||l&&typeof x.draggable>"u").map(x=>{const _={x:x.computedPosition.x+E,y:x.computedPosition.y+h},{computedPosition:N}=Sn(x,_,s.error,t.value,x.parentNode?o(x.parentNode):void 0);return{id:x.id,position:N,from:x.position,distance:{x:c.x,y:c.y},dimensions:x.dimensions}});n(f,!0,!1)}}function ea(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function ta(e,t){const n=ea();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function Ho(){const{viewport:e,snapGrid:t,snapToGrid:n}=re();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,l={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function Fo(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-a.left)/n,y:(s.top-a.top)/n,...mt(l)}})}function Nn(e,t,n,o,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),r.nextTick(l.blur)):n([e])}var na={value:()=>{}};function Mt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new $t(n)}function $t(e){this._=e}function oa(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}$t.prototype=Mt.prototype={constructor:$t,on:function(e,t){var n=this._,o=oa(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=ia(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=Lo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Lo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $t(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function ia(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Lo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=na,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cn="http://www.w3.org/1999/xhtml";const Go={svg:"http://www.w3.org/2000/svg",xhtml:Cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Rt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Go.hasOwnProperty(t)?{space:Go[t],local:e}:e}function ra(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Cn&&t.documentElement.namespaceURI===Cn?t.createElement(e):t.createElementNS(n,e)}}function aa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yo(e){var t=Rt(e);return(t.local?aa:ra)(t)}function la(){}function kn(e){return e==null?la:function(){return this.querySelector(e)}}function sa(e){typeof e!="function"&&(e=kn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=new Array(l),c,u,d=0;d<l;++d)(c=a[d])&&(u=e.call(c,c.__data__,d,a))&&("__data__"in c&&(u.__data__=c.__data__),s[d]=u);return new de(o,this._parents)}function ca(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ua(){return[]}function Xo(e){return e==null?ua:function(){return this.querySelectorAll(e)}}function da(e){return function(){return ca(e.apply(this,arguments))}}function fa(e){typeof e=="function"?e=da(e):e=Xo(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&(o.push(e.call(c,c.__data__,u,l)),i.push(c));return new de(o,i)}function Uo(e){return function(){return this.matches(e)}}function Zo(e){return function(t){return t.matches(e)}}var ha=Array.prototype.find;function ga(e){return function(){return ha.call(this.children,e)}}function ma(){return this.firstElementChild}function pa(e){return this.select(e==null?ma:ga(typeof e=="function"?e:Zo(e)))}var ya=Array.prototype.filter;function va(){return Array.from(this.children)}function wa(e){return function(){return ya.call(this.children,e)}}function _a(e){return this.selectAll(e==null?va:wa(typeof e=="function"?e:Zo(e)))}function xa(e){typeof e!="function"&&(e=Uo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new de(o,this._parents)}function Ko(e){return new Array(e.length)}function Ea(){return new de(this._enter||this._groups.map(Ko),this._parents)}function Ot(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ot.prototype={constructor:Ot,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ba(e){return function(){return e}}function Sa(e,t,n,o,i,a){for(var l=0,s,c=t.length,u=a.length;l<u;++l)(s=t[l])?(s.__data__=a[l],o[l]=s):n[l]=new Ot(e,a[l]);for(;l<c;++l)(s=t[l])&&(i[l]=s)}function Na(e,t,n,o,i,a,l){var s,c,u=new Map,d=t.length,g=a.length,m=new Array(d),E;for(s=0;s<d;++s)(c=t[s])&&(m[s]=E=l.call(c,c.__data__,s,t)+"",u.has(E)?i[s]=c:u.set(E,c));for(s=0;s<g;++s)E=l.call(e,a[s],s,a)+"",(c=u.get(E))?(o[s]=c,c.__data__=a[s],u.delete(E)):n[s]=new Ot(e,a[s]);for(s=0;s<d;++s)(c=t[s])&&u.get(m[s])===c&&(i[s]=c)}function Ca(e){return e.__data__}function ka(e,t){if(!arguments.length)return Array.from(this,Ca);var n=t?Na:Sa,o=this._parents,i=this._groups;typeof e!="function"&&(e=ba(e));for(var a=i.length,l=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var d=o[u],g=i[u],m=g.length,E=Ma(e.call(d,d&&d.__data__,u,o)),h=E.length,f=s[u]=new Array(h),x=l[u]=new Array(h),_=c[u]=new Array(m);n(d,g,f,x,_,E,t);for(var N=0,D=0,w,M;N<h;++N)if(w=f[N]){for(N>=D&&(D=N+1);!(M=x[D])&&++D<h;);w._next=M||null}}return l=new de(l,o),l._enter=s,l._exit=c,l}function Ma(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $a(){return new de(this._exit||this._groups.map(Ko),this._parents)}function Ra(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Oa(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),s=new Array(i),c=0;c<l;++c)for(var u=n[c],d=o[c],g=u.length,m=s[c]=new Array(g),E,h=0;h<g;++h)(E=u[h]||d[h])&&(m[h]=E);for(;c<i;++c)s[c]=n[c];return new de(s,this._parents)}function Ta(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Ba(e){e||(e=Ia);function t(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],s=l.length,c=i[a]=new Array(s),u,d=0;d<s;++d)(u=l[d])&&(c[d]=u);c.sort(t)}return new de(i,this._parents).order()}function Ia(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Da(){return Array.from(this)}function za(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function Aa(){let e=0;for(const t of this)++e;return e}function Va(){return!this.node()}function Ha(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,s;a<l;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Fa(e){return function(){this.removeAttribute(e)}}function La(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ga(e,t){return function(){this.setAttribute(e,t)}}function Ya(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xa(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ua(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Za(e,t){var n=Rt(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?La:Fa:typeof t=="function"?n.local?Ua:Xa:n.local?Ya:Ga)(n,t))}function Wo(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ka(e){return function(){this.style.removeProperty(e)}}function Wa(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qa(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function ja(e,t,n){return arguments.length>1?this.each((t==null?Ka:typeof t=="function"?qa:Wa)(e,t,n??"")):Fe(this.node(),e)}function Fe(e,t){return e.style.getPropertyValue(t)||Wo(e).getComputedStyle(e,null).getPropertyValue(t)}function Qa(e){return function(){delete this[e]}}function Ja(e,t){return function(){this[e]=t}}function el(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function tl(e,t){return arguments.length>1?this.each((t==null?Qa:typeof t=="function"?el:Ja)(e,t)):this.node()[e]}function qo(e){return e.trim().split(/^|\s+/)}function Mn(e){return e.classList||new jo(e)}function jo(e){this._node=e,this._names=qo(e.getAttribute("class")||"")}jo.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qo(e,t){for(var n=Mn(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Jo(e,t){for(var n=Mn(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function nl(e){return function(){Qo(this,e)}}function ol(e){return function(){Jo(this,e)}}function il(e,t){return function(){(t.apply(this,arguments)?Qo:Jo)(this,e)}}function rl(e,t){var n=qo(e+"");if(arguments.length<2){for(var o=Mn(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?il:t?nl:ol)(n,t))}function al(){this.textContent=""}function ll(e){return function(){this.textContent=e}}function sl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function cl(e){return arguments.length?this.each(e==null?al:(typeof e=="function"?sl:ll)(e)):this.node().textContent}function ul(){this.innerHTML=""}function dl(e){return function(){this.innerHTML=e}}function fl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function hl(e){return arguments.length?this.each(e==null?ul:(typeof e=="function"?fl:dl)(e)):this.node().innerHTML}function gl(){this.nextSibling&&this.parentNode.appendChild(this)}function ml(){return this.each(gl)}function pl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yl(){return this.each(pl)}function vl(e){var t=typeof e=="function"?e:Yo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function wl(){return null}function _l(e,t){var n=typeof e=="function"?e:Yo(e),o=t==null?wl:typeof t=="function"?t:kn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function xl(){var e=this.parentNode;e&&e.removeChild(this)}function El(){return this.each(xl)}function bl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nl(e){return this.select(e?Sl:bl)}function Cl(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kl(e){return function(t){e.call(this,t,this.__data__)}}function Ml(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function $l(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Rl(e,t,n){return function(){var o=this.__on,i,a=kl(t);if(o){for(var l=0,s=o.length;l<s;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Ol(e,t,n){var o=Ml(e+""),i,a=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,d;c<u;++c)for(i=0,d=s[c];i<a;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(s=t?Rl:$l,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function ei(e,t,n){var o=Wo(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Tl(e,t){return function(){return ei(this,e,t)}}function Bl(e,t){return function(){return ei(this,e,t.apply(this,arguments))}}function Il(e,t){return this.each((typeof t=="function"?Bl:Tl)(e,t))}function*Pl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var ti=[null];function de(e,t){this._groups=e,this._parents=t}function et(){return new de([[document.documentElement]],ti)}function Dl(){return this}de.prototype=et.prototype={constructor:de,select:sa,selectAll:fa,selectChild:pa,selectChildren:_a,filter:xa,data:ka,enter:Ea,exit:$a,join:Ra,merge:Oa,selection:Dl,order:Ta,sort:Ba,call:Pa,nodes:Da,node:za,size:Aa,empty:Va,each:Ha,attr:Za,style:ja,property:tl,classed:rl,text:cl,html:hl,raise:ml,lower:yl,append:vl,insert:_l,remove:El,clone:Nl,datum:Cl,on:Ol,dispatch:Il,[Symbol.iterator]:Pl};function he(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],ti)}function zl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ye(e,t){if(e=zl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Al={passive:!1},tt={capture:!0,passive:!1};function $n(e){e.stopImmediatePropagation()}function Le(e){e.preventDefault(),e.stopImmediatePropagation()}function ni(e){var t=e.document.documentElement,n=he(e).on("dragstart.drag",Le,tt);"onselectstart"in t?n.on("selectstart.drag",Le,tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oi(e,t){var n=e.document.documentElement,o=he(e).on("dragstart.drag",null);t&&(o.on("click.drag",Le,tt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Tt=e=>()=>e;function Rn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:s,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}Rn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Vl(e){return!e.ctrlKey&&!e.button}function Hl(){return this.parentNode}function Fl(e,t){return t??{x:e.x,y:e.y}}function Ll(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gl(){var e=Vl,t=Hl,n=Fl,o=Ll,i={},a=Mt("start","drag","end"),l=0,s,c,u,d,g=0;function m(w){w.on("mousedown.drag",E).filter(o).on("touchstart.drag",x).on("touchmove.drag",_,Al).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(w,M){if(!(d||!e.call(this,w,M))){var R=D(this,t.call(this,w,M),w,M,"mouse");R&&(he(w.view).on("mousemove.drag",h,tt).on("mouseup.drag",f,tt),ni(w.view),$n(w),u=!1,s=w.clientX,c=w.clientY,R("start",w))}}function h(w){if(Le(w),!u){var M=w.clientX-s,R=w.clientY-c;u=M*M+R*R>g}i.mouse("drag",w)}function f(w){he(w.view).on("mousemove.drag mouseup.drag",null),oi(w.view,u),Le(w),i.mouse("end",w)}function x(w,M){if(e.call(this,w,M)){var R=w.changedTouches,y=t.call(this,w,M),L=R.length,B,k;for(B=0;B<L;++B)(k=D(this,y,w,M,R[B].identifier,R[B]))&&($n(w),k("start",w,R[B]))}}function _(w){var M=w.changedTouches,R=M.length,y,L;for(y=0;y<R;++y)(L=i[M[y].identifier])&&(Le(w),L("drag",w,M[y]))}function N(w){var M=w.changedTouches,R=M.length,y,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),y=0;y<R;++y)(L=i[M[y].identifier])&&($n(w),L("end",w,M[y]))}function D(w,M,R,y,L,B){var k=a.copy(),V=ye(B||R,M),Q,ee,v;if((v=n.call(w,new Rn("beforestart",{sourceEvent:R,target:m,identifier:L,active:l,x:V[0],y:V[1],dx:0,dy:0,dispatch:k}),y))!=null)return Q=v.x-V[0]||0,ee=v.y-V[1]||0,function z(S,H,X){var W=V,T;switch(S){case"start":i[L]=z,T=l++;break;case"end":delete i[L],--l;case"drag":V=ye(X||H,M),T=l;break}k.call(S,w,new Rn(S,{sourceEvent:H,subject:v,target:m,identifier:L,active:T,x:V[0]+Q,y:V[1]+ee,dx:V[0]-W[0],dy:V[1]-W[1],dispatch:k}),y)}}return m.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Tt(!!w),m):e},m.container=function(w){return arguments.length?(t=typeof w=="function"?w:Tt(w),m):t},m.subject=function(w){return arguments.length?(n=typeof w=="function"?w:Tt(w),m):n},m.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:Tt(!!w),m):o},m.on=function(){var w=a.on.apply(a,arguments);return w===a?m:w},m.clickDistance=function(w){return arguments.length?(g=(w=+w)*w,m):Math.sqrt(g)},m}function ii(e){const t=re(),n=r.toRef(t,"vueFlowRef"),o=r.toRef(t,"snapToGrid"),i=r.toRef(t,"snapGrid"),a=r.toRef(t,"noDragClassName"),l=r.toRef(t,"nodes"),s=r.toRef(t,"nodeExtent"),c=r.toRef(t,"viewport"),u=r.toRef(t,"autoPanOnNodeDrag"),d=r.toRef(t,"nodesDraggable"),g=r.toRef(t,"panBy"),m=r.toRef(t,"findNode"),E=r.toRef(t,"multiSelectionActive"),h=r.toRef(t,"nodesSelectionActive"),f=r.toRef(t,"selectNodesOnDrag"),x=r.toRef(t,"removeSelectedElements"),_=r.toRef(t,"addSelectedNodes"),N=r.toRef(t,"updateNodePositions"),D=r.toRef(t,"emits"),{onStart:w,onDrag:M,onStop:R,el:y,disabled:L,id:B,selectable:k}=e,V=r.ref(!1);let Q=r.ref([]),ee=r.ref(),v=r.ref(null),z=r.ref({x:void 0,y:void 0}),S=r.ref({x:0,y:0}),H=r.ref(null),X=r.ref(0),W=r.ref(!1),T=r.ref({x:0,y:0});const Z=Ho(),I=({x:U,y:q})=>{z.value={x:U,y:q};let $=!1;if(Q.value=Q.value.map(G=>{const p={x:U-G.distance.x,y:q-G.distance.y};o.value&&(p.x=i.value[0]*Math.round(p.x/i.value[0]),p.y=i.value[1]*Math.round(p.y/i.value[1]));const{computedPosition:b}=Sn(G,p,D.value.error,s.value,G.parentNode?m.value(G.parentNode):void 0);return $=$||G.position.x!==b.x||G.position.y!==b.y,G.position=b,G}),!!$&&(N.value(Q.value,!0,!0),V.value=!0,H.value)){const[G,p]=bn({id:B,dragItems:Q.value,findNode:m.value});M({event:H.value,node:G,nodes:p})}},J=()=>{if(!v.value)return;const[U,q]=Do(S.value,v.value);if(U!==0||q!==0){const $={x:(z.value.x??0)-U/c.value.zoom,y:(z.value.y??0)-q/c.value.zoom};g.value({x:U,y:q},G=>{(Math.round(G.x)!==Math.round(T.value.x)||Math.round(G.y)!==Math.round(T.value.y))&&(I($),T.value=G,z.value=$)})}X.value=requestAnimationFrame(J)};return r.watch([()=>oe(L),y],([U,q])=>{if(q){const $=he(q);if(U)$.on(".drag",null);else{const G=m.value(B);ee.value=Gl().on("start",p=>{var F;!f.value&&!E.value&&G&&(G.selected||x.value()),G&&oe(k)&&f.value&&Nn(G,E.value,_.value,x.value,h,!1,q);const b=Z(p);if(z.value=b,Q.value=jr(l.value,d.value,b,m.value,B),Q.value.length){const[O,A]=bn({id:B,dragItems:Q.value,findNode:m.value});w({event:p.sourceEvent,node:O,nodes:A})}v.value=((F=n.value)==null?void 0:F.getBoundingClientRect())||null,S.value=He(p.sourceEvent,v.value)}).on("drag",p=>{const b=Z(p);!W.value&&u.value&&(W.value=!0,J()),(z.value.x!==b.xSnapped||z.value.y!==b.ySnapped)&&Q.value.length&&(H.value=p.sourceEvent,S.value=He(p.sourceEvent,v.value),I(b))}).on("end",p=>{if(V.value=!1,W.value=!1,cancelAnimationFrame(X.value),Q.value.length){N.value(Q.value,!1,!1);const[b,F]=bn({id:B,dragItems:Q.value,findNode:m.value});R({event:p.sourceEvent,node:b,nodes:F})}}).filter(p=>{const b=p.target;return!p.button&&(!a.value||!zo(b,`.${a.value}`,q)&&(!(G!=null&&G.dragHandle)||zo(b,G.dragHandle,q)))}),$.call(ee.value)}}}),V}const ri="vue-flow__node-desc",ai="vue-flow__edge-desc",Yl="vue-flow__aria-live",li=["Enter"," ","Escape"],Ge={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function On(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target,n=_e(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=_e(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}function Xl(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Ul(e,t){return n=>e.some(o=>{const i=o.split("+").map(a=>a.trim().toLowerCase());return i.length===1?n.key===o:(t.add(n.key.toLowerCase()),i.every(a=>t.has(a)))})}const nt=(e,t)=>{const n=dn(),o=r.ref(oe(e)===!0),i=r.ref(!1),a=r.ref(new Set);return r.watch(o,()=>{t==null||t(o.value)}),r.watchEffect(()=>{let l=oe(e);if(n&&typeof n.addEventListener<"u"&&ln(n,"blur",()=>{o.value=!1}),Ji(l)){o.value=l;return}Array.isArray(l)&&(l=Ul(l,a.value)),l&&(ho(l,s=>{i.value=Xl(s),!(!i.value&&On(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),ho(l,s=>{if(o.value){if(!i.value&&On(s))return;i.value=!1,a.value.clear(),o.value=!1}},{eventName:"keyup"}))}),o},Zl=r.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){r.provide(wn,e.id);const t=re(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"noPanClassName"),a=r.toRef(t,"selectNodesOnDrag"),l=r.toRef(t,"nodesSelectionActive"),s=r.toRef(t,"multiSelectionActive"),c=r.toRef(t,"emits"),u=r.toRef(t,"findNode"),d=r.toRef(t,"removeSelectedNodes"),g=r.toRef(t,"addSelectedNodes"),m=r.toRef(t,"updateNodeDimensions"),E=r.toRef(t,"onUpdateNodeInternals"),h=r.toRef(t,"getIntersectingNodes"),f=r.toRef(t,"getNodeTypes"),x=r.toRef(t,"nodeExtent"),_=r.toRef(t,"elevateNodesOnSelect"),N=r.toRef(t,"disableKeyboardA11y"),D=r.toRef(t,"ariaLiveMessage"),w=r.toRef(t,"snapToGrid"),M=r.toRef(t,"snapGrid"),R=Vo(),y=Ke(e,"node"),L=r.computed(()=>u.value(y.value.parentNode)),B=r.computed(()=>qe([y.value],o.value)),k=r.ref();r.provide(ko,k);const{emit:V,on:Q}=ta(y.value,c.value),ee=ii({id:e.id,el:k,disabled:()=>!e.draggable,selectable:()=>e.selectable,onStart($){V.dragStart({...$,intersections:h.value(y.value)})},onDrag($){V.drag({...$,intersections:h.value(y.value)})},onStop($){V.dragStop({...$,intersections:h.value(y.value)})}}),v=r.computed(()=>y.value.class instanceof Function?y.value.class(y.value):y.value.class),z=r.computed(()=>{const $=(y.value.style instanceof Function?y.value.style(y.value):y.value.style)||{},G=y.value.width instanceof Function?y.value.width(y.value):y.value.width,p=y.value.height instanceof Function?y.value.height(y.value):y.value.height;return G&&($.width=typeof G=="string"?G:`${G}px`),p&&($.height=typeof p=="string"?p:`${p}px`),$}),S=()=>Number(y.value.zIndex??z.value.zIndex??0);return E.value($=>{$.includes(e.id)&&X()}),r.onMounted(()=>{e.resizeObserver.observe(k.value)}),r.onBeforeUnmount(()=>{e.resizeObserver.unobserve(k.value)}),r.watch([()=>y.value.type,()=>y.value.sourcePosition,()=>y.value.targetPosition],()=>{m.value([{id:e.id,nodeElement:k.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>y.value.position.x,()=>y.value.position.y,()=>{var $;return($=L.value)==null?void 0:$.computedPosition.x},()=>{var $;return($=L.value)==null?void 0:$.computedPosition.y},()=>{var $;return($=L.value)==null?void 0:$.computedPosition.z},()=>S(),()=>y.value.selected,()=>y.value.dimensions.height,()=>y.value.dimensions.width,()=>{var $;return($=L.value)==null?void 0:$.dimensions.height},()=>{var $;return($=L.value)==null?void 0:$.dimensions.width}],([$,G,p,b,F,O])=>{const A={x:$,y:G,z:O+(_.value&&y.value.selected?1e3:0)};xe(p)&&xe(b)?y.value.computedPosition=Dr({x:p,y:b,z:F},A):y.value.computedPosition=A},{flush:"pre",immediate:!0}),r.watch([()=>y.value.extent,()=>x.value],([$,G],[p,b])=>{($!==p||G!==b)&&H()}),y.value.extent==="parent"||typeof y.value.extent=="object"&&"range"in y.value.extent&&y.value.extent.range==="parent"?ue(()=>y.value.initialized).toBe(!0).then(H):H(),()=>r.h("div",{ref:k,"data-id":y.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[i.value]:e.draggable,dragging:ee==null?void 0:ee.value,selected:y.value.selected,selectable:e.selectable},v.value],style:{zIndex:y.value.computedPosition.z??S(),transform:`translate(${y.value.computedPosition.x}px,${y.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:y.value.initialized?"visible":"hidden",...z.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":N.value?void 0:`${ri}-${n.value}`,"aria-label":y.value.ariaLabel,onMouseenter:W,onMousemove:T,onMouseleave:Z,onContextmenu:I,onClick:U,onDblclick:J,onKeydown:q},[r.h(e.type===!1?f.value.default:e.type,{id:y.value.id,type:y.value.type,data:y.value.data,events:{...y.value.events,...Q},selected:!!y.value.selected,resizing:!!y.value.resizing,dragging:ee.value,connectable:e.connectable,position:y.value.position,dimensions:y.value.dimensions,isValidTargetPos:y.value.isValidTargetPos,isValidSourcePos:y.value.isValidSourcePos,parent:y.value.parentNode,zIndex:y.value.computedPosition.z,targetPosition:y.value.targetPosition,sourcePosition:y.value.sourcePosition,label:y.value.label,dragHandle:y.value.dragHandle,onUpdateNodeInternals:X})]);function H(){const $=y.value.computedPosition;w.value&&($.x=M.value[0]*Math.round($.x/M.value[0]),$.y=M.value[1]*Math.round($.y/M.value[1]));const{computedPosition:G,position:p}=Sn(y.value,$,c.value.error,x.value,L.value);(y.value.computedPosition.x!==G.x||y.value.computedPosition.y!==G.y)&&(y.value.computedPosition={...y.value.computedPosition,...G}),(y.value.position.x!==p.x||y.value.position.y!==p.y)&&(y.value.position=p)}function X(){k.value&&m.value([{id:e.id,nodeElement:k.value,forceUpdate:!0}])}function W($){ee!=null&&ee.value||V.mouseEnter({event:$,node:y.value,connectedEdges:B.value})}function T($){ee!=null&&ee.value||V.mouseMove({event:$,node:y.value,connectedEdges:B.value})}function Z($){ee!=null&&ee.value||V.mouseLeave({event:$,node:y.value,connectedEdges:B.value})}function I($){return V.contextMenu({event:$,node:y.value,connectedEdges:B.value})}function J($){return V.doubleClick({event:$,node:y.value,connectedEdges:B.value})}function U($){e.selectable&&(!a.value||!e.draggable)&&Nn(y.value,s.value,g.value,d.value,l,!1,k.value),V.click({event:$,node:y.value,connectedEdges:B.value})}function q($){var G;if(!On($))if(li.includes($.key)&&e.selectable){const p=$.key==="Escape";p&&((G=k.value)==null||G.blur()),Nn(y.value,s.value,g.value,d.value,l,p,k.value)}else!N.value&&e.draggable&&y.value.selected&&Ge[$.key]&&(D.value=`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~y.value.position.x}, y: ${~~y.value.position.y}`,R({x:Ge[$.key].x,y:Ge[$.key].y},$.shiftKey))}}}),Kl=["transform"],Wl=["width","height","x","y","rx","ry"],ql=["y"],jl={name:"EdgeText",compatConfig:{MODE:3}},si=r.defineComponent({...jl,props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);r.onMounted(i),r.watch([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,l)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${r.unref(t).width+2*e.labelBgPadding[0]}px`,height:`${r.unref(t).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Wl)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:r.unref(t).height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(a.$slots,"default",{},()=>[r.unref(Ee)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,ql)],8,Kl))}}),Bt=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:s=!0,labelStyle:c,markerStart:u,markerEnd:d,interactionWidth:g=20},{attrs:m}){return[r.h("path",{style:m.style,class:["vue-flow__edge-path",m.class].join(" "),d:e,"marker-end":d,"marker-start":u}),g?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":g}):null,t&&xe(n)&&xe(o)?r.h(si,{x:n,y:o,label:t,labelStyle:c,labelShowBg:s,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};Bt.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"],Bt.inheritAttrs=!1,Bt.compatConfig={MODE:3};const ot=Bt;function Tn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,l=Math.abs(o-t)/2,s=o<t?o+l:o-l;return[a,s,i,l]}function Bn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:s}){const c=e*.125+i*.375+l*.375+n*.125,u=t*.125+a*.375+s*.375+o*.125,d=Math.abs(c-e),g=Math.abs(u-t);return[c,u,d,g]}function It(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ci({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,s;switch(e){case j.Left:l=t-It(t-o,a),s=n;break;case j.Right:l=t+It(o-t,a),s=n;break;case j.Top:l=t,s=n-It(n-i,a);break;case j.Bottom:l=t,s=n+It(i-n,a);break}return[l,s]}function Pt({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,curvature:l=.25}){const[s,c]=ci({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[u,d]=ci({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),[g,m,E,h]=Bn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${c} ${u},${d} ${o},${i}`,g,m,E,h]}const Dt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=Pt({sourcePosition:e,targetPosition:t,...n});return r.h(ot,{path:i,labelX:a,labelY:l,...n,...o})};Dt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],Dt.inheritAttrs=!1,Dt.compatConfig={MODE:3};const ui=Dt;function di({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case j.Left:case j.Right:a=.5*(t+o),l=n;break;case j.Top:case j.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function In({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top}){const[l,s]=di({pos:n,x1:e,y1:t,x2:o,y2:i}),[c,u]=di({pos:a,x1:o,y1:i,x2:e,y2:t}),[d,g,m,E]=Bn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:c,targetControlY:u});return[`M${e},${t} C${l},${s} ${c},${u} ${o},${i}`,d,g,m,E]}const zt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=In({sourcePosition:e,targetPosition:t,...n});return r.h(ot,{path:i,labelX:a,labelY:l,...n,...o})};zt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],zt.inheritAttrs=!1,zt.compatConfig={MODE:3};const fi=zt,hi={[j.Left]:{x:-1,y:0},[j.Right]:{x:1,y:0},[j.Top]:{x:0,y:-1},[j.Bottom]:{x:0,y:1}};function Ql({source:e,sourcePosition:t=j.Bottom,target:n}){return t===j.Left||t===j.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function gi(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Jl({source:e,sourcePosition:t=j.Bottom,target:n,targetPosition:o=j.Top,center:i,offset:a}){const l=hi[t],s=hi[o],c={x:e.x+l.x*a,y:e.y+l.y*a},u={x:n.x+s.x*a,y:n.y+s.y*a},d=Ql({source:c,sourcePosition:t,target:u}),g=d.x!==0?"x":"y",m=d[g];let E,h,f;const[x,_,N,D]=Tn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*s[g]===-1){h=i.x||x,f=i.y||_;const M=[{x:h,y:c.y},{x:h,y:u.y}],R=[{x:c.x,y:f},{x:u.x,y:f}];l[g]===m?E=g==="x"?M:R:E=g==="x"?R:M}else{const M=[{x:c.x,y:u.y}],R=[{x:u.x,y:c.y}];if(g==="x"?E=l.x===m?R:M:E=l.y===m?M:R,t!==o){const y=g==="x"?"y":"x",L=l[g]===s[y],B=c[y]>u[y],k=c[y]<u[y];(l[g]===1&&(!L&&B||L&&k)||l[g]!==1&&(!L&&k||L&&B))&&(E=g==="x"?M:R)}h=E[0].x,f=E[0].y}return[[e,c,...E,u,n],h,f,N,D]}function es(e,t,n,o){const i=Math.min(gi(e,t)/2,gi(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+i*u},${l}Q ${a},${l} ${a},${l+i*d}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${l+i*c}Q ${a},${l} ${a+i*s},${l}`}function At({sourceX:e,sourceY:t,sourcePosition:n=j.Bottom,targetX:o,targetY:i,targetPosition:a=j.Top,borderRadius:l=5,centerX:s,centerY:c,offset:u=20}){const[d,g,m,E,h]=Jl({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:s,y:c},offset:u});return[d.reduce((x,_,N)=>{let D;return N>0&&N<d.length-1?D=es(d[N-1],_,d[N+1],l):D=`${N===0?"M":"L"}${_.x} ${_.y}`,x+=D,x},""),g,m,E,h]}const Vt=function({sourcePosition:e=j.Bottom,targetPosition:t=j.Top,...n},{attrs:o}){const[i,a,l]=At({sourcePosition:e,targetPosition:t,...n});return r.h(ot,{path:i,labelX:a,labelY:l,...n,...o})};Vt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],Vt.inheritAttrs=!1,Vt.compatConfig={MODE:3};const Pn=Vt,Ht=function(e,{attrs:t}){return r.h(Pn,{...e,...t,borderRadius:0})};Ht.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Ht.inheritAttrs=!1,Ht.compatConfig={MODE:3};const mi=Ht;function Dn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,l,s]=Tn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,l,s]}const Ft=function(e,{attrs:t}){const[n,o,i]=Dn(e);return r.h(ot,{path:n,labelX:o,labelY:i,...e,...t})};Ft.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],Ft.inheritAttrs=!1,Ft.compatConfig={MODE:3};const pi=Ft;function ts(e,t,n){return n===j.Left?e-t:n===j.Right?e+t:e}function ns(e,t,n){return n===j.Top?e-t:n===j.Bottom?e+t:e}const zn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=j.Top,type:i}){return r.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:ts(t,e,o),cy:ns(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};zn.props=["radius","centerX","centerY","position","type"],zn.compatConfig={MODE:3};const yi=zn;function os(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function is(e,t){const n=os();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const rs=r.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:s,getEdgeTypes:c,removeSelectedEdges:u,findEdge:d,findNode:g,isValidConnection:m}=re(),E=is(e.edge,a),h=Ke(e,"edge");let f=r.ref(!1),x=r.ref(!1);const _=r.ref(""),N=r.ref(null),D=r.ref("source"),w=r.ref();r.provide(Mo,e.id),r.provide($o,w);const M=r.computed(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),R=r.computed(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:y}=En({nodeId:_,handleId:N,type:D,isValidConnection:m.value,edgeUpdaterType:D,onEdgeUpdate:k,onEdgeUpdateEnd:V});return()=>{const I=g(h.value.source),J=g(h.value.target);if(!I||!J||!h.value)return null;let U;o.value===$e.Strict?U=I.handleBounds.source:U=[...I.handleBounds.source||[],...I.handleBounds.target||[]];const q=Oo(U,h.value.sourceHandle);let $;o.value===$e.Strict?$=J.handleBounds.target:$=[...J.handleBounds.target||[],...J.handleBounds.source||[]];const G=Oo($,h.value.targetHandle),p=q?q.position:j.Bottom,b=G?G.position:j.Top,{sourceX:F,sourceY:O,targetY:A,targetX:C}=Vr(I,q,p,J,G,b);return h.value.sourceX=F,h.value.sourceY=O,h.value.targetX=C,h.value.targetY=A,r.h("g",{ref:w,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,s.value,M.value,{updating:f.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:ee,onContextmenu:v,onDblclick:z,onMouseenter:S,onMousemove:H,onMouseleave:X,onKeyDown:e.focusable?Z:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${ai}-${t}`:void 0,role:e.focusable?"button":void 0},[x.value?null:r.h(e.type===!1?c.value.default:e.type,{id:e.id,sourceNode:I,targetNode:J,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...E.on},style:R.value,markerStart:`url(#${ke(h.value.markerStart,t)})`,markerEnd:`url(#${ke(h.value.markerEnd,t)})`,sourcePosition:p,targetPosition:b,sourceX:F,sourceY:O,targetX:C,targetY:A,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:W,onMouseenter:L,onMouseout:B},r.h(yi,{position:p,centerX:F,centerY:O,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:T,onMouseenter:L,onMouseout:B},r.h(yi,{position:b,centerX:C,centerY:A,radius:i.value,type:"target","data-type":"target"}))]:null]])};function L(){f.value=!0}function B(){f.value=!1}function k(I,J){E.emit.update({event:I,edge:h.value,connection:J})}function V(I){E.emit.updateEnd({event:I,edge:h.value}),x.value=!1}function Q(I,J){I.button===0&&(x.value=!0,_.value=J?h.value.target:h.value.source,N.value=(J?h.value.targetHandle:h.value.sourceHandle)??"",D.value=J?"target":"source",E.emit.updateStart({event:I,edge:h.value}),y(I))}function ee(I){const J={event:I,edge:h.value};e.selectable&&(l.value=!1,n([h.value])),E.emit.click(J)}function v(I){E.emit.contextMenu({event:I,edge:h.value})}function z(I){E.emit.doubleClick({event:I,edge:h.value})}function S(I){E.emit.mouseEnter({event:I,edge:h.value})}function H(I){E.emit.mouseMove({event:I,edge:h.value})}function X(I){E.emit.mouseLeave({event:I,edge:h.value})}function W(I){Q(I,!0)}function T(I){Q(I,!1)}function Z(I){var J;li.includes(I.key)&&e.selectable&&(I.key==="Escape"?((J=w.value)==null||J.blur(),u([d(e.id)])):n([d(e.id)]))}}}),as={height:"0",width:"0"},ls={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},ss=r.defineComponent({...ls,setup(e){const{viewportRef:t}=re(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",as,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),cs={class:"vue-flow__connection"},us=["d","marker-end","marker-start"],ds={name:"ConnectionLine",compatConfig:{MODE:3}},fs=r.defineComponent({...ds,props:{sourceNode:null},setup(e){var B;const t=re(),n=r.toRef(t,"connectionMode"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionEndHandle"),a=r.toRef(t,"connectionPosition"),l=r.toRef(t,"connectionLineType"),s=r.toRef(t,"connectionLineStyle"),c=r.toRef(t,"connectionLineOptions"),u=r.toRef(t,"connectionStatus"),d=r.toRef(t,"viewport"),g=r.toRef(t,"findNode"),m={[j.Left]:j.Right,[j.Right]:j.Left,[j.Top]:j.Bottom,[j.Bottom]:j.Top},E=(B=r.inject(Et))==null?void 0:B["connection-line"],h=r.computed(()=>o.value.handleId),f=r.computed(()=>o.value.type),x=r.computed(()=>{var k;return((k=i.value)==null?void 0:k.handleId)&&g.value(i.value.nodeId)||null}),_=r.computed(()=>{var k,V;return(n.value===$e.Strict?(k=e.sourceNode.handleBounds[f.value])==null?void 0:k.find(Q=>Q.id===h.value):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(Q=>Q.id===h.value))||((V=e.sourceNode.handleBounds[f.value??"source"])==null?void 0:V[0])}),N=r.computed(()=>{var k,V,Q;return x.value&&((k=i.value)==null?void 0:k.handleId)&&((n.value===$e.Strict?(V=x.value.handleBounds[f.value==="source"?"target":"source"])==null?void 0:V.find(ee=>{var v;return ee.id===((v=i.value)==null?void 0:v.handleId)}):[...x.value.handleBounds.source||[],...x.value.handleBounds.target||[]].find(ee=>{var v;return ee.id===((v=i.value)==null?void 0:v.handleId)}))||((Q=x.value.handleBounds[f.value??"target"])==null?void 0:Q[0]))||null}),D=r.computed(()=>{var k;return(k=_.value)==null?void 0:k.position}),w=r.computed(()=>_.value?bt(D.value||j.Top,{...e.sourceNode.dimensions,...e.sourceNode.computedPosition},_.value):{x:e.sourceNode.dimensions.width/2,y:e.sourceNode.dimensions.height/2}),M=r.computed(()=>D.value?m[D.value]:void 0),R=r.computed(()=>(a.value.x-d.value.x)/d.value.zoom),y=r.computed(()=>(a.value.y-d.value.y)/d.value.zoom),L=r.computed(()=>{let k;const V={sourceX:w.value.x,sourceY:w.value.y,sourcePosition:D.value,targetX:R.value,targetY:y.value,targetPosition:M.value};switch(l.value??c.value.type){case Me.Bezier:[k]=Pt(V);break;case Me.Step:[k]=At({...V,borderRadius:0});break;case Me.SmoothStep:[k]=At(V);break;case Me.SimpleBezier:[k]=In(V);break;case Me.Straight:[k]=Dn(V);break;default:[k]=Pt(V);break}return k});return(k,V)=>{var Q;return r.openBlock(),r.createElementBlock("g",cs,[r.unref(E)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(E)),r.normalizeProps(r.mergeProps({key:0},{sourceX:r.unref(w).x,sourceY:r.unref(w).y,sourcePosition:(Q=r.unref(_))==null?void 0:Q.position,targetX:r.unref(R),targetY:r.unref(y),targetPosition:r.unref(M),sourceNode:e.sourceNode,sourceHandle:r.unref(_),targetNode:r.unref(x),targetHandle:r.unref(N),markerEnd:`url(#${r.unref(ke)(r.unref(c).markerEnd)})`,markerStart:`url(#${r.unref(ke)(r.unref(c).markerStart)})`,connectionStatus:r.unref(u)})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(L),class:r.normalizeClass(["vue-flow__connection-path",[r.unref(c).class,r.unref(u)]]),style:r.normalizeStyle(r.unref(s)||r.unref(c).style||{}),"marker-end":`url(#${r.unref(ke)(r.unref(c).markerEnd)})`,"marker-start":`url(#${r.unref(ke)(r.unref(c).markerStart)})`},null,14,us))])}}}),hs=["tabIndex"],gs={name:"NodesSelection",compatConfig:{MODE:3}},ms=r.defineComponent({...gs,setup(e){const t=re(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes"),a=r.toRef(t,"noPanClassName"),l=r.toRef(t,"disableKeyboardA11y"),s=r.toRef(t,"userSelectionActive"),c=Vo(),u=r.ref(),d=ii({el:u,onStart(f){n.value.selectionDragStart(f)},onDrag(f){n.value.selectionDrag(f)},onStop(f){n.value.selectionDragStop(f)}});r.onMounted(()=>{var f;l.value||(f=u.value)==null||f.focus({preventScroll:!0})});const g=r.computed(()=>wt(i.value)),m=r.computed(()=>({width:`${g.value.width}px`,height:`${g.value.height}px`,top:`${g.value.y}px`,left:`${g.value.x}px`}));function E(f){n.value.selectionContextMenu({event:f,nodes:i.value})}function h(f){l.value||Ge[f.key]&&c({x:Ge[f.key].x,y:Ge[f.key].y},f.shiftKey)}return(f,x)=>!r.unref(s)&&r.unref(g).width&&r.unref(g).height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",r.unref(a)]),style:r.normalizeStyle({transform:`translate(${r.unref(o).x}px,${r.unref(o).y}px) scale(${r.unref(o).zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:u,class:r.normalizeClass([{dragging:r.unref(d)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(m)),tabIndex:r.unref(l)?void 0:-1,onContextmenu:E,onKeydown:h},null,46,hs)],6)):r.createCommentVNode("",!0)}}),ps={name:"UserSelection",compatConfig:{MODE:3}},ys=r.defineComponent({...ps,setup(e){const{userSelectionRect:t}=re();return(n,o)=>{var i,a,l,s;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:r.normalizeStyle({width:`${(i=r.unref(t))==null?void 0:i.width}px`,height:`${(a=r.unref(t))==null?void 0:a.height}px`,transform:`translate(${(l=r.unref(t))==null?void 0:l.x}px, ${(s=r.unref(t))==null?void 0:s.y}px)`})},null,4)}}}),vi={input:Wr,default:Kr,output:qr},wi={default:ui,straight:pi,step:mi,smoothstep:Pn,simplebezier:fi};function vs(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:_t.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Qe.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Me.Bezier,style:{}},connectionMode:$e.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:kr(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function _i(e){const t=vs();return e&&Object.keys(e).forEach(n=>{const o=e[n];ie(o)&&(t[n]=o)}),t}function ws(e,t,n){const o=r.computed(()=>f=>e.nodes&&!t.value.length?e.nodes.find(x=>x.id===f):e.nodes[t.value.indexOf(f)]),i=r.computed(()=>f=>e.edges&&!n.value.length?e.edges.find(x=>x.id===f):e.edges[n.value.indexOf(f)]),a=r.computed(()=>{var _;const f={...wi,...e.edgeTypes},x=Object.keys(f);return(_=e.edges)==null||_.forEach(N=>N.type&&!x.includes(N.type)&&(f[N.type]=N.type)),f}),l=r.computed(()=>{var _;const f={...vi,...e.nodeTypes},x=Object.keys(f);return(_=e.nodes)==null||_.forEach(N=>N.type&&!x.includes(N.type)&&(f[N.type]=N.type)),f}),s=r.computed(()=>{const f=e.nodes.filter(x=>!x.hidden);return e.onlyRenderVisibleElements?f&&yn(f,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):f??[]}),c=(f,x,_)=>{if(x=x??o.value(f.source),_=_??o.value(f.target),!x||!_){e.hooks.error.trigger(new se(ae.EDGE_ORPHANED,f.id));return}return!f.hidden&&!_.hidden&&!x.hidden},u=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(f=>{const x=o.value(f.source),_=o.value(f.target);return c(f,x,_)&&Hr({sourcePos:x.computedPosition||{x:0,y:0},targetPos:_.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:_.dimensions.width,targetHeight:_.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(f=>c(f))),d=r.computed(()=>[...s.value,...u.value]),g=r.computed(()=>e.nodes.filter(f=>f.selected)),m=r.computed(()=>e.edges.filter(f=>f.selected)),E=r.computed(()=>[...g.value??[],...m.value??[]]),h=r.computed(()=>s.value.filter(f=>f.initialized&&f.handleBounds!==void 0));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:u,getNodes:s,getSelectedElements:E,getSelectedNodes:g,getSelectedEdges:m,getNodesInitialized:h}}function An(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xi(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function it(){}var rt=.7,Lt=1/rt,Ye="\\s*([+-]?\\d+)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ve="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_s=/^#([0-9a-f]{3,8})$/,xs=new RegExp(`^rgb\\(${Ye},${Ye},${Ye}\\)$`),Es=new RegExp(`^rgb\\(${ve},${ve},${ve}\\)$`),bs=new RegExp(`^rgba\\(${Ye},${Ye},${Ye},${at}\\)$`),Ss=new RegExp(`^rgba\\(${ve},${ve},${ve},${at}\\)$`),Ns=new RegExp(`^hsl\\(${at},${ve},${ve}\\)$`),Cs=new RegExp(`^hsla\\(${at},${ve},${ve},${at}\\)$`),Ei={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};An(it,lt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bi,formatHex:bi,formatHex8:ks,formatHsl:Ms,formatRgb:Si,toString:Si});function bi(){return this.rgb().formatHex()}function ks(){return this.rgb().formatHex8()}function Ms(){return $i(this).formatHsl()}function Si(){return this.rgb().formatRgb()}function lt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_s.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ni(t):n===3?new ce(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Gt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Gt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=xs.exec(e))?new ce(t[1],t[2],t[3],1):(t=Es.exec(e))?new ce(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bs.exec(e))?Gt(t[1],t[2],t[3],t[4]):(t=Ss.exec(e))?Gt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ns.exec(e))?Mi(t[1],t[2]/100,t[3]/100,1):(t=Cs.exec(e))?Mi(t[1],t[2]/100,t[3]/100,t[4]):Ei.hasOwnProperty(e)?Ni(Ei[e]):e==="transparent"?new ce(NaN,NaN,NaN,0):null}function Ni(e){return new ce(e>>16&255,e>>8&255,e&255,1)}function Gt(e,t,n,o){return o<=0&&(e=t=n=NaN),new ce(e,t,n,o)}function $s(e){return e instanceof it||(e=lt(e)),e?(e=e.rgb(),new ce(e.r,e.g,e.b,e.opacity)):new ce}function Vn(e,t,n,o){return arguments.length===1?$s(e):new ce(e,t,n,o??1)}function ce(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}An(ce,Vn,xi(it,{brighter(e){return e=e==null?Lt:Math.pow(Lt,e),new ce(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rt:Math.pow(rt,e),new ce(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ce(Be(this.r),Be(this.g),Be(this.b),Yt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ci,formatHex:Ci,formatHex8:Rs,formatRgb:ki,toString:ki}));function Ci(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}`}function Rs(){return`#${Ie(this.r)}${Ie(this.g)}${Ie(this.b)}${Ie((isNaN(this.opacity)?1:this.opacity)*255)}`}function ki(){const e=Yt(this.opacity);return`${e===1?"rgb(":"rgba("}${Be(this.r)}, ${Be(this.g)}, ${Be(this.b)}${e===1?")":`, ${e})`}`}function Yt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Be(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ie(e){return e=Be(e),(e<16?"0":"")+e.toString(16)}function Mi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ge(e,t,n,o)}function $i(e){if(e instanceof ge)return new ge(e.h,e.s,e.l,e.opacity);if(e instanceof it||(e=lt(e)),!e)return new ge;if(e instanceof ge)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,s=a-i,c=(a+i)/2;return s?(t===a?l=(n-o)/s+(n<o)*6:n===a?l=(o-t)/s+2:l=(t-n)/s+4,s/=c<.5?a+i:2-a-i,l*=60):s=c>0&&c<1?0:l,new ge(l,s,c,e.opacity)}function Os(e,t,n,o){return arguments.length===1?$i(e):new ge(e,t,n,o??1)}function ge(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}An(ge,Os,xi(it,{brighter(e){return e=e==null?Lt:Math.pow(Lt,e),new ge(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rt:Math.pow(rt,e),new ge(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ce(Hn(e>=240?e-240:e+120,i,o),Hn(e,i,o),Hn(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new ge(Ri(this.h),Xt(this.s),Xt(this.l),Yt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Yt(this.opacity);return`${e===1?"hsl(":"hsla("}${Ri(this.h)}, ${Xt(this.s)*100}%, ${Xt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ri(e){return e=(e||0)%360,e<0?e+360:e}function Xt(e){return Math.max(0,Math.min(1,e||0))}function Hn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Oi=e=>()=>e;function Ts(e,t){return function(n){return e+n*t}}function Bs(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function Is(e){return(e=+e)==1?Ti:function(t,n){return n-t?Bs(t,n,e):Oi(isNaN(t)?n:t)}}function Ti(e,t){var n=t-e;return n?Ts(e,n):Oi(isNaN(e)?t:e)}const Bi=function e(t){var n=Is(t);function o(i,a){var l=n((i=Vn(i)).r,(a=Vn(a)).r),s=n(i.g,a.g),c=n(i.b,a.b),u=Ti(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=s(d),i.b=c(d),i.opacity=u(d),i+""}}return o.gamma=e,o}(1);function Re(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ln=new RegExp(Fn.source,"g");function Ps(e){return function(){return e}}function Ds(e){return function(t){return e(t)+""}}function zs(e,t){var n=Fn.lastIndex=Ln.lastIndex=0,o,i,a,l=-1,s=[],c=[];for(e=e+"",t=t+"";(o=Fn.exec(e))&&(i=Ln.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[l]?s[l]+=a:s[++l]=a),(o=o[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,c.push({i:l,x:Re(o,i)})),n=Ln.lastIndex;return n<t.length&&(a=t.slice(n),s[l]?s[l]+=a:s[++l]=a),s.length<2?c[0]?Ds(c[0].x):Ps(t):(t=c.length,function(u){for(var d=0,g;d<t;++d)s[(g=c[d]).i]=g.x(u);return s.join("")})}var Ii=180/Math.PI,Gn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pi(e,t,n,o,i,a){var l,s,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,c/=s),e*o<t*n&&(e=-e,t=-t,c=-c,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ii,skewX:Math.atan(c)*Ii,scaleX:l,scaleY:s}}var Ut;function As(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Gn:Pi(t.a,t.b,t.c,t.d,t.e,t.f)}function Vs(e){return e==null||(Ut||(Ut=document.createElementNS("http://www.w3.org/2000/svg","g")),Ut.setAttribute("transform",e),!(e=Ut.transform.baseVal.consolidate()))?Gn:(e=e.matrix,Pi(e.a,e.b,e.c,e.d,e.e,e.f))}function Di(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function a(u,d,g,m,E,h){if(u!==g||d!==m){var f=E.push("translate(",null,t,null,n);h.push({i:f-4,x:Re(u,g)},{i:f-2,x:Re(d,m)})}else(g||m)&&E.push("translate("+g+t+m+n)}function l(u,d,g,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:g.push(i(g)+"rotate(",null,o)-2,x:Re(u,d)})):d&&g.push(i(g)+"rotate("+d+o)}function s(u,d,g,m){u!==d?m.push({i:g.push(i(g)+"skewX(",null,o)-2,x:Re(u,d)}):d&&g.push(i(g)+"skewX("+d+o)}function c(u,d,g,m,E,h){if(u!==g||d!==m){var f=E.push(i(E)+"scale(",null,",",null,")");h.push({i:f-4,x:Re(u,g)},{i:f-2,x:Re(d,m)})}else(g!==1||m!==1)&&E.push(i(E)+"scale("+g+","+m+")")}return function(u,d){var g=[],m=[];return u=e(u),d=e(d),a(u.translateX,u.translateY,d.translateX,d.translateY,g,m),l(u.rotate,d.rotate,g,m),s(u.skewX,d.skewX,g,m),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,g,m),u=d=null,function(E){for(var h=-1,f=m.length,x;++h<f;)g[(x=m[h]).i]=x.x(E);return g.join("")}}}var Hs=Di(As,"px, ","px)","deg)"),Fs=Di(Vs,", ",")",")"),Ls=1e-12;function zi(e){return((e=Math.exp(e))+1/e)/2}function Gs(e){return((e=Math.exp(e))-1/e)/2}function Ys(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xs=function e(t,n,o){function i(a,l){var s=a[0],c=a[1],u=a[2],d=l[0],g=l[1],m=l[2],E=d-s,h=g-c,f=E*E+h*h,x,_;if(f<Ls)_=Math.log(m/u)/t,x=function(y){return[s+y*E,c+y*h,u*Math.exp(t*y*_)]};else{var N=Math.sqrt(f),D=(m*m-u*u+o*f)/(2*u*n*N),w=(m*m-u*u-o*f)/(2*m*n*N),M=Math.log(Math.sqrt(D*D+1)-D),R=Math.log(Math.sqrt(w*w+1)-w);_=(R-M)/t,x=function(y){var L=y*_,B=zi(M),k=u/(n*N)*(B*Ys(t*L+M)-Gs(M));return[s+k*E,c+k*h,u*B/zi(t*L+M)]}}return x.duration=_*1e3*t/Math.SQRT2,x}return i.rho=function(a){var l=Math.max(.001,+a),s=l*l,c=s*s;return e(l,s,c)},i}(Math.SQRT2,2,4);var Xe=0,st=0,ct=0,Ai=1e3,Zt,ut,Kt=0,Pe=0,Wt=0,dt=typeof performance=="object"&&performance.now?performance:Date,Vi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Yn(){return Pe||(Vi(Us),Pe=dt.now()+Wt)}function Us(){Pe=0}function qt(){this._call=this._time=this._next=null}qt.prototype=Hi.prototype={constructor:qt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Yn():+n)+(t==null?0:+t),!this._next&&ut!==this&&(ut?ut._next=this:Zt=this,ut=this),this._call=e,this._time=n,Xn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xn())}};function Hi(e,t,n){var o=new qt;return o.restart(e,t,n),o}function Zs(){Yn(),++Xe;for(var e=Zt,t;e;)(t=Pe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xe}function Fi(){Pe=(Kt=dt.now())+Wt,Xe=st=0;try{Zs()}finally{Xe=0,Ws(),Pe=0}}function Ks(){var e=dt.now(),t=e-Kt;t>Ai&&(Wt-=t,Kt=e)}function Ws(){for(var e,t=Zt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Zt=n);ut=e,Xn(o)}function Xn(e){if(!Xe){st&&(st=clearTimeout(st));var t=e-Pe;t>24?(e<1/0&&(st=setTimeout(Fi,e-dt.now()-Wt)),ct&&(ct=clearInterval(ct))):(ct||(Kt=dt.now(),ct=setInterval(Ks,Ai)),Xe=1,Vi(Fi))}}function Li(e,t,n){var o=new qt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var qs=Mt("start","end","cancel","interrupt"),js=[],Gi=0,Yi=1,Un=2,jt=3,Xi=4,Zn=5,Qt=6;function Jt(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;Qs(e,n,{name:t,index:o,group:i,on:qs,tween:js,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Gi})}function Kn(e,t){var n=me(e,t);if(n.state>Gi)throw new Error("too late; already scheduled");return n}function we(e,t){var n=me(e,t);if(n.state>jt)throw new Error("too late; already running");return n}function me(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qs(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Hi(a,0,n.time);function a(u){n.state=Yi,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var d,g,m,E;if(n.state!==Yi)return c();for(d in o)if(E=o[d],E.name===n.name){if(E.state===jt)return Li(l);E.state===Xi?(E.state=Qt,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete o[d]):+d<t&&(E.state=Qt,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete o[d])}if(Li(function(){n.state===jt&&(n.state=Xi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Un,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Un){for(n.state=jt,i=new Array(m=n.tween.length),d=0,g=-1;d<m;++d)(E=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++g]=E);i.length=g+1}}function s(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Zn,1),g=-1,m=i.length;++g<m;)i[g].call(e,d);n.state===Zn&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Qt,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function en(e,t){var n=e.__transition,o,i,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>Un&&o.state<Zn,o.state=Qt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function Js(e){return this.each(function(){en(this,e)})}function ec(e,t){var n,o;return function(){var i=we(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function tc(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=we(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var s={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=s;break}c===u&&i.push(s)}a.tween=i}}function nc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=me(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?ec:tc)(n,e,t))}function Wn(e,t,n){var o=e._id;return e.each(function(){var i=we(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return me(i,o).value[t]}}function Ui(e,t){var n;return(typeof t=="number"?Re:t instanceof lt?Bi:(n=lt(t))?(t=n,Bi):zs)(e,t)}function oc(e){return function(){this.removeAttribute(e)}}function ic(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rc(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function ac(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function lc(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function sc(e,t,n){var o,i,a;return function(){var l,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=s+"",l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s)))}}function cc(e,t){var n=Rt(e),o=n==="transform"?Fs:Ui;return this.attrTween(e,typeof t=="function"?(n.local?sc:lc)(n,o,Wn(this,"attr."+e,t)):t==null?(n.local?ic:oc)(n):(n.local?ac:rc)(n,o,t))}function uc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function fc(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&dc(e,a)),n}return i._value=t,i}function hc(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&uc(e,a)),n}return i._value=t,i}function gc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Rt(e);return this.tween(n,(o.local?fc:hc)(o,t))}function mc(e,t){return function(){Kn(this,e).delay=+t.apply(this,arguments)}}function pc(e,t){return t=+t,function(){Kn(this,e).delay=t}}function yc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mc:pc)(t,e)):me(this.node(),t).delay}function vc(e,t){return function(){we(this,e).duration=+t.apply(this,arguments)}}function wc(e,t){return t=+t,function(){we(this,e).duration=t}}function _c(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vc:wc)(t,e)):me(this.node(),t).duration}function xc(e,t){if(typeof t!="function")throw new Error;return function(){we(this,e).ease=t}}function Ec(e){var t=this._id;return arguments.length?this.each(xc(t,e)):me(this.node(),t).ease}function bc(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;we(this,e).ease=n}}function Sc(e){if(typeof e!="function")throw new Error;return this.each(bc(this._id,e))}function Nc(e){typeof e!="function"&&(e=Uo(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],c,u=0;u<l;++u)(c=a[u])&&e.call(c,c.__data__,u,a)&&s.push(c);return new be(o,this._parents,this._name,this._id)}function Cc(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),s=0;s<a;++s)for(var c=t[s],u=n[s],d=c.length,g=l[s]=new Array(d),m,E=0;E<d;++E)(m=c[E]||u[E])&&(g[E]=m);for(;s<o;++s)l[s]=t[s];return new be(l,this._parents,this._name,this._id)}function kc(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Mc(e,t,n){var o,i,a=kc(t)?Kn:we;return function(){var l=a(this,e),s=l.on;s!==o&&(i=(o=s).copy()).on(t,n),l.on=i}}function $c(e,t){var n=this._id;return arguments.length<2?me(this.node(),n).on.on(e):this.each(Mc(n,e,t))}function Rc(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Oc(){return this.on("end.remove",Rc(this._id))}function Tc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kn(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s=o[l],c=s.length,u=a[l]=new Array(c),d,g,m=0;m<c;++m)(d=s[m])&&(g=e.call(d,d.__data__,m,s))&&("__data__"in d&&(g.__data__=d.__data__),u[m]=g,Jt(u[m],t,n,m,u,me(d,n)));return new be(a,this._parents,t,n)}function Bc(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xo(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var c=o[s],u=c.length,d,g=0;g<u;++g)if(d=c[g]){for(var m=e.call(d,d.__data__,g,c),E,h=me(d,n),f=0,x=m.length;f<x;++f)(E=m[f])&&Jt(E,t,n,f,m,h);a.push(m),l.push(d)}return new be(a,l,t,n)}var Ic=et.prototype.constructor;function Pc(){return new Ic(this._groups,this._parents)}function Dc(e,t){var n,o,i;return function(){var a=Fe(this,e),l=(this.style.removeProperty(e),Fe(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function Zi(e){return function(){this.style.removeProperty(e)}}function zc(e,t,n){var o,i=n+"",a;return function(){var l=Fe(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Ac(e,t,n){var o,i,a;return function(){var l=Fe(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),Fe(this,e))),l===c?null:l===o&&c===i?a:(i=c,a=t(o=l,s))}}function Vc(e,t){var n,o,i,a="style."+t,l="end."+a,s;return function(){var c=we(this,e),u=c.on,d=c.value[a]==null?s||(s=Zi(t)):void 0;(u!==n||i!==d)&&(o=(n=u).copy()).on(l,i=d),c.on=o}}function Hc(e,t,n){var o=(e+="")=="transform"?Hs:Ui;return t==null?this.styleTween(e,Dc(e,o)).on("end.style."+e,Zi(e)):typeof t=="function"?this.styleTween(e,Ac(e,o,Wn(this,"style."+e,t))).each(Vc(this._id,e)):this.styleTween(e,zc(e,o,t),n).on("end.style."+e,null)}function Fc(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Lc(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Fc(e,l,n)),o}return a._value=t,a}function Gc(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Lc(e,t,n??""))}function Yc(e){return function(){this.textContent=e}}function Xc(e){return function(){var t=e(this);this.textContent=t??""}}function Uc(e){return this.tween("text",typeof e=="function"?Xc(Wn(this,"text",e)):Yc(e==null?"":e+""))}function Zc(e){return function(t){this.textContent=e.call(this,t)}}function Kc(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Zc(i)),t}return o._value=e,o}function Wc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Kc(e))}function qc(){for(var e=this._name,t=this._id,n=Ki(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)if(c=l[u]){var d=me(c,t);Jt(c,e,n,u,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new be(o,this._parents,e,n)}function jc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var s={value:l},c={value:function(){--i===0&&a()}};n.each(function(){var u=we(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),u.on=t}),i===0&&a()})}var Qc=0;function be(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Ki(){return++Qc}var Se=et.prototype;be.prototype={constructor:be,select:Tc,selectAll:Bc,selectChild:Se.selectChild,selectChildren:Se.selectChildren,filter:Nc,merge:Cc,selection:Pc,transition:qc,call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:$c,attr:cc,attrTween:gc,style:Hc,styleTween:Gc,text:Uc,textTween:Wc,remove:Oc,tween:nc,delay:yc,duration:_c,ease:Ec,easeVarying:Sc,end:jc,[Symbol.iterator]:Se[Symbol.iterator]};function Jc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var eu={time:null,delay:0,duration:250,ease:Jc};function tu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function nu(e){var t,n;e instanceof be?(t=e._id,e=e._name):(t=Ki(),(n=eu).time=Yn(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,c,u=0;u<s;++u)(c=l[u])&&Jt(c,e,t,u,l,n||tu(c,t));return new be(o,this._parents,e,t)}et.prototype.interrupt=Js,et.prototype.transition=nu;const tn=e=>()=>e;function ou(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Ne(e,t,n){this.k=e,this.x=t,this.y=n}Ne.prototype={constructor:Ne,scale:function(e){return e===1?this:new Ne(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ne(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ue=new Ne(1,0,0);Ne.prototype;function qn(e){e.stopImmediatePropagation()}function ft(e){e.preventDefault(),e.stopImmediatePropagation()}function iu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ru(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wi(){return this.__zoom||Ue}function au(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function lu(){return navigator.maxTouchPoints||"ontouchstart"in this}function su(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function cu(){var e=iu,t=ru,n=su,o=au,i=lu,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,c=Xs,u=Mt("start","zoom","end"),d,g,m,E=500,h=150,f=0,x=10;function _(v){v.property("__zoom",Wi).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",ee).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(v,z,S,H){var X=v.selection?v.selection():v;X.property("__zoom",Wi),v!==X?M(v,z,S,H):X.interrupt().each(function(){R(this,arguments).event(H).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},_.scaleBy=function(v,z,S,H){_.scaleTo(v,function(){var X=this.__zoom.k,W=typeof z=="function"?z.apply(this,arguments):z;return X*W},S,H)},_.scaleTo=function(v,z,S,H){_.transform(v,function(){var X=t.apply(this,arguments),W=this.__zoom,T=S==null?w(X):typeof S=="function"?S.apply(this,arguments):S,Z=W.invert(T),I=typeof z=="function"?z.apply(this,arguments):z;return n(D(N(W,I),T,Z),X,l)},S,H)},_.translateBy=function(v,z,S,H){_.transform(v,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),l)},null,H)},_.translateTo=function(v,z,S,H,X){_.transform(v,function(){var W=t.apply(this,arguments),T=this.__zoom,Z=H==null?w(W):typeof H=="function"?H.apply(this,arguments):H;return n(Ue.translate(Z[0],Z[1]).scale(T.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof S=="function"?-S.apply(this,arguments):-S),W,l)},H,X)};function N(v,z){return z=Math.max(a[0],Math.min(a[1],z)),z===v.k?v:new Ne(z,v.x,v.y)}function D(v,z,S){var H=z[0]-S[0]*v.k,X=z[1]-S[1]*v.k;return H===v.x&&X===v.y?v:new Ne(v.k,H,X)}function w(v){return[(+v[0][0]+ +v[1][0])/2,(+v[0][1]+ +v[1][1])/2]}function M(v,z,S,H){v.on("start.zoom",function(){R(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(H).end()}).tween("zoom",function(){var X=this,W=arguments,T=R(X,W).event(H),Z=t.apply(X,W),I=S==null?w(Z):typeof S=="function"?S.apply(X,W):S,J=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),U=X.__zoom,q=typeof z=="function"?z.apply(X,W):z,$=c(U.invert(I).concat(J/U.k),q.invert(I).concat(J/q.k));return function(G){if(G===1)G=q;else{var p=$(G),b=J/p[2];G=new Ne(b,I[0]-p[0]*b,I[1]-p[1]*b)}T.zoom(null,G)}})}function R(v,z,S){return!S&&v.__zooming||new y(v,z)}function y(v,z){this.that=v,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(v,z),this.taps=0}y.prototype={event:function(v){return v&&(this.sourceEvent=v),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(v,z){return this.mouse&&v!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&v!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&v!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(v){var z=he(this.that).datum();u.call(v,this.that,new ou(v,{sourceEvent:this.sourceEvent,target:_,type:v,transform:this.that.__zoom,dispatch:u}),z)}};function L(v,...z){if(!e.apply(this,arguments))return;var S=R(this,z).event(v),H=this.__zoom,X=Math.max(a[0],Math.min(a[1],H.k*Math.pow(2,o.apply(this,arguments)))),W=ye(v);if(S.wheel)(S.mouse[0][0]!==W[0]||S.mouse[0][1]!==W[1])&&(S.mouse[1]=H.invert(S.mouse[0]=W)),clearTimeout(S.wheel);else{if(H.k===X)return;S.mouse=[W,H.invert(W)],en(this),S.start()}ft(v),S.wheel=setTimeout(T,h),S.zoom("mouse",n(D(N(H,X),S.mouse[0],S.mouse[1]),S.extent,l));function T(){S.wheel=null,S.end()}}function B(v,...z){if(m||!e.apply(this,arguments))return;var S=v.currentTarget,H=R(this,z,!0).event(v),X=he(v.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",J,!0),W=ye(v,S),T=v.clientX,Z=v.clientY;ni(v.view),qn(v),H.mouse=[W,this.__zoom.invert(W)],en(this),H.start();function I(U){if(ft(U),!H.moved){var q=U.clientX-T,$=U.clientY-Z;H.moved=q*q+$*$>f}H.event(U).zoom("mouse",n(D(H.that.__zoom,H.mouse[0]=ye(U,S),H.mouse[1]),H.extent,l))}function J(U){X.on("mousemove.zoom mouseup.zoom",null),oi(U.view,H.moved),ft(U),H.event(U).end()}}function k(v,...z){if(e.apply(this,arguments)){var S=this.__zoom,H=ye(v.changedTouches?v.changedTouches[0]:v,this),X=S.invert(H),W=S.k*(v.shiftKey?.5:2),T=n(D(N(S,W),H,X),t.apply(this,z),l);ft(v),s>0?he(this).transition().duration(s).call(M,T,H,v):he(this).call(_.transform,T,H,v)}}function V(v,...z){if(e.apply(this,arguments)){var S=v.touches,H=S.length,X=R(this,z,v.changedTouches.length===H).event(v),W,T,Z,I;for(qn(v),T=0;T<H;++T)Z=S[T],I=ye(Z,this),I=[I,this.__zoom.invert(I),Z.identifier],X.touch0?!X.touch1&&X.touch0[2]!==I[2]&&(X.touch1=I,X.taps=0):(X.touch0=I,W=!0,X.taps=1+!!d);d&&(d=clearTimeout(d)),W&&(X.taps<2&&(g=I[0],d=setTimeout(function(){d=null},E)),en(this),X.start())}}function Q(v,...z){if(this.__zooming){var S=R(this,z).event(v),H=v.changedTouches,X=H.length,W,T,Z,I;for(ft(v),W=0;W<X;++W)T=H[W],Z=ye(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=Z:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=Z);if(T=S.that.__zoom,S.touch1){var J=S.touch0[0],U=S.touch0[1],q=S.touch1[0],$=S.touch1[1],G=(G=q[0]-J[0])*G+(G=q[1]-J[1])*G,p=(p=$[0]-U[0])*p+(p=$[1]-U[1])*p;T=N(T,Math.sqrt(G/p)),Z=[(J[0]+q[0])/2,(J[1]+q[1])/2],I=[(U[0]+$[0])/2,(U[1]+$[1])/2]}else if(S.touch0)Z=S.touch0[0],I=S.touch0[1];else return;S.zoom("touch",n(D(T,Z,I),S.extent,l))}}function ee(v,...z){if(this.__zooming){var S=R(this,z).event(v),H=v.changedTouches,X=H.length,W,T;for(qn(v),m&&clearTimeout(m),m=setTimeout(function(){m=null},E),W=0;W<X;++W)T=H[W],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=ye(T,this),Math.hypot(g[0]-T[0],g[1]-T[1])<x)){var Z=he(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return _.wheelDelta=function(v){return arguments.length?(o=typeof v=="function"?v:tn(+v),_):o},_.filter=function(v){return arguments.length?(e=typeof v=="function"?v:tn(!!v),_):e},_.touchable=function(v){return arguments.length?(i=typeof v=="function"?v:tn(!!v),_):i},_.extent=function(v){return arguments.length?(t=typeof v=="function"?v:tn([[+v[0][0],+v[0][1]],[+v[1][0],+v[1][1]]]),_):t},_.scaleExtent=function(v){return arguments.length?(a[0]=+v[0],a[1]=+v[1],_):[a[0],a[1]]},_.translateExtent=function(v){return arguments.length?(l[0][0]=+v[0][0],l[1][0]=+v[1][0],l[0][1]=+v[0][1],l[1][1]=+v[1][1],_):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},_.constrain=function(v){return arguments.length?(n=v,_):n},_.duration=function(v){return arguments.length?(s=+v,_):s},_.interpolate=function(v){return arguments.length?(c=v,_):c},_.on=function(){var v=u.on.apply(u,arguments);return v===u?_:v},_.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,_):Math.sqrt(f)},_.tapDistance=function(v){return arguments.length?(x=+v,_):x},_}const jn=.1;function De(){}const uu={zoomIn:De,zoomOut:De,zoomTo:De,fitView:De,setCenter:De,fitBounds:De,project:e=>e,setTransform:De,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},du=(e,t)=>{const n=e,o=r.toRef(n,"nodes"),i=r.toRef(n,"d3Zoom"),a=r.toRef(n,"d3Selection"),l=r.toRef(n,"dimensions"),s=r.toRef(n,"translateExtent"),c=r.toRef(n,"minZoom"),u=r.toRef(n,"maxZoom"),d=r.toRef(n,"viewport"),g=r.toRef(n,"snapToGrid"),m=r.toRef(n,"snapGrid"),E=r.toRef(n,"hooks"),h=t,f=r.toRef(h,"getNodes"),x=r.ref(!1);E.value.nodesInitialized.on(()=>{x.value=!0});const _=r.computed(()=>!!i.value&&!!a.value&&!!l.value.width&&!!l.value.height&&x.value);function N(w,M){a.value&&i.value&&i.value.scaleBy(Qn(a.value,M),w)}function D(w,M,R,y){const{x:L,y:B}=hn({x:-w,y:-M},s.value),k=Ue.translate(-L,-B).scale(R);a.value&&i.value&&i.value.transform(Qn(a.value,y),k)}return r.computed(()=>_.value?{initialized:!0,zoomIn:w=>{N(1.2,w==null?void 0:w.duration)},zoomOut:w=>{N(1/1.2,w==null?void 0:w.duration)},zoomTo:(w,M)=>{a.value&&i.value&&i.value.scaleTo(Qn(a.value,M==null?void 0:M.duration),w)},setTransform:(w,M)=>{D(w.x,w.y,w.zoom,M==null?void 0:M.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(w={padding:jn,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const M=(w.includeHiddenNodes?o.value:f.value).filter(k=>{var ee;const V=k.initialized&&k.dimensions.width&&k.dimensions.height;let Q=!0;return(ee=w.nodes)!=null&&ee.length&&(Q=w.nodes.includes(k.id)),V&&Q}),R=wt(M),{x:y,y:L,zoom:B}=je(R,l.value.width,l.value.height,w.minZoom??c.value,w.maxZoom??u.value,w.padding??jn,w.offset);D(y,L,B,w==null?void 0:w.duration)},setCenter:(w,M,R)=>{const y=typeof(R==null?void 0:R.zoom)<"u"?R.zoom:u.value,L=l.value.width/2-w*y,B=l.value.height/2-M*y;D(L,B,y,R==null?void 0:R.duration)},fitBounds:(w,M={padding:jn})=>{const{x:R,y,zoom:L}=je(w,l.value.width,l.value.height,c.value,u.value,M.padding);D(R,y,L,M==null?void 0:M.duration)},project:w=>yt(w,d.value,g.value,m.value)}:uu)};function Qn(e,t=0){return e.transition().duration(t)}function Jn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(_e(t.style)?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(Ee(i.width)){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(Ee(i.height)){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,Ee(i.width)){const l=Number(i.width.replace("px",""));i.width=`${l+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,Ee(i.height)){const l=Number(i.height.replace("px",""));i.height=`${l+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),_e(t.style)?t.style=a=>{const l=t.style;return{...l(a),...i}}:t.style={...t.style,...i}}}}function ht(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(l=>l.id===i.id);a!==-1&&t.splice(a,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var l,s;const a=e.filter(c=>c.id===i.id);for(const c of a)switch(c.type){case"select":i.selected=c.selected;break;case"position":if(Te(i)&&(typeof c.position<"u"&&(i.position=c.position),typeof c.dragging<"u"&&(i.dragging=c.dragging),i.expandParent&&i.parentNode)){const u=t[o.indexOf(i.parentNode)];u&&Te(u)&&Jn(i,u)}break;case"dimensions":if(Te(i)){if(typeof c.dimensions<"u"&&(i.dimensions=c.dimensions),typeof c.updateStyle<"u"&&(i.style={...i.style||{},width:`${(l=c.dimensions)==null?void 0:l.width}px`,height:`${(s=c.dimensions)==null?void 0:s.height}px`}),typeof c.resizing<"u"&&(i.resizing=c.resizing),i.expandParent&&i.parentNode){const u=t[o.indexOf(i.parentNode)];u&&Te(u)&&(u.initialized?Jn(i,u):r.nextTick(()=>{Jn(i,u)}))}i.initialized||(i.initialized=!0)}break}}),t}function fu(e,t){return ht(e,t)}function hu(e,t){return ht(e,t)}function Ce(e,t){return{id:e,type:"select",selected:t}}function qi(e){return{item:e,type:"add"}}function eo(e){return{id:e,type:"remove"}}function to(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);ie(o.selectable)&&!o.selectable&&(i=!1);const a=Te(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(Ce(o.id,!0)):o.selected&&!i&&n[a].push(Ce(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function gu(e,t,n,o){let i=!1;const a=du(e,t),l=p=>{const b=p??n.value??[];e.hooks.updateNodeInternals.trigger(b)},s=p=>{if(p)return e.nodes&&!n.value.length?e.nodes.find(b=>b.id===p):e.nodes[n.value.indexOf(p)]},c=p=>{if(p)return e.edges&&!o.value.length?e.edges.find(b=>b.id===p):e.edges[o.value.indexOf(p)]},u=(p,b,F)=>{const O=[];p.forEach(A=>{var P,te;const C={id:A.id,type:"position",dragging:F,from:A.from};if(b&&(C.position=A.position,A.parentNode)){const ne=s(A.parentNode);C.position={x:C.position.x-(((P=ne==null?void 0:ne.computedPosition)==null?void 0:P.x)??0),y:C.position.y-(((te=ne==null?void 0:ne.computedPosition)==null?void 0:te.y)??0)}}O.push(C)}),O!=null&&O.length&&e.hooks.nodesChange.trigger(O)},d=p=>{var A;if(!e.vueFlowRef)return;const b=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!b)return;let F;if((A=e.__experimentalFeatures)!=null&&A.nestedFlow){let C=[b],P=b,te;for(;!te&&P;)P=P.parentElement,te=P==null?void 0:P.classList.contains("vue-flow__transformationpane"),te&&(C=[P,...C]);C.forEach(ne=>{const le=window.getComputedStyle(ne),{m22:pe}=new window.DOMMatrixReadOnly(le.transform);F?F*=pe:F=pe})}else{const C=window.getComputedStyle(b),{m22:P}=new window.DOMMatrixReadOnly(C.transform);F=P}const O=p.reduce((C,P)=>{const te=s(P.id);if(te){const ne=mt(P.nodeElement);!!(ne.width&&ne.height&&(te.dimensions.width!==ne.width||te.dimensions.height!==ne.height||P.forceUpdate))&&(te.handleBounds.source=Fo(".source",P.nodeElement,F),te.handleBounds.target=Fo(".target",P.nodeElement,F),te.dimensions=ne,te.initialized=!0,C.push({id:te.id,type:"dimensions",dimensions:ne}))}return C},[]);e.fitViewOnInit&&!i&&(ue(()=>a.value.initialized).toBe(!0).then(()=>{a.value.fitView()}),i=!0),O.length&&e.hooks.nodesChange.trigger(O)},g=(p,b)=>{const F=p.map(C=>C.id);let O,A=[];if(e.multiSelectionActive)O=F.map(C=>Ce(C,b));else{const C=to([...e.nodes,...e.edges],F);O=C.changedNodes,A=C.changedEdges}O.length&&e.hooks.nodesChange.trigger(O),A.length&&e.hooks.edgesChange.trigger(A)},m=(p,b)=>{const F=p.map(C=>C.id);let O=[],A;if(e.multiSelectionActive)A=F.map(C=>Ce(C,b));else{const C=to([...e.nodes,...e.edges],F);O=C.changedNodes,A=C.changedEdges}O.length&&e.hooks.nodesChange.trigger(O),A.length&&e.hooks.edgesChange.trigger(A)},E=(p,b)=>{const F=p.filter(Ve).map(P=>P.id),O=p.filter(fe).map(P=>P.id);let{changedNodes:A,changedEdges:C}=to([...e.nodes,...e.edges],[...F,...O]);e.multiSelectionActive&&(A=F.map(P=>Ce(P,b)),C=O.map(P=>Ce(P,b))),A.length&&e.hooks.nodesChange.trigger(A),C.length&&e.hooks.edgesChange.trigger(C)},h=p=>{g(p,!0)},f=p=>{m(p,!0)},x=p=>{E(p,!0)},_=p=>{if(!p.length)return g(p,!1);const F=p.map(O=>O.id).map(O=>Ce(O,!1));F.length&&e.hooks.nodesChange.trigger(F)},N=p=>{if(!p.length)return m(p,!1);const F=p.map(O=>O.id).map(O=>Ce(O,!1));F.length&&e.hooks.edgesChange.trigger(F)},D=p=>{if(!p||!p.length)return E([],!1);const{changedNodes:b,changedEdges:F}=p.reduce((O,A)=>{const C=Ce(A.id,!1);return Ve(A)?O.changedNodes.push(C):O.changedEdges.push(C),O},{changedNodes:[],changedEdges:[]});b.length&&e.hooks.nodesChange.trigger(b),F.length&&e.hooks.edgesChange.trigger(F)},w=p=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([p,e.maxZoom]),e.minZoom=p},M=p=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,p]),e.maxZoom=p},R=p=>{var b;(b=e.d3Zoom)==null||b.translateExtent(p),e.translateExtent=p},y=p=>{e.nodeExtent=p,l(n.value)},L=p=>{e.nodesDraggable=p,e.nodesConnectable=p,e.elementsSelectable=p},B=p=>{const b=p instanceof Function?p(e.nodes):p;!e.initialized&&!b.length||(e.nodes=No(b,e.nodes,s,e.hooks.error.trigger))},k=p=>{const b=p instanceof Function?p(e.edges):p;if(!e.initialized&&!b.length)return;const F=e.isValidConnection?b.filter(O=>e.isValidConnection(O,{edges:e.edges,sourceNode:s(O.source),targetNode:s(O.target)})):b;e.edges=F.reduce((O,A)=>{const C=s(A.source),P=s(A.target),te=!C||typeof C>"u",ne=!P||typeof P>"u";if(te&&ne?e.hooks.error.trigger(new se(ae.EDGE_SOURCE_TARGET_MISSING,A.id,A.source,A.target)):(te&&e.hooks.error.trigger(new se(ae.EDGE_SOURCE_MISSING,A.id,A.source)),ne&&e.hooks.error.trigger(new se(ae.EDGE_TARGET_MISSING,A.id,A.target))),te||ne)return O;const le=c(A.id);return O.push({...gn(A,Object.assign({},le,e.defaultEdgeOptions)),sourceNode:C,targetNode:P}),O},[])},V=p=>{const b=p instanceof Function?p([...e.nodes,...e.edges]):p;!e.initialized&&!b.length||(B(b.filter(Ve)),k(b.filter(fe)))},Q=p=>{const b=p instanceof Function?p(e.nodes):p,O=No(b,e.nodes,s,e.hooks.error.trigger).map(qi);O.length&&e.hooks.nodesChange.trigger(O)},ee=p=>{const b=p instanceof Function?p(e.edges):p,O=(e.isValidConnection?b.filter(A=>e.isValidConnection(A,{edges:e.edges,sourceNode:s(A.source),targetNode:s(A.target)})):b).reduce((A,C)=>{const P=zr({...C,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(P){const te=s(P.source),ne=s(P.target),le=!te||typeof te>"u",pe=!ne||typeof ne>"u";if(le&&pe?e.hooks.error.trigger(new se(ae.EDGE_SOURCE_TARGET_MISSING,P.id,P.source,P.target)):(le&&e.hooks.error.trigger(new se(ae.EDGE_SOURCE_MISSING,P.id,P.source)),pe&&e.hooks.error.trigger(new se(ae.EDGE_TARGET_MISSING,P.id,P.target))),le||pe)return A;A.push(qi({...P,sourceNode:te,targetNode:ne}))}return A},[]);O.length&&e.hooks.edgesChange.trigger(O)},v=(p,b=!0)=>{const F=p instanceof Function?p(e.nodes):p,O=[],A=[];F.forEach(C=>{const P=typeof C=="string"?s(C):C;if(!(ie(P.deletable)&&!P.deletable)&&(O.push(eo(P.id)),b)){const te=qe([P],e.edges).filter(ne=>ie(ne.deletable)?ne.deletable:!0);A.push(...te.map(ne=>eo(ne.id)))}}),A.length&&e.hooks.edgesChange.trigger(A),O.length&&e.hooks.nodesChange.trigger(O)},z=p=>{const b=p instanceof Function?p(e.edges):p,F=[];b.forEach(O=>{const A=typeof O=="string"?c(O):O;ie(A.deletable)&&!A.deletable||F.push(eo(typeof O=="string"?O:O.id))}),e.hooks.edgesChange.trigger(F)},S=(p,b,F=!0)=>Ar(p,b,e.edges,c,F,e.hooks.error.trigger),H=p=>ht(p,e.nodes),X=p=>ht(p,e.edges),W=(p,b,F,O=!1)=>{O?e.connectionClickStartHandle=p:e.connectionStartHandle=p,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},T=(p,b=null,F=null)=>{e.connectionStartHandle&&(e.connectionPosition=p,e.connectionEndHandle=b,e.connectionStatus=F)},Z=(p,b)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},I=p=>{const b=$r(p),F=b?null:s(p.id);return!b&&!F?[null,null,b]:[b?p:vo(F),F,b]},J=(p,b=!0,F)=>{const[O,A,C]=I(p);return O?(F||e.nodes).filter(P=>{if(!C&&(P.id===A.id||!P.computedPosition))return!1;const te=vo(P),ne=fn(te,O);return b&&ne>0||ne>=Number(p.width)*Number(p.height)}):[]},U=(p,b,F=!0)=>{const[O]=I(p);if(!O)return!1;const A=fn(O,b);return F&&A>0||A>=Number(p.width)*Number(p.height)},q=(p,b)=>{const{viewport:F,dimensions:O,d3Zoom:A,d3Selection:C,translateExtent:P}=e;if(!A||!C||!p.x&&!p.y)return;const te=Ue.translate(F.x+p.x,F.y+p.y).scale(F.zoom),ne=[[0,0],[O.width,O.height]],le=A.constrain()(te,ne,P);b==null||b(le),A.transform(C,le)},$=p=>{const b=p instanceof Function?p(e):p,F=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"];ie(b.defaultEdgeOptions)&&(e.defaultEdgeOptions=b.defaultEdgeOptions);const O=b.modelValue||b.nodes||b.edges?[]:void 0;O&&(b.modelValue&&O.push(...b.modelValue),b.nodes&&O.push(...b.nodes),b.edges&&O.push(...b.edges),V(O));const A=()=>{ie(b.maxZoom)&&M(b.maxZoom),ie(b.minZoom)&&w(b.minZoom),ie(b.translateExtent)&&R(b.translateExtent),ie(b.nodeExtent)&&y(b.nodeExtent)};Object.keys(b).forEach(C=>{const P=b[C];!F.includes(C)&&ie(P)&&(e[C]=P)}),e.d3Zoom?A():ue(()=>e.d3Zoom).not.toBeUndefined().then(A),e.initialized||(e.initialized=!0)};return{updateNodePositions:u,updateNodeDimensions:d,setElements:V,setNodes:B,setEdges:k,addNodes:Q,addEdges:ee,removeNodes:v,removeEdges:z,findNode:s,findEdge:c,updateEdge:S,applyEdgeChanges:X,applyNodeChanges:H,addSelectedElements:x,addSelectedNodes:h,addSelectedEdges:f,setMinZoom:w,setMaxZoom:M,setTranslateExtent:R,setNodeExtent:y,removeSelectedElements:D,removeSelectedNodes:_,removeSelectedEdges:N,startConnection:W,updateConnection:T,endConnection:Z,setInteractive:L,setState:$,getIntersectingNodes:J,isNodeIntersecting:U,panBy:q,fitView:async(p={padding:.1})=>{await ue(()=>a.value.initialized).toBe(!0),a.value.fitView(p)},zoomIn:async p=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomIn(p)},zoomOut:async p=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomOut(p)},zoomTo:async(p,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomTo(p,b)},setTransform:async(p,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.setTransform(p,b)},getTransform:()=>a.value.getTransform(),setCenter:async(p,b,F)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.setCenter(p,b,F)},fitBounds:async(p,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.fitBounds(p,b)},project:p=>a.value.project(p),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(p=>{const{computedPosition:b,handleBounds:F,selected:O,dimensions:A,isParent:C,resizing:P,dragging:te,initialized:ne,...le}=p;return le}),edges:e.edges.map(p=>{const{selected:b,sourceNode:F,targetNode:O,...A}=p;return A}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{e.edges=[],e.nodes=[],$(_i())},$destroy:()=>{}}}class ze{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return ze.instance||(ze.instance=new ze),ze.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=_i(n),i=r.reactive(o),a=r.computed(()=>i.nodes.map(m=>m.id)),l=r.computed(()=>i.edges.map(m=>m.id)),s=ws(i,a,l),c=gu(i,s,a,l),u={};Object.entries(i.hooks).forEach(([m,E])=>{const h=`on${m.charAt(0).toUpperCase()+m.slice(1)}`;u[h]=E.on});const d={};Object.entries(i.hooks).forEach(([m,E])=>{d[m]=E.trigger}),c.setState(i);const g={...u,...s,...c,...r.toRefs(i),emits:d,id:t,vueFlowVersion:"1.19.2",$destroy:()=>{this.remove(t)}};return this.set(t,g),g}getId(){return`vue-flow-${this.currentId++}`}}const re=e=>{const t=ze.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const s=r.inject(vn,null);typeof s<"u"&&s!==null&&(a=s)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const s=o??t.getId();a=t.create(s,e),n&&(l=!0)}else e&&a.setState(e);return n&&(r.provide(vn,a),n.vueFlowId=a.id,l&&Ze(()=>{if(a){const s=t.get(a.id);s?s.$destroy():We(`No store instance found for id ${a.id} in storage.`)}})),a};function mu(e,t,n){const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let h,f,x=!!(n.nodes.value.length||n.edges.value.length);h=Ae([e.modelValue,()=>{var _,N;return(N=(_=e.modelValue)==null?void 0:_.value)==null?void 0:N.length}],([_])=>{_&&Array.isArray(_)&&(f==null||f.pause(),n.setElements(_),!f&&!x&&_.length?x=!0:f==null||f.resume())}),f=Ae([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([_,N])=>{var D;(D=e.modelValue)!=null&&D.value&&Array.isArray(e.modelValue.value)&&(h==null||h.pause(),e.modelValue.value=[..._,...N],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,x=!!n.nodes.value.length;h=Ae([e.nodes,()=>{var _,N;return(N=(_=e.nodes)==null?void 0:_.value)==null?void 0:N.length}],([_])=>{_&&Array.isArray(_)&&(f==null||f.pause(),n.setNodes(_),!f&&!x&&_.length?x=!0:f==null||f.resume())}),f=Ae([n.nodes,()=>n.nodes.value.length],([_])=>{var N;(N=e.nodes)!=null&&N.value&&Array.isArray(e.nodes.value)&&(h==null||h.pause(),e.nodes.value=[..._],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,x=!!n.edges.value.length;h=Ae([e.edges,()=>{var _,N;return(N=(_=e.edges)==null?void 0:_.value)==null?void 0:N.length}],([_])=>{_&&Array.isArray(_)&&(f==null||f.pause(),n.setEdges(_),!f&&!x&&_.length?x=!0:f==null||f.resume())}),f=Ae([n.edges,()=>n.edges.value.length],([_])=>{var N;(N=e.edges)!=null&&N.value&&Array.isArray(e.edges.value)&&(h==null||h.pause(),e.edges.value=[..._],r.nextTick(()=>{h==null||h.resume()}))},{immediate:x}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&ie(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&ie(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&ie(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&ie(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{ie(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(h,f,x)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),x(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const h=async f=>{let x=f;_e(t.autoConnect)&&(x=await t.autoConnect(f)),x!==!1&&n.addEdges([x])};r.watch(()=>t.autoConnect,()=>{ie(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(f,x,_)=>{f?n.onConnect(h):n.hooks.value.connect.off(h),_(()=>{n.hooks.value.connect.off(h)})},{immediate:!0})})},()=>{const h=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(f=>{if(!h.includes(f)){const x=r.toRef(t,f),_=n[f];o.run(()=>{r.watch(x,N=>{ie(N)&&(_.value=N)},{flush:"pre"})})}})}].forEach(h=>h())}),()=>o.stop()}function ji(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const pu={name:"Pane",compatConfig:{MODE:3}},yu=r.defineComponent({...pu,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:l,userSelectionActive:s,removeSelectedElements:c,panOnDrag:u,userSelectionRect:d,elementsSelectable:g,nodesSelectionActive:m,addSelectedElements:E,getSelectedEdges:h,getSelectedNodes:f,removeNodes:x,removeEdges:_,selectionMode:N,deleteKeyCode:D,multiSelectionKeyCode:w,multiSelectionActive:M}=re(),R=r.ref(null),y=r.ref(0),L=r.ref(0),B=r.ref(),k=r.computed(()=>g.value&&(e.isSelecting||s.value));nt(D,T=>{if(!T)return;const Z=o.value.reduce((I,J)=>((!J.selected&&J.parentNode&&I.find(U=>U.id===J.parentNode)||J.selected)&&I.push(J),I),[]);(Z||h.value)&&(h.value.length>0&&_(h.value),Z.length>0&&x(Z),m.value=!1,c())}),nt(w,T=>{M.value=T});function V(){s.value=!1,d.value=null,y.value=0,L.value=0}function Q(T){T.target!==R.value||k.value||(l.paneClick(T),c(),m.value=!1)}function ee(T){var Z;if(T.target===R.value){if(Array.isArray(u.value)&&((Z=u.value)!=null&&Z.includes(2))){T.preventDefault();return}l.paneContextMenu(T)}}function v(T){T.target===R.value&&l.paneScroll(T)}function z(T){if(B.value=n.value.getBoundingClientRect(),!k.value||!g||!e.isSelecting||T.button!==0||T.target!==R.value||!B.value)return;const{x:Z,y:I}=ji(T,B.value);c(),d.value={width:0,height:0,startX:Z,startY:I,x:Z,y:I},s.value=!0,l.selectionStart(T)}function S(T){if(!e.isSelecting||!B.value||!d.value)return;if(!k.value)return l.paneMouseMove(T);s.value||(s.value=!0),m.value&&(m.value=!1);const Z=ji(T,B.value),I=d.value.startX??0,J=d.value.startY??0,U={...d.value,x:Z.x<I?Z.x:I,y:Z.y<J?Z.y:J,width:Math.abs(Z.x-I),height:Math.abs(Z.y-J)},q=yn(o.value,d.value,a.value,N.value===_t.Partial),$=qe(q,i.value);y.value=q.length,L.value=$.length,d.value=U,E([...q,...$])}function H(T){k.value&&T.button===0&&(!s.value&&d.value&&T.target===R.value&&Q(T),m.value=y.value>0,V(),l.selectionEnd(T))}function X(T){var Z;if(!k.value)return l.paneMouseLeave(T);s.value&&(m.value=y.value>0,(Z=l.selectionEnd)==null||Z.call(l,T)),V()}function W(T){k.value||l.paneMouseEnter(T)}return(T,Z)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:R,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:Q,onContextmenu:ee,onWheelPassive:v,onMouseenter:W,onMousedown:z,onMousemove:S,onMouseup:H,onMouseleave:X},[r.renderSlot(T.$slots,"default"),r.unref(s)&&r.unref(d)?(r.openBlock(),r.createBlock(ys,{key:0})):r.createCommentVNode("",!0),r.unref(m)&&r.unref(f).length?(r.openBlock(),r.createBlock(ms,{key:1})):r.createCommentVNode("",!0)],34))}}),vu={class:"vue-flow__nodes vue-flow__container"},wu={name:"Nodes",compatConfig:{MODE:3}},_u=r.defineComponent({...wu,setup(e){const t=r.inject(Et),n=re(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesFocusable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"nodesConnectable"),s=r.toRef(n,"getNodes"),c=r.toRef(n,"getNodesInitialized"),u=r.toRef(n,"getNodeTypes"),d=r.toRef(n,"updateNodeDimensions"),g=r.toRef(n,"emits");let m=r.ref();ue(()=>s.value.length>0&&c.value.length===s.value.length).toBe(!0).then(()=>{r.nextTick(()=>{g.value.nodesInitialized(c.value)})}),r.onMounted(()=>{m.value=new ResizeObserver(N=>{const D=N.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));d.value(D)})}),r.onBeforeUnmount(()=>{var N;return(N=m.value)==null?void 0:N.disconnect()});function E(N){return typeof N>"u"?o.value:N}function h(N){return typeof N>"u"?a.value:N}function f(N){return typeof N>"u"?l.value:N}function x(N){return typeof N>"u"?i.value:N}function _(N,D){const w=N||"default";let M=D??u.value[w];const R=r.getCurrentInstance();if(typeof M=="string"&&R){const L=Object.keys(R.appContext.components);L&&L.includes(w)&&(M=r.resolveComponent(w,!1))}if(typeof M!="string")return M;const y=t==null?void 0:t[`node-${w}`];return y||(g.value.error(new se(ae.NODE_TYPE_MISSING,M)),!1)}return(N,D)=>(r.openBlock(),r.createElementBlock("div",vu,[r.unref(m)?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(r.unref(s),w=>(r.openBlock(),r.createBlock(r.unref(Zl),{id:w.id,key:w.id,"resize-observer":r.unref(m),type:_(w.type,w.template),name:w.type||"default",draggable:E(w.draggable),selectable:h(w.selectable),connectable:f(w.connectable),focusable:x(w.focusable),node:w},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),xu=["id","markerWidth","markerHeight","markerUnits","orient"],Eu=["stroke","stroke-width","fill"],bu=["stroke","stroke-width"],Su={name:"MarkerType",compatConfig:{MODE:3}},Nu=r.defineComponent({...Su,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===r.unref(xt).ArrowClosed?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Eu)):r.createCommentVNode("",!0),e.type===r.unref(xt).Arrow?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,bu)):r.createCommentVNode("",!0)],8,xu))}}),Cu={name:"MarkerDefinitions",compatConfig:{MODE:3}},ku=r.defineComponent({...Cu,setup(e){const t=re(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"connectionLineOptions"),a=r.toRef(t,"defaultMarkerColor"),l=r.computed(()=>{const s=[],c=[],u=d=>{if(d){const g=ke(d,n.value);s.includes(g)||(typeof d=="object"?c.push({...d,id:g,color:d.color||a.value}):c.push({id:g,color:a.value,type:d}),s.push(g))}};return[i.value.markerEnd,i.value.markerStart].forEach(u),o.value.reduce((d,g)=>([g.markerStart,g.markerEnd].forEach(u),d.sort((m,E)=>m.id.localeCompare(E.id))),c),c});return(s,c)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(l),u=>(r.openBlock(),r.createBlock(Nu,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Mu={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},$u={name:"Edges",compatConfig:{MODE:3}},Ru=r.defineComponent({...$u,setup(e){const t=r.inject(Et),n=re(),o=r.toRef(n,"connectionStartHandle"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"edgesUpdatable"),l=r.toRef(n,"edgesFocusable"),s=r.toRef(n,"elementsSelectable"),c=r.toRef(n,"getSelectedNodes"),u=r.toRef(n,"findNode"),d=r.toRef(n,"getEdges"),g=r.toRef(n,"getNodesInitialized"),m=r.toRef(n,"getEdgeTypes"),E=r.toRef(n,"elevateEdgesOnSelect"),h=r.toRef(n,"dimensions"),f=r.toRef(n,"emits"),x=on(()=>{var y;return(y=o.value)==null?void 0:y.nodeId},()=>{var y;return(y=o.value)!=null&&y.nodeId?u.value(o.value.nodeId):!1}),_=on(()=>{var y;return(y=o.value)==null?void 0:y.nodeId},()=>{var y,L;return!!(x.value&&(typeof x.value.connectable>"u"?i.value:x.value.connectable)&&((y=o.value)!=null&&y.nodeId)&&((L=o.value)!=null&&L.type))}),N=on([()=>d.value.map(y=>y.zIndex),()=>E.value?[c.value.length]:[0],()=>E.value?g.value.map(y=>y.computedPosition.z):[]],()=>Fr(d.value,u.value,E.value));function D(y){return typeof y>"u"?s.value:y}function w(y){return typeof y>"u"?a.value:y}function M(y){return typeof y>"u"?l.value:y}function R(y,L){const B=y||"default";let k=L??m.value[B];const V=r.getCurrentInstance();if(typeof k=="string"&&V){const ee=Object.keys(V.appContext.components);ee&&ee.includes(B)&&(k=r.resolveComponent(B,!1))}if(k&&typeof k!="string")return k;const Q=t==null?void 0:t[`edge-${B}`];return Q||(f.value.error(new se(ae.EDGE_TYPE_MISSING,k)),!1)}return(y,L)=>r.unref(h).width&&r.unref(h).height?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(N),B=>(r.openBlock(),r.createElementBlock("svg",{key:B.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${B.level}`)},[B.isMaxLevel?(r.openBlock(),r.createBlock(ku,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(B.edges,k=>(r.openBlock(),r.createBlock(r.unref(rs),{id:k.id,key:k.id,edge:k,type:R(k.type,k.template),name:k.type||"default",selectable:D(k.selectable),updatable:w(k.updatable),focusable:M(k.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"]))),128))])],4))),128)),r.unref(_)&&r.unref(x)?(r.openBlock(),r.createElementBlock("svg",Mu,[r.createVNode(fs,{"source-node":r.unref(x)},null,8,["source-node"])])):r.createCommentVNode("",!0)],64)):r.createCommentVNode("",!0)}}),Ou=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Tu={name:"Transform",compatConfig:{MODE:3}},Bu=r.defineComponent({...Tu,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}=re(),c=r.ref(!nn);return ue(()=>i.value&&a.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}),setTimeout(()=>{c.value=!0},0)}),(u,d)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:r.unref(c)?void 0:0})},[r.createVNode(Ru),Ou,r.createVNode(_u),r.renderSlot(u.$slots,"default")],4))}}),Iu={name:"Viewport",compatConfig:{MODE:3}},Pu=r.defineComponent({...Iu,setup(e){const t=re(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultViewport"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"dimensions"),c=r.toRef(t,"zoomActivationKeyCode"),u=r.toRef(t,"selectionKeyCode"),d=r.toRef(t,"panActivationKeyCode"),g=r.toRef(t,"panOnScroll"),m=r.toRef(t,"panOnScrollMode"),E=r.toRef(t,"panOnScrollSpeed"),h=r.toRef(t,"panOnDrag"),f=r.toRef(t,"zoomOnDoubleClick"),x=r.toRef(t,"zoomOnPinch"),_=r.toRef(t,"zoomOnScroll"),N=r.toRef(t,"preventScrolling"),D=r.toRef(t,"noWheelClassName"),w=r.toRef(t,"noPanClassName"),M=r.toRef(t,"setState"),R=r.toRef(t,"emits"),y=r.toRef(t,"connectionStartHandle"),L=r.toRef(t,"userSelectionActive"),B=r.toRef(t,"paneDragging"),k=r.ref();let V=r.ref(!1),Q=r.ref(!1),ee=r.ref(!1),v=r.ref(0);const z=nt(d.value),S=r.computed(()=>!V.value&&h.value&&z.value),H=r.computed(()=>u.value!==!0&&V.value||u.value===!0&&S.value!==!0);let X=r.ref({x:0,y:0,zoom:0});r.onMounted(()=>{xr(k,I);const U=dn();ln(U,"resize",I)}),r.onMounted(()=>{const U=k.value,q=U.getBoundingClientRect(),$=cu().scaleExtent([o.value,i.value]).translateExtent(l.value),G=he(U).call($),p=G.on("wheel.zoom"),b=Ue.translate(a.value.x??0,a.value.y??0).scale(Oe(a.value.zoom??1,o.value,i.value)),F=[[0,0],[q.width,q.height]],O=$.constrain()(b,F,l.value);$.transform(G,O),M.value({d3Zoom:$,d3Selection:G,d3ZoomHandler:p,viewport:{x:O.x,y:O.y,zoom:O.k},viewportRef:U}),nt(u.value,C=>{V.value=C});const A=nt(c.value);r.watchEffect(()=>{V.value&&L.value&&!Q.value?$.on("zoom",null):!V.value&&!L.value&&$.on("zoom",C=>{M.value({viewport:{x:C.transform.x,y:C.transform.y,zoom:C.transform.k}});const P=Z(C.transform);ee.value=W(h.value,v.value??0),R.value.viewportChange(P),R.value.move({event:C,flowTransform:P})})}),$.on("start",C=>{var te;if(!C.sourceEvent)return null;v.value=C.sourceEvent.button,Q.value=!0;const P=Z(C.transform);((te=C.sourceEvent)==null?void 0:te.type)==="mousedown"&&M.value({paneDragging:!0}),X.value=P,R.value.viewportChangeStart(P),R.value.moveStart({event:C,flowTransform:P})}),$.on("end",C=>{if(!C.sourceEvent)return null;if(Q.value=!1,M.value({paneDragging:!1}),W(h.value,v.value??0)&&!ee.value&&R.value.paneContextMenu(C.sourceEvent),ee.value=!1,T(X.value,C.transform)){const P=Z(C.transform);X.value=P,R.value.viewportChangeEnd(P),R.value.moveEnd({event:C,flowTransform:P})}}),r.watchEffect(()=>{g.value&&!A.value&&!L.value?G.on("wheel.zoom",C=>{if(J(C,D.value))return!1;C.preventDefault(),C.stopImmediatePropagation();const P=G.property("__zoom").k||1;if(C.ctrlKey&&x.value){const pe=ye(C),Zu=-C.deltaY*(C.deltaMode===1?.05:C.deltaMode?1:.002)*10,Ku=P*2**Zu;$.scaleTo(G,Ku,pe);return}const te=C.deltaMode===1?20:1,ne=m.value===Qe.Vertical?0:C.deltaX*te,le=m.value===Qe.Horizontal?0:C.deltaY*te;$.translateBy(G,-(ne/P)*E.value,-(le/P)*E.value)},{passive:!1}):typeof p<"u"&&G.on("wheel.zoom",function(C,P){if(!N.value||J(C,D.value))return null;C.preventDefault(),p.call(this,C,P)},{passive:!1})}),$.filter(C=>{var le,pe;const P=A.value||_.value,te=x.value&&C.ctrlKey;if(C.button===1&&C.type==="mousedown"&&((le=C.target)!=null&&le.closest(".vue-flow__node")||(pe=C.target)!=null&&pe.closest(".vue-flow__edge")))return!0;if(!h.value&&!P&&!g.value&&!f.value&&!x.value||L.value||!f.value&&C.type==="dblclick"||J(C,D.value)&&C.type==="wheel"||J(C,w.value)&&C.type!=="wheel"||!x.value&&C.ctrlKey&&C.type==="wheel"||!P&&!g.value&&!te&&C.type==="wheel"||!h.value&&(C.type==="mousedown"||C.type==="touchstart")||Array.isArray(h.value)&&!h.value.includes(C.button)&&(C.type==="mousedown"||C.type==="touchstart"))return!1;const ne=Array.isArray(h.value)&&h.value.includes(C.button)||!C.button||C.button<=1;return(!C.ctrlKey||C.type==="wheel")&&ne})});function W(U,q){return q===2&&Array.isArray(U)&&U.includes(2)}function T(U,q){return U.x!==q.x&&!isNaN(q.x)||U.y!==q.y&&!isNaN(q.y)||U.zoom!==q.k&&!isNaN(q.k)}function Z(U){return{x:U.x,y:U.y,zoom:U.k}}function I(){if(!k.value)return;const{width:U,height:q}=mt(k.value);(U===0||q===0)&&R.value.error(new se(ae.MISSING_VIEWPORT_DIMENSIONS)),s.value.width=U||500,s.value.height=q||500}function J(U,q){return U.target.closest(`.${q}`)}return(U,q)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:k,key:`viewport-${r.unref(n)}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(yu,{"is-selecting":r.unref(H),class:r.normalizeClass({connecting:!!r.unref(y),dragging:r.unref(B),draggable:!!r.unref(h)})},{default:r.withCtx(()=>[r.createVNode(Bu,null,{default:r.withCtx(()=>[r.renderSlot(U.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),r.renderSlot(U.$slots,"default")],64))}}),Du=["id"],zu=["id"],Au=["id"],Vu={name:"A11yDescriptions",compatConfig:{MODE:3}},Hu=r.defineComponent({...Vu,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=re(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,l)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(ri)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Du),r.createElementVNode("div",{id:`${r.unref(ai)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,zu),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Yl)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},r.toDisplayString(r.unref(o)),9,Au))],64))}}),Fu={name:"VueFlow",compatConfig:{MODE:3}},Lu=r.defineComponent({...Fu,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=Ke(o,"modelValue",n),a=Ke(o,"nodes",n),l=Ke(o,"edges",n),{vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...g}=re(o),m=mu({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...g});Mr(n,c);const E=r.ref();return r.provide(Et,r.useSlots()),r.onUnmounted(()=>{m()}),r.onMounted(()=>{s.value=E.value}),t({vueFlowRef:s,hooks:c,getNodeTypes:u,getEdgeTypes:d,...g}),(h,f)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:E,class:"vue-flow"},[r.createVNode(Pu,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(u)),x=>r.renderSlot(h.$slots,`node-${x}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),x=>r.renderSlot(h.$slots,`edge-${x}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(h.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(h.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Hu)],512))}}),Gu={name:"Panel",compatConfig:{MODE:3}},Yu=r.defineComponent({...Gu,props:{position:null},setup(e){const t=e,{userSelectionActive:n}=re(),o=r.computed(()=>`${t.position}`.split("-"));return(i,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__panel",r.unref(o)]),style:r.normalizeStyle({pointerEvents:r.unref(n)?"none":"all"})},[r.renderSlot(i.$slots,"default")],6))}}),no=.1,Xu=e=>{const t=re({id:e}),n=r.toRef(t,"nodes"),o=r.toRef(t,"d3Zoom"),i=r.toRef(t,"d3Selection"),a=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"minZoom"),c=r.toRef(t,"maxZoom"),u=r.toRef(t,"viewport"),d=r.toRef(t,"snapToGrid"),g=r.toRef(t,"snapGrid"),m=r.toRef(t,"getNodes");return{zoomIn:f=>{E(1.2,f==null?void 0:f.duration)},zoomOut:f=>{E(1/1.2,f==null?void 0:f.duration)},zoomTo:(f,x)=>{i.value&&o.value&&o.value.scaleTo(oo(i.value,x==null?void 0:x.duration),f)},setTransform:(f,x)=>{h(f.x,f.y,f.zoom,x==null?void 0:x.duration)},getTransform:()=>({x:u.value.x,y:u.value.y,zoom:u.value.zoom}),fitView:(f={padding:no,includeHiddenNodes:!1,duration:0})=>{if(!n.value.length)return;const x=(f.includeHiddenNodes?n.value:m.value).filter(M=>{var L;const R=M.initialized&&M.dimensions.width&&M.dimensions.height;let y=!0;return(L=f.nodes)!=null&&L.length&&(y=f.nodes.includes(M.id)),R&&y}),_=wt(x),{x:N,y:D,zoom:w}=je(_,a.value.width,a.value.height,f.minZoom??s.value,f.maxZoom??c.value,f.padding??no,f.offset);h(N,D,w,f==null?void 0:f.duration)},setCenter:(f,x,_)=>{const N=typeof(_==null?void 0:_.zoom)<"u"?_.zoom:c.value,D=a.value.width/2-f*N,w=a.value.height/2-x*N;h(D,w,N,_==null?void 0:_.duration)},fitBounds:(f,x={padding:no})=>{const{x:_,y:N,zoom:D}=je(f,a.value.width,a.value.height,s.value,c.value,x.padding);h(_,N,D,x==null?void 0:x.duration)},project:f=>yt(f,u.value,d.value,g.value)};function E(f,x){i.value&&o.value&&o.value.scaleBy(oo(i.value,x),f)}function h(f,x,_,N){const{x:D,y:w}=hn({x:-f,y:-x},l.value),M=Ue.translate(-D,-w).scale(_);i.value&&o.value&&o.value.transform(oo(i.value,N),M)}};function oo(e,t=0){return e.transition().duration(t)}function Uu(e){const t=e??r.inject(Mo,""),n=r.inject($o,null),{findEdge:o,emits:i}=re(),a=o(t);return a||i.error(new se(ae.EDGE_NOT_FOUND,t)),{id:t,edge:a,edgeEl:n}}return K.BaseEdge=ot,K.BezierEdge=ui,K.ConnectionLineType=Me,K.ConnectionMode=$e,K.EdgeLabelRenderer=ss,K.EdgeText=si,K.ErrorCode=ae,K.GlobalVueFlowStorage=ze,K.Handle=Je,K.MarkerType=xt,K.NodeIdInjection=wn,K.PanOnScrollMode=Qe,K.Panel=Yu,K.PanelPosition=Co,K.Position=j,K.SelectionMode=_t,K.SimpleBezierEdge=fi,K.SmoothStepEdge=Pn,K.StepEdge=mi,K.StraightEdge=pi,K.VueFlow=Lu,K.VueFlowError=se,K.VueFlowInjection=vn,K.addEdge=Br,K.applyChanges=ht,K.applyEdgeChanges=fu,K.applyNodeChanges=hu,K.clamp=Oe,K.connectionExists=mn,K.defaultEdgeTypes=wi,K.defaultNodeTypes=vi,K.getBezierEdgeCenter=Bn,K.getBezierPath=Pt,K.getBoundsofRects=Pr,K.getConnectedEdges=qe,K.getIncomers=Tr,K.getMarkerId=ke,K.getNodesInside=yn,K.getOutgoers=Or,K.getRectOfNodes=wt,K.getSimpleBezierPath=In,K.getSimpleEdgeCenter=Tn,K.getSmoothStepPath=At,K.getStraightPath=Dn,K.getTransformForBounds=je,K.graphPosToZoomedPos=pn,K.isEdge=fe,K.isGraphEdge=_o,K.isGraphNode=Te,K.isNode=Ve,K.pointToRendererPoint=yt,K.rendererPointToPoint=pn,K.updateEdge=Ir,K.useEdge=Uu,K.useGetPointerPosition=Ho,K.useHandle=En,K.useNode=Ro,K.useVueFlow=re,K.useZoomPanHelper=Xu,Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),K}({},Vue);
