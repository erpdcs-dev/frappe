"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const r=require("vue");var oo;const Tn=typeof window<"u",Ji=e=>typeof e<"u",er=e=>typeof e=="boolean",Se=e=>typeof e=="function",_e=e=>typeof e=="number",Ee=e=>typeof e=="string",tr=()=>{};Tn&&((oo=window==null?void 0:window.navigator)!=null&&oo.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ne(e){return typeof e=="function"?e():r.unref(e)}function nr(e,t){function n(...o){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(i).catch(a)})}return n}const Zo=e=>e();function or(e=Zo){const t=r.ref(!0);function n(){t.value=!1}function o(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:r.readonly(t),pause:n,resume:o,eventFilter:i}}function io(e,t=!1,n="Timeout"){return new Promise((o,i)=>{setTimeout(t?()=>i(n):o,e)})}function ir(e){return e}function tn(e,t){let n,o,i;const a=r.ref(!0),l=()=>{a.value=!0,i()};r.watch(e,l,{flush:"sync"});const s=Se(t)?t:t.get,u=Se(t)?void 0:t.set,c=r.customRef((d,g)=>(o=d,i=g,{get(){return a.value&&(n=s(),a.value=!1),o(),n},set(v){u==null||u(v)}}));return Object.isExtensible(c)&&(c.trigger=l),c}function st(e){return r.getCurrentScope()?(r.onScopeDispose(e),!0):!1}function rr(e,t=!0){r.getCurrentInstance()?r.onMounted(e):t?e():r.nextTick(e)}function pn(e,t=!1){function n(g,{flush:v="sync",deep:E=!1,timeout:h,throwOnTimeout:f}={}){let _=null;const N=[new Promise(D=>{_=r.watch(e,x=>{g(x)!==t&&(_==null||_(),D(x))},{flush:v,deep:E,immediate:!0})})];return h!=null&&N.push(io(h,f).then(()=>ne(e)).finally(()=>_==null?void 0:_())),Promise.race(N)}function o(g,v){if(!r.isRef(g))return n(x=>x===g,v);const{flush:E="sync",deep:h=!1,timeout:f,throwOnTimeout:_}=v??{};let w=null;const D=[new Promise(x=>{w=r.watch([e,g],([M,O])=>{t!==(M===O)&&(w==null||w(),x(M))},{flush:E,deep:h,immediate:!0})})];return f!=null&&D.push(io(f,_).then(()=>ne(e)).finally(()=>(w==null||w(),ne(e)))),Promise.race(D)}function i(g){return n(v=>Boolean(v),g)}function a(g){return o(null,g)}function l(g){return o(void 0,g)}function s(g){return n(Number.isNaN,g)}function u(g,v){return n(E=>{const h=Array.from(E);return h.includes(g)||h.includes(ne(g))},v)}function c(g){return d(1,g)}function d(g=1,v){let E=-1;return n(()=>(E+=1,E>=g),v)}return Array.isArray(ne(e))?{toMatch:n,toContains:u,changed:c,changedTimes:d,get not(){return pn(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:i,toBeNull:a,toBeNaN:s,toBeUndefined:l,changed:c,changedTimes:d,get not(){return pn(e,!t)}}}function ue(e){return pn(e)}var ro=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,sr=(e,t)=>{var n={};for(var o in e)ar.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&ro)for(var o of ro(e))t.indexOf(o)<0&&lr.call(e,o)&&(n[o]=e[o]);return n};function ur(e,t,n={}){const o=n,{eventFilter:i=Zo}=o,a=sr(o,["eventFilter"]);return r.watch(e,nr(i,t),a)}var cr=Object.defineProperty,dr=Object.defineProperties,fr=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,Ko=Object.prototype.hasOwnProperty,Wo=Object.prototype.propertyIsEnumerable,ao=(e,t,n)=>t in e?cr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hr=(e,t)=>{for(var n in t||(t={}))Ko.call(t,n)&&ao(e,n,t[n]);if(St)for(var n of St(t))Wo.call(t,n)&&ao(e,n,t[n]);return e},gr=(e,t)=>dr(e,fr(t)),vr=(e,t)=>{var n={};for(var o in e)Ko.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&St)for(var o of St(e))t.indexOf(o)<0&&Wo.call(e,o)&&(n[o]=e[o]);return n};function ze(e,t,n={}){const o=n,{eventFilter:i}=o,a=vr(o,["eventFilter"]),{eventFilter:l,pause:s,resume:u,isActive:c}=or(i);return{stop:ur(e,t,gr(hr({},a),{eventFilter:l})),pause:s,resume:u,isActive:c}}function qo(e){var t;const n=ne(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Bn=Tn?window:void 0;function In(...e){let t,n,o,i;if(Ee(e[0])||Array.isArray(e[0])?([n,o,i]=e,t=Bn):[t,n,o,i]=e,!t)return tr;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const a=[],l=()=>{a.forEach(d=>d()),a.length=0},s=(d,g,v,E)=>(d.addEventListener(g,v,E),()=>d.removeEventListener(g,v,E)),u=r.watch(()=>[qo(t),ne(i)],([d,g])=>{l(),d&&a.push(...n.flatMap(v=>o.map(E=>s(d,v,E,g))))},{immediate:!0,flush:"post"}),c=()=>{u(),l()};return st(c),c}const mr=e=>typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0;function lo(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Bn,eventName:a="keydown",passive:l=!1}=o,s=mr(t);return In(i,a,c=>{s(c)&&n(c)},l)}function pr(e,t=!1){const n=r.ref(),o=()=>n.value=Boolean(e());return o(),rr(o,t),n}function yr(e){return JSON.parse(JSON.stringify(e))}const yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn="__vueuse_ssr_handlers__";yn[xn]=yn[xn]||{};yn[xn];var so=Object.getOwnPropertySymbols,xr=Object.prototype.hasOwnProperty,wr=Object.prototype.propertyIsEnumerable,_r=(e,t)=>{var n={};for(var o in e)xr.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&so)for(var o of so(e))t.indexOf(o)<0&&wr.call(e,o)&&(n[o]=e[o]);return n};function Er(e,t,n={}){const o=n,{window:i=Bn}=o,a=_r(o,["window"]);let l;const s=pr(()=>i&&"ResizeObserver"in i),u=()=>{l&&(l.disconnect(),l=void 0)},c=r.watch(()=>qo(e),g=>{u(),s.value&&i&&g&&(l=new ResizeObserver(t),l.observe(g,a))},{immediate:!0,flush:"post"}),d=()=>{u(),c()};return st(d),{isSupported:s,stop:d}}var uo;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(uo||(uo={}));var br=Object.defineProperty,co=Object.getOwnPropertySymbols,Sr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,fo=(e,t,n)=>t in e?br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cr=(e,t)=>{for(var n in t||(t={}))Sr.call(t,n)&&fo(e,n,t[n]);if(co)for(var n of co(t))Nr.call(t,n)&&fo(e,n,t[n]);return e};const kr={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Cr({linear:ir},kr);function qe(e,t,n,o={}){var i,a,l;const{clone:s=!1,passive:u=!1,eventName:c,deep:d=!1,defaultValue:g}=o,v=r.getCurrentInstance(),E=n||(v==null?void 0:v.emit)||((i=v==null?void 0:v.$emit)==null?void 0:i.bind(v))||((l=(a=v==null?void 0:v.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(v==null?void 0:v.proxy));let h=c;t||(t="modelValue"),h=c||h||`update:${t.toString()}`;const f=w=>s?Se(s)?s(w):yr(w):w,_=()=>Ji(e[t])?f(e[t]):g;if(u){const w=_(),N=r.ref(w);return r.watch(()=>e[t],D=>N.value=f(D)),r.watch(N,D=>{(D!==e[t]||d)&&E(h,D)},{deep:d}),N}else return r.computed({get(){return _()},set(w){E(h,w)}})}function Y(e=()=>{}){const t=r.ref(new Set);e&&t.value.add(e);const n=a=>{t.value.delete(a)};return{on:a=>{t.value.has(e)&&t.value.delete(e),t.value.add(a);const l=()=>n(a);return st(l),{off:l}},off:n,trigger:a=>Promise.all(Array.from(t.value).map(l=>l(a))),fns:t}}const Mr=["production","prod"];function Qe(e,...t){Mr.includes(process.env.NODE_ENV||"")||console.warn(`[Vue Flow]: ${e}`,...t)}function $r(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>Qe(e.message))}}function Or(e,t){r.onBeforeMount(()=>{for(const[n,o]of Object.entries(t.value)){const i=a=>{e(n,a)};o.on(i),st(()=>{o.off(i)})}})}var ae=(e=>(e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e))(ae||{});const nn={MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`};class le extends Error{constructor(t,...n){var o;super((o=nn[t])==null?void 0:o.call(nn,...n)),this.code=t}}const Pn=()=>typeof window<"u"?window:{chrome:!1};function ho(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function wn(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Dt(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Pe(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Dn(e,t){return{x:Pe(e.x,t[0][0],t[1][0]),y:Pe(e.y,t[0][1],t[1][1])}}function go(e){const t=e.getRootNode(),n=Pn();return"elementFromPoint"in t?t:n.document}function ge(e){return e&&"id"in e&&"source"in e&&"target"in e}function jo(e){return ge(e)&&"sourceNode"in e&&"targetNode"in e}function Ae(e){return e&&"id"in e&&!ge(e)}function Re(e){return Ae(e)&&"computedPosition"in e}function Rr(e){return!!e.width&&!!e.height&&!!e.x&&!!e.y}function Tr(e,t={}){let n=t;return Re(e)||(n={type:e.type??t.type??"default",dimensions:r.markRaw({width:0,height:0}),handleBounds:{source:[],target:[]},computedPosition:r.markRaw({z:0,...e.position}),draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,...t,data:oe(e.data)?e.data:{},events:r.markRaw(oe(e.events)?e.events:{})}),Object.assign({},n,e,{id:e.id.toString()})}function zn(e,t={}){const n=oe(e.events)?e.events:t.events&&oe(t.events)?t.events:{},o=oe(e.data)?e.data:t.data&&oe(t.data)?t.data:{};return t=jo(e)?t:{...t,sourceHandle:(e.sourceHandle?e.sourceHandle.toString():void 0)||t.sourceHandle,targetHandle:(e.targetHandle?e.targetHandle.toString():void 0)||t.targetHandle,type:e.type??t.type??"default",source:e.source.toString()||t.source,target:e.target.toString()||t.target,updatable:e.updatable??t.updatable,selectable:e.selectable??t.selectable,focusable:e.focusable??t.focusable,data:o,events:r.markRaw(n),label:(e.label&&!Ee(e.label)?r.markRaw(e.label):e.label)||t.label,interactionWidth:e.interactionWidth||t.interactionWidth},Object.assign({},t,e,{id:e.id.toString()})}function Qo(e,t,n){if(!Ae(e))return[];const o=n==="source"?"target":"source",i=t.filter(a=>ge(a)&&a[o]===e.id).map(a=>ge(a)&&a[n]);return t.filter(a=>i.includes(a.id))}function Br(e,t){return Qo(e,t,"target")}function Ir(e,t){return Qo(e,t,"source")}function zt({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function An(e,t){return t.some(n=>ge(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function Pr(e,t,n){if(!e.source||!e.target)return Qe("Can't create edge. An edge needs a source and a target."),t;let o;return ge(e)?o={...e}:o={...e,id:zt(e)},o=zn(o,n),An(o,t)||t.push(o),t}function Dr(e,t,n){if(!t.source||!t.target)return Qe("Can't create new edge. An edge needs a source and a target."),n;const o=n.find(a=>ge(a)&&a.id===e.id);if(!o)return Qe(`The old edge with id=${e.id} does not exist.`),n;const i={...e,id:zt(t),source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(o),1,i),n.filter(a=>a.id!==e.id)}function Vn({x:e,y:t},{x:n,y:o,zoom:i}){return{x:e*i+n,y:t*i+o}}function At({x:e,y:t},{x:n,y:o,zoom:i},a,[l,s]){const u={x:(e-n)/i,y:(t-o)/i};return a?{x:l*Math.round(u.x/l),y:s*Math.round(u.y/s)}:u}function Jo(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Nt({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function ei({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function zr(e,t){return ei(Jo(Nt(e),Nt(t)))}function Vt(e){const t=e.reduce((n,{computedPosition:o={x:0,y:0},dimensions:i={width:0,height:0}}={})=>Jo(n,Nt({...o,...i})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ei(t)}function Hn(e,t,{x:n,y:o,zoom:i}={x:0,y:0,zoom:1},a=!1,l=!1){const s={x:(t.x-n)/i,y:(t.y-o)/i,width:t.width/i,height:t.height/i};return e.filter(u=>{const{computedPosition:c={x:0,y:0},dimensions:d={width:0,height:0},selectable:g}=u;if(l&&!g)return!1;const v={...c,width:d.width||0,height:d.height||0},E=wn(s,v),h=typeof d.width>"u"||typeof d.height>"u"||d.width===0||d.height===0,f=a&&E>0,_=d.width*d.height;return h||f||E>=_})}function ut(e,t){const n=e.map(o=>Ee(o)?o:o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))}function Je(e,t,n,o,i,a=.1,l={x:0,y:0}){const s=t/(e.width*(1+a)),u=n/(e.height*(1+a)),c=Math.min(s,u),d=Pe(c,o,i),g=e.x+e.width/2,v=e.y+e.height/2,E=t/2-g*d+(l.x??0),h=n/2-v*d+(l.y??0);return{x:E,y:h,zoom:d}}function Ar(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ti(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:ti(n,t):!1}function Me(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function oe(e){return typeof r.unref(e)<"u"}function Vr(e,t,n){if(!e.source||!e.target)return n(new le(ae.EDGE_INVALID,e.id)),!1;let o;return ge(e)?o=e:o={...e,id:zt(e)},o=zn(o),An(o,t)?!1:o}function Hr(e,t,n,o,i,a){if(!t.source||!t.target)return a(new le(ae.EDGE_INVALID,e.id)),!1;const l=o(e.id);if(!l)return a(new le(ae.EDGE_NOT_FOUND,e.id)),!1;const{id:s,...u}=e,c={...u,id:i?zt(t):s,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle};return n.splice(n.indexOf(l),1,c),c}function vo(e,t,n,o){const i={},a=e.map(s=>{const u=Tr(s,{...n(s.id),parentNode:s.parentNode});return s.parentNode&&(i[s.parentNode]=!0),u}),l=[...a,...t];return a.forEach(s=>{const u=l.find(c=>c.id===s.parentNode);s.parentNode&&!u&&o(new le(ae.NODE_MISSING_PARENT,s.id,s.parentNode)),(s.parentNode||i[s.id])&&(i[s.id]&&(s.isParent=!0),u&&(u.isParent=!0))}),a}var q=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(q||{}),Ht=(e=>(e.Partial="partial",e.Full="full",e))(Ht||{}),ke=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ke||{}),$e=(e=>(e.Strict="strict",e.Loose="loose",e))($e||{}),Ct=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Ct||{}),et=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(et||{}),ni=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(ni||{});const _n=Symbol("vueFlow"),Fn=Symbol("nodeId"),oi=Symbol("nodeRef"),ii=Symbol("edgeId"),ri=Symbol("edgeRef"),Ft=Symbol("slots");function ai(e){const t=e??r.inject(Fn,""),n=r.inject(oi,null),{findNode:o,edges:i,emits:a}=ie(),l=o(t);return l||a.error(new le(ae.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:l,parentNode:r.computed(()=>o(l.parentNode)),connectedEdges:r.computed(()=>ut([l],i.value))}}function Ln(e){return"clientX"in e}function Ve(e,t){var a,l;const n=Ln(e),o=n?e.clientX:(a=e.touches)==null?void 0:a[0].clientX,i=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}}function kt(e,t,n){const o=((n==null?void 0:n.x)??0)+t.x,i=((n==null?void 0:n.y)??0)+t.y,a=(n==null?void 0:n.width)??t.width,l=(n==null?void 0:n.height)??t.height;switch(e){case q.Top:return{x:o+a/2,y:i};case q.Right:return{x:o+a,y:i+l/2};case q.Bottom:return{x:o+a/2,y:i+l};case q.Left:return{x:o,y:i+l/2}}}function mo(e=[],t){return e.length?!t||e.length===1?e[0]:t&&e.find(n=>n.id===t)||null:null}function Fr(e,t,n,o,i,a){const l=kt(n,{...e.dimensions,...e.computedPosition},t),s=kt(a,{...o.dimensions,...o.computedPosition},i);return{sourceX:l.x,sourceY:l.y,targetX:s.x,targetY:s.y}}function Lr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:i,targetHeight:a,width:l,height:s,viewport:u}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+o,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Nt({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:l/u.zoom,height:s/u.zoom}),g=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),v=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(g*v)>0}function Gr(e,t,n=!1){let o=-1;const i=e.reduce((a,l)=>{const s=_e(l.zIndex);let u=s?l.zIndex:0;const c=t(l.source),d=t(l.target);return!c||!d||(n&&(u=s?l.zIndex:Math.max(c.computedPosition.z||0,d.computedPosition.z||0)),a[u]?a[u].push(l):a[u]=[l],o=u>o?u:o),a},{});return Object.entries(Object.keys(i).length?i:{0:[]}).map(([a,l])=>{const s=+a;return{edges:l,level:s,isMaxLevel:s===o}})}function on(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function po(e,t,n,o){return(t[n]||[]).reduce((i,a)=>(`${e.id}-${a.id}-${n}`!==o&&i.push({id:a.id||null,type:n,nodeId:e.id,...kt(a.position,{...e.dimensions,...e.computedPosition},a)}),i),[])}function Yr(e,t,n){let o=null,i=1/0;return n.forEach(a=>{const l=Math.sqrt((a.x-e.x)**2+(a.y-e.y)**2);l<=t&&l<i&&(i=l,o=a)}),o}function yo(e,t,n,o,i,a,l,s,u,c){const d=a==="target",g=s.querySelector(`.vue-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),{x:v,y:E}=Ve(e),h=s.elementFromPoint(v,E),f=h!=null&&h.classList.contains("vue-flow__handle")?h:g,_={handleDomNode:f,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(f){const w=li(void 0,f),N=f.getAttribute("data-nodeid"),D=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),M=f.classList.contains("connectableend"),O={source:d?N:o,sourceHandle:d?D:i,target:d?o:N,targetHandle:d?i:D};_.connection=O,x&&M&&(n===$e.Strict?d&&w==="source"||!d&&w==="target":N!==o||D!==i)&&(_.endHandle={nodeId:N,handleId:D,type:w},_.isValid=l(O,{edges:u,sourceNode:c(O.source),targetNode:c(O.target)}))}return _}function Xr({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((i,a)=>{const{handleBounds:l}=a;let s=[],u=[];return l&&(s=po(a,l,"source",`${t}-${n}-${o}`),u=po(a,l,"target",`${t}-${n}-${o}`)),i.push(...s,...u),i},[])}function li(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Ur(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function xo(e,t,n){return e<t?Pe(Math.abs(e-t),1,50)/50:e>n?-Pe(Math.abs(e-n),1,50)/50:0}function si(e,t){const n=xo(e.x,35,t.width-35)*20,o=xo(e.y,35,t.height-35)*20;return[n,o]}function ht(){return!0}function Gn({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:l}){const s=r.computed(()=>ne(n)==="target"),{vueFlowRef:u,connectionMode:c,connectionRadius:d,connectOnClick:g,connectionClickStartHandle:v,nodesConnectable:E,autoPanOnConnect:h,findNode:f,panBy:_,getNodes:w,startConnection:N,updateConnection:D,endConnection:x,emits:M,viewport:O,edges:p,isValidConnection:L}=ie();let B=null,k=!1,V=null;function j(y){var H;const z=Ln(y),S=go(y.target);if(z&&y.button===0||!z){let X=function(P){F=Ve(P,m),I=Yr(At(F,O.value,!1,[1,1]),d.value,A),R||(C(),R=!0);const ee=yo(P,I,c.value,ne(t),ne(e),s.value?"target":"source",Z,S,p.value,f);if(B=ee.connection,k=ee.isValid,V=ee.handleDomNode,D(I&&k?Vn({x:I.x,y:I.y},O.value):F,ee.endHandle,Ur(!!I,k)),!I&&!k&&!V)return on(b);B&&B.source!==B.target&&V&&(on(b),b=V,V.classList.add("connecting","vue-flow__handle-connecting"),V.classList.toggle("valid",k),V.classList.toggle("vue-flow__handle-valid",k))},K=function(P){(I||V)&&B&&k&&(a?a(P,B):M.connect(B)),M.connectEnd(P),i&&(l==null||l(P)),on(b),cancelAnimationFrame(Q),x(P),R=!1,k=!1,B=null,V=null,S.removeEventListener("mousemove",X),S.removeEventListener("mouseup",K),S.removeEventListener("touchmove",X),S.removeEventListener("touchend",K)};const T=f(ne(t));let Z=o||L.value||ht;!Z&&T&&(Z=(s?T.isValidSourcePos:T.isValidTargetPos)||ht);let I,Q=0;const{x:U,y:W}=Ve(y),$=S==null?void 0:S.elementFromPoint(U,W),G=li(ne(i),$),m=(H=u.value)==null?void 0:H.getBoundingClientRect();if(!m||!G)return;let b,F=Ve(y,m),R=!1;const A=Xr({nodes:w.value,nodeId:ne(t),handleId:ne(e),handleType:G}),C=()=>{if(!h)return;const[P,ee]=si(F,m);_({x:P,y:ee}),Q=requestAnimationFrame(C)};N({nodeId:ne(t),handleId:ne(e),type:G},{x:U-m.left,y:W-m.top},y),M.connectStart({event:y,nodeId:ne(t),handleId:ne(e),handleType:G}),S.addEventListener("mousemove",X),S.addEventListener("mouseup",K),S.addEventListener("touchmove",X),S.addEventListener("touchend",K)}}function J(y){if(g.value)if(!v.value)M.clickConnectStart({event:y,nodeId:ne(t),handleId:ne(e)}),N({nodeId:ne(t),type:ne(n),handleId:ne(e)},void 0,y,!0);else{let z=o||L.value||ht;const S=f(ne(t));if(!z&&S&&(z=(s?S.isValidSourcePos:S.isValidTargetPos)||ht),S&&(typeof S.connectable>"u"?E.value:S.connectable)===!1)return;const H=go(y.target),{connection:X,isValid:K}=yo(y,{nodeId:ne(t),id:ne(e),type:ne(n)},c.value,v.value.nodeId,v.value.handleId||null,v.value.type,z,H,p.value,f),T=X.source===X.target;K&&!T&&M.connect(X),M.clickConnectEnd(y),x(y,!0)}}return{handlePointerDown:j,handleClick:J}}function Zr(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}const Kr=["data-id","data-handleid","data-nodeid","data-handlepos"],Wr={name:"Handle",compatConfig:{MODE:3}},tt=r.defineComponent({...Wr,props:{id:null,type:null,position:{default:q.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e){const t=Zr(e,["position","connectable","connectableStart","connectableEnd","id","isValidConnection"]),n=r.toRef(t,"type","source"),{connectionStartHandle:o,connectionClickStartHandle:i,connectionEndHandle:a,vueFlowRef:l,nodesConnectable:s,noDragClassName:u,noPanClassName:c}=ie(),{id:d,node:g,nodeEl:v,connectedEdges:E}=ai(),h=r.ref(),f=r.computed(()=>e.id??`${d}__handle-${e.position}`),_=r.computed(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),w=r.computed(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),{handlePointerDown:N,handleClick:D}=Gn({nodeId:d,handleId:f,isValidConnection:e.isValidConnection,type:n}),x=r.computed(()=>Ee(e.connectable)&&e.connectable==="single"?!E.value.some(B=>{const k=B[`${n.value}Handle`];return B[n.value]!==d?!1:k?k===f.value:!0}):Se(e.connectable)?e.connectable(g,E.value):oe(e.connectable)?e.connectable:s.value),M=r.computed(()=>{var B,k,V,j,J,y;return((B=o.value)==null?void 0:B.nodeId)===d&&((k=o.value)==null?void 0:k.handleId)===f.value&&((V=o.value)==null?void 0:V.type)===n.value||((j=a.value)==null?void 0:j.nodeId)===d&&((J=a.value)==null?void 0:J.handleId)===f.value&&((y=a.value)==null?void 0:y.type)===n.value}),O=r.computed(()=>{var B,k,V;return((B=i.value)==null?void 0:B.nodeId)===d&&((k=i.value)==null?void 0:k.handleId)===f.value&&((V=i.value)==null?void 0:V.type)===n.value});ue(()=>g.initialized).toBe(!0,{flush:"post"}).then(()=>{var S;const B=(S=g.handleBounds[n.value])==null?void 0:S.find(H=>H.id===f.value);if(!l.value||B)return;const k=l.value.querySelector(".vue-flow__transformationpane");if(!v||!h.value||!k||!f.value)return;const V=v.value.getBoundingClientRect(),j=h.value.getBoundingClientRect(),J=window.getComputedStyle(k),{m22:y}=new window.DOMMatrixReadOnly(J.transform),z={id:f.value,position:e.position,x:(j.left-V.left)/y,y:(j.top-V.top)/y,...Dt(h.value)};g.handleBounds[n.value]=[...g.handleBounds[n.value]??[],z]});function p(B){const k=Ln(B);x.value&&_.value&&(k&&B.button===0||!k)&&N(B)}function L(B){!d||!i.value&&!_.value||x.value&&D(B)}return(B,k)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"handle",ref:h,"data-id":`${r.unref(d)}-${r.unref(f)}-${r.unref(n)}`,"data-handleid":r.unref(f),"data-nodeid":r.unref(d),"data-handlepos":e.position,class:r.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${e.position}`,`vue-flow__handle-${r.unref(f)}`,r.unref(u),r.unref(c),r.unref(n),{connectable:r.unref(x),connecting:r.unref(O),connectablestart:r.unref(_),connectableend:r.unref(w),connectionindicator:r.unref(x)&&(r.unref(_)&&!r.unref(M)||r.unref(w)&&r.unref(M))}]]),onMousedown:p,onTouchstartPassive:p,onClick:L},[r.renderSlot(B.$slots,"default",{id:e.id})],42,Kr))}}),Lt=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,label:n,connectable:o=!0,isValidTargetPos:i,isValidSourcePos:a}){return[r.h(tt,{type:"target",position:t,connectable:o,isValidConnection:i}),typeof n!="string"&&n?r.h(n):r.h("div",{innerHTML:n}),r.h(tt,{type:"source",position:e,connectable:o,isValidConnection:a})]};Lt.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable"];Lt.inheritAttrs=!1;Lt.compatConfig={MODE:3};const qr=Lt,Gt=function({sourcePosition:e=q.Bottom,label:t,connectable:n=!0,isValidSourcePos:o}){return[typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t}),r.h(tt,{type:"source",position:e,connectable:n,isValidConnection:o})]};Gt.props=["sourcePosition","label","isValidSourcePos","connectable"];Gt.inheritAttrs=!1;Gt.compatConfig={MODE:3};const jr=Gt,Yt=function({targetPosition:e=q.Top,label:t,connectable:n=!0,isValidTargetPos:o}){return[r.h(tt,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof t!="string"&&t?r.h(t):r.h("div",{innerHTML:t})]};Yt.props=["targetPosition","label","isValidTargetPos","connectable"];Yt.inheritAttrs=!1;Yt.compatConfig={MODE:3};const Qr=Yt;function wo(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Jr(e,t,n,o,i){return e.filter(a=>(a.selected||a.id===i)&&(!a.parentNode||!ti(a,o))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var l,s;return r.markRaw({id:a.id,position:a.position||{x:0,y:0},distance:{x:n.x-((l=a.computedPosition)==null?void 0:l.x)||0,y:n.y-((s=a.computedPosition)==null?void 0:s.y)||0},from:a.computedPosition,extent:a.extent,parentNode:a.parentNode,dimensions:a.dimensions})})}function rn({id:e,dragItems:t,findNode:n}){const o=t.map(i=>n(i.id));return[e?o.find(i=>i.id===e):o[0],o]}function ui(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function ea(e,t,n){const[o,i,a,l]=typeof e!="string"?ui(e.padding):[0,0,0,0];return n&&_e(n.computedPosition.x)&&_e(n.computedPosition.y)&&_e(n.dimensions.width)&&_e(n.dimensions.height)?[[n.computedPosition.x+l,n.computedPosition.y+o],[n.computedPosition.x+(n.dimensions.width-t.dimensions.width)-i,n.computedPosition.y+(n.dimensions.height-t.dimensions.height)-a]]:!1}function ta(e,t,n,o){let i=e.extent||n;if(i==="parent"||!Array.isArray(i)&&(i==null?void 0:i.range)==="parent")if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const a=ea(i,e,o);a&&(i=a)}else t(new le(ae.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){const a=(o==null?void 0:o.computedPosition.x)||0,l=(o==null?void 0:o.computedPosition.y)||0;i=[[i[0][0]+a,i[0][1]+l],[i[1][0]+a,i[1][1]+l]]}else if(i!=null&&i.range&&Array.isArray(i.range)){const[a,l,s,u]=ui(i.padding),c=(o==null?void 0:o.computedPosition.x)||0,d=(o==null?void 0:o.computedPosition.y)||0;i=[[i.range[0][0]+c+u,i.range[0][1]+d+a],[i.range[1][0]+c-l,i.range[1][1]+d-s]]}return i}function Yn(e,t,n,o,i){const a=ta(e,n,o,i),l=Dn(t,a);return{position:{x:l.x-((i==null?void 0:i.computedPosition.x)||0),y:l.y-((i==null?void 0:i.computedPosition.y)||0)},computedPosition:l}}function ci(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:i,snapToGrid:a,nodesDraggable:l,emits:s}=ie();return(u,c=!1)=>{const d=a.value?i.value[0]:5,g=a.value?i.value[1]:5,v=c?4:1,E=u.x*d*v,h=u.y*g*v,f=e.value.filter(_=>_.draggable||l&&typeof _.draggable>"u").map(_=>{const w={x:_.computedPosition.x+E,y:_.computedPosition.y+h},{computedPosition:N}=Yn(_,w,s.error,t.value,_.parentNode?o(_.parentNode):void 0);return{id:_.id,position:N,from:_.position,distance:{x:u.x,y:u.y},dimensions:_.dimensions}});n(f,!0,!1)}}function na(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function oa(e,t){const n=na();return n.doubleClick.on(o=>{var i,a;t.nodeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.nodeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.nodeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.nodeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.nodeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.nodeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.dragStart.on(o=>{var i,a;t.nodeDragStart(o),(a=(i=e.events)==null?void 0:i.dragStart)==null||a.call(i,o)}),n.drag.on(o=>{var i,a;t.nodeDrag(o),(a=(i=e.events)==null?void 0:i.drag)==null||a.call(i,o)}),n.dragStop.on(o=>{var i,a;t.nodeDragStop(o),(a=(i=e.events)==null?void 0:i.dragStop)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}function di(){const{viewport:e,snapGrid:t,snapToGrid:n}=ie();return({sourceEvent:o})=>{const i=o.touches?o.touches[0].clientX:o.clientX,a=o.touches?o.touches[0].clientY:o.clientY,l={x:(i-e.value.x)/e.value.zoom,y:(a-e.value.y)/e.value.zoom};return{xSnapped:n.value?t.value[0]*Math.round(l.x/t.value[0]):l.x,ySnapped:n.value?t.value[1]*Math.round(l.y/t.value[1]):l.y,...l}}}function _o(e,t,n){const o=t.querySelectorAll(`.vue-flow__handle${e}`);if(!o||!o.length)return;const i=Array.from(o),a=t.getBoundingClientRect();return i.map(l=>{const s=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(s.left-a.left)/n,y:(s.top-a.top)/n,...Dt(l)}})}function En(e,t,n,o,i,a=!1,l){i.value=!1,e.selected?(a||e.selected&&t)&&(o([e]),r.nextTick(l.blur)):n([e])}var ia={value:()=>{}};function Xt(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new wt(n)}function wt(e){this._=e}function ra(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}wt.prototype=Xt.prototype={constructor:wt,on:function(e,t){var n=this._,o=ra(e+"",n),i,a=-1,l=o.length;if(arguments.length<2){for(;++a<l;)if((i=(e=o[a]).type)&&(i=aa(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<l;)if(i=(e=o[a]).type)n[i]=Eo(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Eo(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new wt(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,a;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],o=0,i=a.length;o<i;++o)a[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,a=o.length;i<a;++i)o[i].value.apply(t,n)}};function aa(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Eo(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=ia,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var bn="http://www.w3.org/1999/xhtml";const bo={svg:"http://www.w3.org/2000/svg",xhtml:bn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ut(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bo.hasOwnProperty(t)?{space:bo[t],local:e}:e}function la(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bn&&t.documentElement.namespaceURI===bn?t.createElement(e):t.createElementNS(n,e)}}function sa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fi(e){var t=Ut(e);return(t.local?sa:la)(t)}function ua(){}function Xn(e){return e==null?ua:function(){return this.querySelector(e)}}function ca(e){typeof e!="function"&&(e=Xn(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=new Array(l),u,c,d=0;d<l;++d)(u=a[d])&&(c=e.call(u,u.__data__,d,a))&&("__data__"in u&&(c.__data__=u.__data__),s[d]=c);return new ce(o,this._parents)}function da(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fa(){return[]}function hi(e){return e==null?fa:function(){return this.querySelectorAll(e)}}function ha(e){return function(){return da(e.apply(this,arguments))}}function ga(e){typeof e=="function"?e=ha(e):e=hi(e);for(var t=this._groups,n=t.length,o=[],i=[],a=0;a<n;++a)for(var l=t[a],s=l.length,u,c=0;c<s;++c)(u=l[c])&&(o.push(e.call(u,u.__data__,c,l)),i.push(u));return new ce(o,i)}function gi(e){return function(){return this.matches(e)}}function vi(e){return function(t){return t.matches(e)}}var va=Array.prototype.find;function ma(e){return function(){return va.call(this.children,e)}}function pa(){return this.firstElementChild}function ya(e){return this.select(e==null?pa:ma(typeof e=="function"?e:vi(e)))}var xa=Array.prototype.filter;function wa(){return Array.from(this.children)}function _a(e){return function(){return xa.call(this.children,e)}}function Ea(e){return this.selectAll(e==null?wa:_a(typeof e=="function"?e:vi(e)))}function ba(e){typeof e!="function"&&(e=gi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],u,c=0;c<l;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new ce(o,this._parents)}function mi(e){return new Array(e.length)}function Sa(){return new ce(this._enter||this._groups.map(mi),this._parents)}function Mt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mt.prototype={constructor:Mt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Na(e){return function(){return e}}function Ca(e,t,n,o,i,a){for(var l=0,s,u=t.length,c=a.length;l<c;++l)(s=t[l])?(s.__data__=a[l],o[l]=s):n[l]=new Mt(e,a[l]);for(;l<u;++l)(s=t[l])&&(i[l]=s)}function ka(e,t,n,o,i,a,l){var s,u,c=new Map,d=t.length,g=a.length,v=new Array(d),E;for(s=0;s<d;++s)(u=t[s])&&(v[s]=E=l.call(u,u.__data__,s,t)+"",c.has(E)?i[s]=u:c.set(E,u));for(s=0;s<g;++s)E=l.call(e,a[s],s,a)+"",(u=c.get(E))?(o[s]=u,u.__data__=a[s],c.delete(E)):n[s]=new Mt(e,a[s]);for(s=0;s<d;++s)(u=t[s])&&c.get(v[s])===u&&(i[s]=u)}function Ma(e){return e.__data__}function $a(e,t){if(!arguments.length)return Array.from(this,Ma);var n=t?ka:Ca,o=this._parents,i=this._groups;typeof e!="function"&&(e=Na(e));for(var a=i.length,l=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var d=o[c],g=i[c],v=g.length,E=Oa(e.call(d,d&&d.__data__,c,o)),h=E.length,f=s[c]=new Array(h),_=l[c]=new Array(h),w=u[c]=new Array(v);n(d,g,f,_,w,E,t);for(var N=0,D=0,x,M;N<h;++N)if(x=f[N]){for(N>=D&&(D=N+1);!(M=_[D])&&++D<h;);x._next=M||null}}return l=new ce(l,o),l._enter=s,l._exit=u,l}function Oa(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ra(){return new ce(this._exit||this._groups.map(mi),this._parents)}function Ta(e,t,n){var o=this.enter(),i=this,a=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),o&&i?o.merge(i).order():i}function Ba(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,a=o.length,l=Math.min(i,a),s=new Array(i),u=0;u<l;++u)for(var c=n[u],d=o[u],g=c.length,v=s[u]=new Array(g),E,h=0;h<g;++h)(E=c[h]||d[h])&&(v[h]=E);for(;u<i;++u)s[u]=n[u];return new ce(s,this._parents)}function Ia(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,a=o[i],l;--i>=0;)(l=o[i])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Pa(e){e||(e=Da);function t(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var n=this._groups,o=n.length,i=new Array(o),a=0;a<o;++a){for(var l=n[a],s=l.length,u=i[a]=new Array(s),c,d=0;d<s;++d)(c=l[d])&&(u[d]=c);u.sort(t)}return new ce(i,this._parents).order()}function Da(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function za(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Aa(){return Array.from(this)}function Va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length;i<a;++i){var l=o[i];if(l)return l}return null}function Ha(){let e=0;for(const t of this)++e;return e}function Fa(){return!this.node()}function La(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],a=0,l=i.length,s;a<l;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function Ga(e){return function(){this.removeAttribute(e)}}function Ya(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xa(e,t){return function(){this.setAttribute(e,t)}}function Ua(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Za(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ka(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Wa(e,t){var n=Ut(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Ya:Ga:typeof t=="function"?n.local?Ka:Za:n.local?Ua:Xa)(n,t))}function pi(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function qa(e){return function(){this.style.removeProperty(e)}}function ja(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Qa(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ja(e,t,n){return arguments.length>1?this.each((t==null?qa:typeof t=="function"?Qa:ja)(e,t,n??"")):Ge(this.node(),e)}function Ge(e,t){return e.style.getPropertyValue(t)||pi(e).getComputedStyle(e,null).getPropertyValue(t)}function el(e){return function(){delete this[e]}}function tl(e,t){return function(){this[e]=t}}function nl(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ol(e,t){return arguments.length>1?this.each((t==null?el:typeof t=="function"?nl:tl)(e,t)):this.node()[e]}function yi(e){return e.trim().split(/^|\s+/)}function Un(e){return e.classList||new xi(e)}function xi(e){this._node=e,this._names=yi(e.getAttribute("class")||"")}xi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function wi(e,t){for(var n=Un(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function _i(e,t){for(var n=Un(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function il(e){return function(){wi(this,e)}}function rl(e){return function(){_i(this,e)}}function al(e,t){return function(){(t.apply(this,arguments)?wi:_i)(this,e)}}function ll(e,t){var n=yi(e+"");if(arguments.length<2){for(var o=Un(this.node()),i=-1,a=n.length;++i<a;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?al:t?il:rl)(n,t))}function sl(){this.textContent=""}function ul(e){return function(){this.textContent=e}}function cl(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dl(e){return arguments.length?this.each(e==null?sl:(typeof e=="function"?cl:ul)(e)):this.node().textContent}function fl(){this.innerHTML=""}function hl(e){return function(){this.innerHTML=e}}function gl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function vl(e){return arguments.length?this.each(e==null?fl:(typeof e=="function"?gl:hl)(e)):this.node().innerHTML}function ml(){this.nextSibling&&this.parentNode.appendChild(this)}function pl(){return this.each(ml)}function yl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xl(){return this.each(yl)}function wl(e){var t=typeof e=="function"?e:fi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _l(){return null}function El(e,t){var n=typeof e=="function"?e:fi(e),o=t==null?_l:typeof t=="function"?t:Xn(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function bl(){var e=this.parentNode;e&&e.removeChild(this)}function Sl(){return this.each(bl)}function Nl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kl(e){return this.select(e?Cl:Nl)}function Ml(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $l(e){return function(t){e.call(this,t,this.__data__)}}function Ol(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Rl(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Tl(e,t,n){return function(){var o=this.__on,i,a=$l(t);if(o){for(var l=0,s=o.length;l<s;++l)if((i=o[l]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(i):this.__on=[i]}}function Bl(e,t,n){var o=Ol(e+""),i,a=o.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,d;u<c;++u)for(i=0,d=s[u];i<a;++i)if((l=o[i]).type===d.type&&l.name===d.name)return d.value}return}for(s=t?Tl:Rl,i=0;i<a;++i)this.each(s(o[i],t,n));return this}function Ei(e,t,n){var o=pi(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Il(e,t){return function(){return Ei(this,e,t)}}function Pl(e,t){return function(){return Ei(this,e,t.apply(this,arguments))}}function Dl(e,t){return this.each((typeof t=="function"?Pl:Il)(e,t))}function*zl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,a=o.length,l;i<a;++i)(l=o[i])&&(yield l)}var bi=[null];function ce(e,t){this._groups=e,this._parents=t}function ct(){return new ce([[document.documentElement]],bi)}function Al(){return this}ce.prototype=ct.prototype={constructor:ce,select:ca,selectAll:ga,selectChild:ya,selectChildren:Ea,filter:ba,data:$a,enter:Sa,exit:Ra,join:Ta,merge:Ba,selection:Al,order:Ia,sort:Pa,call:za,nodes:Aa,node:Va,size:Ha,empty:Fa,each:La,attr:Wa,style:Ja,property:ol,classed:ll,text:dl,html:vl,raise:pl,lower:xl,append:wl,insert:El,remove:Sl,clone:kl,datum:Ml,on:Bl,dispatch:Dl,[Symbol.iterator]:zl};function fe(e){return typeof e=="string"?new ce([[document.querySelector(e)]],[document.documentElement]):new ce([[e]],bi)}function Vl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function me(e,t){if(e=Vl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Hl={passive:!1},nt={capture:!0,passive:!1};function an(e){e.stopImmediatePropagation()}function He(e){e.preventDefault(),e.stopImmediatePropagation()}function Si(e){var t=e.document.documentElement,n=fe(e).on("dragstart.drag",He,nt);"onselectstart"in t?n.on("selectstart.drag",He,nt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ni(e,t){var n=e.document.documentElement,o=fe(e).on("dragstart.drag",null);t&&(o.on("click.drag",He,nt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gt=e=>()=>e;function Sn(e,{sourceEvent:t,subject:n,target:o,identifier:i,active:a,x:l,y:s,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}Sn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Fl(e){return!e.ctrlKey&&!e.button}function Ll(){return this.parentNode}function Gl(e,t){return t??{x:e.x,y:e.y}}function Yl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xl(){var e=Fl,t=Ll,n=Gl,o=Yl,i={},a=Xt("start","drag","end"),l=0,s,u,c,d,g=0;function v(x){x.on("mousedown.drag",E).filter(o).on("touchstart.drag",_).on("touchmove.drag",w,Hl).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(x,M){if(!(d||!e.call(this,x,M))){var O=D(this,t.call(this,x,M),x,M,"mouse");O&&(fe(x.view).on("mousemove.drag",h,nt).on("mouseup.drag",f,nt),Si(x.view),an(x),c=!1,s=x.clientX,u=x.clientY,O("start",x))}}function h(x){if(He(x),!c){var M=x.clientX-s,O=x.clientY-u;c=M*M+O*O>g}i.mouse("drag",x)}function f(x){fe(x.view).on("mousemove.drag mouseup.drag",null),Ni(x.view,c),He(x),i.mouse("end",x)}function _(x,M){if(e.call(this,x,M)){var O=x.changedTouches,p=t.call(this,x,M),L=O.length,B,k;for(B=0;B<L;++B)(k=D(this,p,x,M,O[B].identifier,O[B]))&&(an(x),k("start",x,O[B]))}}function w(x){var M=x.changedTouches,O=M.length,p,L;for(p=0;p<O;++p)(L=i[M[p].identifier])&&(He(x),L("drag",x,M[p]))}function N(x){var M=x.changedTouches,O=M.length,p,L;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),p=0;p<O;++p)(L=i[M[p].identifier])&&(an(x),L("end",x,M[p]))}function D(x,M,O,p,L,B){var k=a.copy(),V=me(B||O,M),j,J,y;if((y=n.call(x,new Sn("beforestart",{sourceEvent:O,target:v,identifier:L,active:l,x:V[0],y:V[1],dx:0,dy:0,dispatch:k}),p))!=null)return j=y.x-V[0]||0,J=y.y-V[1]||0,function z(S,H,X){var K=V,T;switch(S){case"start":i[L]=z,T=l++;break;case"end":delete i[L],--l;case"drag":V=me(X||H,M),T=l;break}k.call(S,x,new Sn(S,{sourceEvent:H,subject:y,target:v,identifier:L,active:T,x:V[0]+j,y:V[1]+J,dx:V[0]-K[0],dy:V[1]-K[1],dispatch:k}),p)}}return v.filter=function(x){return arguments.length?(e=typeof x=="function"?x:gt(!!x),v):e},v.container=function(x){return arguments.length?(t=typeof x=="function"?x:gt(x),v):t},v.subject=function(x){return arguments.length?(n=typeof x=="function"?x:gt(x),v):n},v.touchable=function(x){return arguments.length?(o=typeof x=="function"?x:gt(!!x),v):o},v.on=function(){var x=a.on.apply(a,arguments);return x===a?v:x},v.clickDistance=function(x){return arguments.length?(g=(x=+x)*x,v):Math.sqrt(g)},v}function Ci(e){const t=ie(),n=r.toRef(t,"vueFlowRef"),o=r.toRef(t,"snapToGrid"),i=r.toRef(t,"snapGrid"),a=r.toRef(t,"noDragClassName"),l=r.toRef(t,"nodes"),s=r.toRef(t,"nodeExtent"),u=r.toRef(t,"viewport"),c=r.toRef(t,"autoPanOnNodeDrag"),d=r.toRef(t,"nodesDraggable"),g=r.toRef(t,"panBy"),v=r.toRef(t,"findNode"),E=r.toRef(t,"multiSelectionActive"),h=r.toRef(t,"nodesSelectionActive"),f=r.toRef(t,"selectNodesOnDrag"),_=r.toRef(t,"removeSelectedElements"),w=r.toRef(t,"addSelectedNodes"),N=r.toRef(t,"updateNodePositions"),D=r.toRef(t,"emits"),{onStart:x,onDrag:M,onStop:O,el:p,disabled:L,id:B,selectable:k}=e,V=r.ref(!1);let j=r.ref([]),J=r.ref(),y=r.ref(null),z=r.ref({x:void 0,y:void 0}),S=r.ref({x:0,y:0}),H=r.ref(null),X=r.ref(0),K=r.ref(!1),T=r.ref({x:0,y:0});const Z=di(),I=({x:U,y:W})=>{z.value={x:U,y:W};let $=!1;if(j.value=j.value.map(G=>{const m={x:U-G.distance.x,y:W-G.distance.y};o.value&&(m.x=i.value[0]*Math.round(m.x/i.value[0]),m.y=i.value[1]*Math.round(m.y/i.value[1]));const{computedPosition:b}=Yn(G,m,D.value.error,s.value,G.parentNode?v.value(G.parentNode):void 0);return $=$||G.position.x!==b.x||G.position.y!==b.y,G.position=b,G}),!!$&&(N.value(j.value,!0,!0),V.value=!0,H.value)){const[G,m]=rn({id:B,dragItems:j.value,findNode:v.value});M({event:H.value,node:G,nodes:m})}},Q=()=>{if(!y.value)return;const[U,W]=si(S.value,y.value);if(U!==0||W!==0){const $={x:(z.value.x??0)-U/u.value.zoom,y:(z.value.y??0)-W/u.value.zoom};g.value({x:U,y:W},G=>{(Math.round(G.x)!==Math.round(T.value.x)||Math.round(G.y)!==Math.round(T.value.y))&&(I($),T.value=G,z.value=$)})}X.value=requestAnimationFrame(Q)};return r.watch([()=>ne(L),p],([U,W])=>{if(W){const $=fe(W);if(U)$.on(".drag",null);else{const G=v.value(B);J.value=Xl().on("start",m=>{var F;!f.value&&!E.value&&G&&(G.selected||_.value()),G&&ne(k)&&f.value&&En(G,E.value,w.value,_.value,h,!1,W);const b=Z(m);if(z.value=b,j.value=Jr(l.value,d.value,b,v.value,B),j.value.length){const[R,A]=rn({id:B,dragItems:j.value,findNode:v.value});x({event:m.sourceEvent,node:R,nodes:A})}y.value=((F=n.value)==null?void 0:F.getBoundingClientRect())||null,S.value=Ve(m.sourceEvent,y.value)}).on("drag",m=>{const b=Z(m);!K.value&&c.value&&(K.value=!0,Q()),(z.value.x!==b.xSnapped||z.value.y!==b.ySnapped)&&j.value.length&&(H.value=m.sourceEvent,S.value=Ve(m.sourceEvent,y.value),I(b))}).on("end",m=>{if(V.value=!1,K.value=!1,cancelAnimationFrame(X.value),j.value.length){N.value(j.value,!1,!1);const[b,F]=rn({id:B,dragItems:j.value,findNode:v.value});O({event:m.sourceEvent,node:b,nodes:F})}}).filter(m=>{const b=m.target;return!m.button&&(!a.value||!wo(b,`.${a.value}`,W)&&(!(G!=null&&G.dragHandle)||wo(b,G.dragHandle,W)))}),$.call(J.value)}}}),V}const ki="vue-flow__node-desc",Mi="vue-flow__edge-desc",Ul="vue-flow__aria-live",$i=["Enter"," ","Escape"],Fe={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Nn(e){var i,a;const t=((a=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:a[0])||e.target,n=Se(t.hasAttribute)?t.hasAttribute("contenteditable"):!1,o=Se(t.closest)?t.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||n||!!o}function Zl(e){return e.ctrlKey||e.metaKey||e.shiftKey}function Kl(e,t){return n=>e.some(o=>{const i=o.split("+").map(a=>a.trim().toLowerCase());return i.length===1?n.key===o:(t.add(n.key.toLowerCase()),i.every(a=>t.has(a)))})}const je=(e,t)=>{const n=Pn(),o=r.ref(ne(e)===!0),i=r.ref(!1),a=r.ref(new Set);return r.watch(o,()=>{t==null||t(o.value)}),r.watchEffect(()=>{let l=ne(e);if(n&&typeof n.addEventListener<"u"&&In(n,"blur",()=>{o.value=!1}),er(l)){o.value=l;return}Array.isArray(l)&&(l=Kl(l,a.value)),l&&(lo(l,s=>{i.value=Zl(s),!(!i.value&&Nn(s))&&(s.preventDefault(),o.value=!0)},{eventName:"keydown"}),lo(l,s=>{if(o.value){if(!i.value&&Nn(s))return;i.value=!1,a.value.clear(),o.value=!1}},{eventName:"keyup"}))}),o},Wl=r.defineComponent({name:"Node",compatConfig:{MODE:3},props:["name","type","id","draggable","selectable","focusable","connectable","node","resizeObserver"],setup(e){r.provide(Fn,e.id);const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"noPanClassName"),a=r.toRef(t,"selectNodesOnDrag"),l=r.toRef(t,"nodesSelectionActive"),s=r.toRef(t,"multiSelectionActive"),u=r.toRef(t,"emits"),c=r.toRef(t,"findNode"),d=r.toRef(t,"removeSelectedNodes"),g=r.toRef(t,"addSelectedNodes"),v=r.toRef(t,"updateNodeDimensions"),E=r.toRef(t,"onUpdateNodeInternals"),h=r.toRef(t,"getIntersectingNodes"),f=r.toRef(t,"getNodeTypes"),_=r.toRef(t,"nodeExtent"),w=r.toRef(t,"elevateNodesOnSelect"),N=r.toRef(t,"disableKeyboardA11y"),D=r.toRef(t,"ariaLiveMessage"),x=r.toRef(t,"snapToGrid"),M=r.toRef(t,"snapGrid"),O=ci(),p=qe(e,"node"),L=r.computed(()=>c.value(p.value.parentNode)),B=r.computed(()=>ut([p.value],o.value)),k=r.ref();r.provide(oi,k);const{emit:V,on:j}=oa(p.value,u.value),J=Ci({id:e.id,el:k,disabled:()=>!e.draggable,selectable:()=>e.selectable,onStart($){V.dragStart({...$,intersections:h.value(p.value)})},onDrag($){V.drag({...$,intersections:h.value(p.value)})},onStop($){V.dragStop({...$,intersections:h.value(p.value)})}}),y=r.computed(()=>p.value.class instanceof Function?p.value.class(p.value):p.value.class),z=r.computed(()=>{const $=(p.value.style instanceof Function?p.value.style(p.value):p.value.style)||{},G=p.value.width instanceof Function?p.value.width(p.value):p.value.width,m=p.value.height instanceof Function?p.value.height(p.value):p.value.height;return G&&($.width=typeof G=="string"?G:`${G}px`),m&&($.height=typeof m=="string"?m:`${m}px`),$}),S=()=>Number(p.value.zIndex??z.value.zIndex??0);return E.value($=>{$.includes(e.id)&&X()}),r.onMounted(()=>{e.resizeObserver.observe(k.value)}),r.onBeforeUnmount(()=>{e.resizeObserver.unobserve(k.value)}),r.watch([()=>p.value.type,()=>p.value.sourcePosition,()=>p.value.targetPosition],()=>{v.value([{id:e.id,nodeElement:k.value,forceUpdate:!0}])},{flush:"pre"}),r.watch([()=>p.value.position.x,()=>p.value.position.y,()=>{var $;return($=L.value)==null?void 0:$.computedPosition.x},()=>{var $;return($=L.value)==null?void 0:$.computedPosition.y},()=>{var $;return($=L.value)==null?void 0:$.computedPosition.z},()=>S(),()=>p.value.selected,()=>p.value.dimensions.height,()=>p.value.dimensions.width,()=>{var $;return($=L.value)==null?void 0:$.dimensions.height},()=>{var $;return($=L.value)==null?void 0:$.dimensions.width}],([$,G,m,b,F,R])=>{const A={x:$,y:G,z:R+(w.value&&p.value.selected?1e3:0)};_e(m)&&_e(b)?p.value.computedPosition=Ar({x:m,y:b,z:F},A):p.value.computedPosition=A},{flush:"pre",immediate:!0}),r.watch([()=>p.value.extent,()=>_.value],([$,G],[m,b])=>{($!==m||G!==b)&&H()}),p.value.extent==="parent"||typeof p.value.extent=="object"&&"range"in p.value.extent&&p.value.extent.range==="parent"?ue(()=>p.value.initialized).toBe(!0).then(H):H(),()=>r.h("div",{ref:k,"data-id":p.value.id,class:["vue-flow__node",`vue-flow__node-${e.type===!1?"default":e.name}`,{[i.value]:e.draggable,dragging:J==null?void 0:J.value,selected:p.value.selected,selectable:e.selectable},y.value],style:{zIndex:p.value.computedPosition.z??S(),transform:`translate(${p.value.computedPosition.x}px,${p.value.computedPosition.y}px)`,pointerEvents:e.selectable||e.draggable?"all":"none",visibility:p.value.initialized?"visible":"hidden",...z.value},tabIndex:e.focusable?0:void 0,role:e.focusable?"button":void 0,"aria-describedby":N.value?void 0:`${ki}-${n.value}`,"aria-label":p.value.ariaLabel,onMouseenter:K,onMousemove:T,onMouseleave:Z,onContextmenu:I,onClick:U,onDblclick:Q,onKeydown:W},[r.h(e.type===!1?f.value.default:e.type,{id:p.value.id,type:p.value.type,data:p.value.data,events:{...p.value.events,...j},selected:!!p.value.selected,resizing:!!p.value.resizing,dragging:J.value,connectable:e.connectable,position:p.value.position,dimensions:p.value.dimensions,isValidTargetPos:p.value.isValidTargetPos,isValidSourcePos:p.value.isValidSourcePos,parent:p.value.parentNode,zIndex:p.value.computedPosition.z,targetPosition:p.value.targetPosition,sourcePosition:p.value.sourcePosition,label:p.value.label,dragHandle:p.value.dragHandle,onUpdateNodeInternals:X})]);function H(){const $=p.value.computedPosition;x.value&&($.x=M.value[0]*Math.round($.x/M.value[0]),$.y=M.value[1]*Math.round($.y/M.value[1]));const{computedPosition:G,position:m}=Yn(p.value,$,u.value.error,_.value,L.value);(p.value.computedPosition.x!==G.x||p.value.computedPosition.y!==G.y)&&(p.value.computedPosition={...p.value.computedPosition,...G}),(p.value.position.x!==m.x||p.value.position.y!==m.y)&&(p.value.position=m)}function X(){k.value&&v.value([{id:e.id,nodeElement:k.value,forceUpdate:!0}])}function K($){J!=null&&J.value||V.mouseEnter({event:$,node:p.value,connectedEdges:B.value})}function T($){J!=null&&J.value||V.mouseMove({event:$,node:p.value,connectedEdges:B.value})}function Z($){J!=null&&J.value||V.mouseLeave({event:$,node:p.value,connectedEdges:B.value})}function I($){return V.contextMenu({event:$,node:p.value,connectedEdges:B.value})}function Q($){return V.doubleClick({event:$,node:p.value,connectedEdges:B.value})}function U($){e.selectable&&(!a.value||!e.draggable)&&En(p.value,s.value,g.value,d.value,l,!1,k.value),V.click({event:$,node:p.value,connectedEdges:B.value})}function W($){var G;if(!Nn($))if($i.includes($.key)&&e.selectable){const m=$.key==="Escape";m&&((G=k.value)==null||G.blur()),En(p.value,s.value,g.value,d.value,l,m,k.value)}else!N.value&&e.draggable&&p.value.selected&&Fe[$.key]&&(D.value=`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~p.value.position.x}, y: ${~~p.value.position.y}`,O({x:Fe[$.key].x,y:Fe[$.key].y},$.shiftKey))}}}),ql=Wl,jl=["transform"],Ql=["width","height","x","y","rx","ry"],Jl=["y"],es={name:"EdgeText",compatConfig:{MODE:3}},Oi=r.defineComponent({...es,props:{x:null,y:null,label:null,labelStyle:{default:{}},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:{}},labelBgPadding:{default:[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=r.ref({x:0,y:0,width:0,height:0});const n=r.ref(null),o=r.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);r.onMounted(i),r.watch([()=>e.x,()=>e.y,n,()=>e.label],i);function i(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,l)=>(r.openBlock(),r.createElementBlock("g",{transform:r.unref(o),class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(r.openBlock(),r.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${r.unref(t).width+2*e.labelBgPadding[0]}px`,height:`${r.unref(t).height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:r.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Ql)):r.createCommentVNode("",!0),r.createElementVNode("text",r.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:r.unref(t).height/2,dy:"0.3em",style:e.labelStyle}),[r.renderSlot(a.$slots,"default",{},()=>[r.unref(Ee)(e.label)?(r.openBlock(),r.createElementBlock(r.Fragment,{key:1},[r.createTextVNode(r.toDisplayString(e.label),1)],64)):(r.openBlock(),r.createBlock(r.resolveDynamicComponent(e.label),{key:0}))])],16,Jl)],8,jl))}}),Zt=function({path:e,label:t,labelX:n,labelY:o,labelBgBorderRadius:i,labelBgPadding:a,labelBgStyle:l,labelShowBg:s=!0,labelStyle:u,markerStart:c,markerEnd:d,interactionWidth:g=20},{attrs:v}){return[r.h("path",{style:v.style,class:["vue-flow__edge-path",v.class].join(" "),d:e,"marker-end":d,"marker-start":c}),g?r.h("path",{d:e,fill:"none","stroke-opacity":0,"stroke-width":g}):null,t&&_e(n)&&_e(o)?r.h(Oi,{x:n,y:o,label:t,labelStyle:u,labelShowBg:s,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:i}):null]};Zt.props=["path","labelX","labelY","label","labelBgBorderRadius","labelBgPadding","labelBgStyle","labelShowBg","labelStyle","markerStart","markerEnd","interactionWidth"];Zt.inheritAttrs=!1;Zt.compatConfig={MODE:3};const dt=Zt;function Zn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const i=Math.abs(n-e)/2,a=n<e?n+i:n-i,l=Math.abs(o-t)/2,s=o<t?o+l:o-l;return[a,s,i,l]}function Kn({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:s}){const u=e*.125+i*.375+l*.375+n*.125,c=t*.125+a*.375+s*.375+o*.125,d=Math.abs(u-e),g=Math.abs(c-t);return[u,c,d,g]}function vt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function So({pos:e,x1:t,y1:n,x2:o,y2:i,c:a}){let l,s;switch(e){case q.Left:l=t-vt(t-o,a),s=n;break;case q.Right:l=t+vt(o-t,a),s=n;break;case q.Top:l=t,s=n-vt(n-i,a);break;case q.Bottom:l=t,s=n+vt(i-n,a);break}return[l,s]}function $t({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top,curvature:l=.25}){const[s,u]=So({pos:n,x1:e,y1:t,x2:o,y2:i,c:l}),[c,d]=So({pos:a,x1:o,y1:i,x2:e,y2:t,c:l}),[g,v,E,h]=Kn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${e},${t} C${s},${u} ${c},${d} ${o},${i}`,g,v,E,h]}const Kt=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,l]=$t({sourcePosition:e,targetPosition:t,...n});return r.h(dt,{path:i,labelX:a,labelY:l,...n,...o})};Kt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"];Kt.inheritAttrs=!1;Kt.compatConfig={MODE:3};const Ri=Kt;function No({pos:e,x1:t,y1:n,x2:o,y2:i}){let a,l;switch(e){case q.Left:case q.Right:a=.5*(t+o),l=n;break;case q.Top:case q.Bottom:a=t,l=.5*(n+i);break}return[a,l]}function Wn({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top}){const[l,s]=No({pos:n,x1:e,y1:t,x2:o,y2:i}),[u,c]=No({pos:a,x1:o,y1:i,x2:e,y2:t}),[d,g,v,E]=Kn({sourceX:e,sourceY:t,targetX:o,targetY:i,sourceControlX:l,sourceControlY:s,targetControlX:u,targetControlY:c});return[`M${e},${t} C${l},${s} ${u},${c} ${o},${i}`,d,g,v,E]}const Wt=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,l]=Wn({sourcePosition:e,targetPosition:t,...n});return r.h(dt,{path:i,labelX:a,labelY:l,...n,...o})};Wt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];Wt.inheritAttrs=!1;Wt.compatConfig={MODE:3};const Ti=Wt,Co={[q.Left]:{x:-1,y:0},[q.Right]:{x:1,y:0},[q.Top]:{x:0,y:-1},[q.Bottom]:{x:0,y:1}};function ts({source:e,sourcePosition:t=q.Bottom,target:n}){return t===q.Left||t===q.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function ko(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function ns({source:e,sourcePosition:t=q.Bottom,target:n,targetPosition:o=q.Top,center:i,offset:a}){const l=Co[t],s=Co[o],u={x:e.x+l.x*a,y:e.y+l.y*a},c={x:n.x+s.x*a,y:n.y+s.y*a},d=ts({source:u,sourcePosition:t,target:c}),g=d.x!==0?"x":"y",v=d[g];let E,h,f;const[_,w,N,D]=Zn({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*s[g]===-1){h=i.x||_,f=i.y||w;const M=[{x:h,y:u.y},{x:h,y:c.y}],O=[{x:u.x,y:f},{x:c.x,y:f}];l[g]===v?E=g==="x"?M:O:E=g==="x"?O:M}else{const M=[{x:u.x,y:c.y}],O=[{x:c.x,y:u.y}];if(g==="x"?E=l.x===v?O:M:E=l.y===v?M:O,t!==o){const p=g==="x"?"y":"x",L=l[g]===s[p],B=u[p]>c[p],k=u[p]<c[p];(l[g]===1&&(!L&&B||L&&k)||l[g]!==1&&(!L&&k||L&&B))&&(E=g==="x"?M:O)}h=E[0].x,f=E[0].y}return[[e,u,...E,c,n],h,f,N,D]}function os(e,t,n,o){const i=Math.min(ko(e,t)/2,ko(t,n)/2,o),{x:a,y:l}=t;if(e.x===a&&a===n.x||e.y===l&&l===n.y)return`L${a} ${l}`;if(e.y===l){const c=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${a+i*c},${l}Q ${a},${l} ${a},${l+i*d}`}const s=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${l+i*u}Q ${a},${l} ${a+i*s},${l}`}function Ot({sourceX:e,sourceY:t,sourcePosition:n=q.Bottom,targetX:o,targetY:i,targetPosition:a=q.Top,borderRadius:l=5,centerX:s,centerY:u,offset:c=20}){const[d,g,v,E,h]=ns({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:i},targetPosition:a,center:{x:s,y:u},offset:c});return[d.reduce((_,w,N)=>{let D;return N>0&&N<d.length-1?D=os(d[N-1],w,d[N+1],l):D=`${N===0?"M":"L"}${w.x} ${w.y}`,_+=D,_},""),g,v,E,h]}const qt=function({sourcePosition:e=q.Bottom,targetPosition:t=q.Top,...n},{attrs:o}){const[i,a,l]=Ot({sourcePosition:e,targetPosition:t,...n});return r.h(dt,{path:i,labelX:a,labelY:l,...n,...o})};qt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"];qt.inheritAttrs=!1;qt.compatConfig={MODE:3};const qn=qt,jt=function(e,{attrs:t}){return r.h(qn,{...e,...t,borderRadius:0})};jt.props=["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];jt.inheritAttrs=!1;jt.compatConfig={MODE:3};const Bi=jt;function jn({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[i,a,l,s]=Zn({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,i,a,l,s]}const Qt=function(e,{attrs:t}){const[n,o,i]=jn(e);return r.h(dt,{path:n,labelX:o,labelY:i,...e,...t})};Qt.props=["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"];Qt.inheritAttrs=!1;Qt.compatConfig={MODE:3};const Ii=Qt;function is(e,t,n){return n===q.Left?e-t:n===q.Right?e+t:e}function rs(e,t,n){return n===q.Top?e-t:n===q.Bottom?e+t:e}const Qn=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=q.Top,type:i}){return r.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:is(t,e,o),cy:rs(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Qn.props=["radius","centerX","centerY","position","type"];Qn.compatConfig={MODE:3};const Mo=Qn;function as(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function ls(e,t){const n=as();return n.doubleClick.on(o=>{var i,a;t.edgeDoubleClick(o),(a=(i=e.events)==null?void 0:i.doubleClick)==null||a.call(i,o)}),n.click.on(o=>{var i,a;t.edgeClick(o),(a=(i=e.events)==null?void 0:i.click)==null||a.call(i,o)}),n.mouseEnter.on(o=>{var i,a;t.edgeMouseEnter(o),(a=(i=e.events)==null?void 0:i.mouseEnter)==null||a.call(i,o)}),n.mouseMove.on(o=>{var i,a;t.edgeMouseMove(o),(a=(i=e.events)==null?void 0:i.mouseMove)==null||a.call(i,o)}),n.mouseLeave.on(o=>{var i,a;t.edgeMouseLeave(o),(a=(i=e.events)==null?void 0:i.mouseLeave)==null||a.call(i,o)}),n.contextMenu.on(o=>{var i,a;t.edgeContextMenu(o),(a=(i=e.events)==null?void 0:i.contextMenu)==null||a.call(i,o)}),n.updateStart.on(o=>{var i,a;t.edgeUpdateStart(o),(a=(i=e.events)==null?void 0:i.updateStart)==null||a.call(i,o)}),n.update.on(o=>{var i,a;t.edgeUpdate(o),(a=(i=e.events)==null?void 0:i.update)==null||a.call(i,o)}),n.updateEnd.on(o=>{var i,a;t.edgeUpdateEnd(o),(a=(i=e.events)==null?void 0:i.updateEnd)==null||a.call(i,o)}),Object.entries(n).reduce((o,[i,a])=>(o.emit[i]=a.trigger,o.on[i]=a.on,o),{emit:{},on:{}})}const ss=r.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["name","type","id","updatable","selectable","focusable","edge"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:i,emits:a,nodesSelectionActive:l,noPanClassName:s,getEdgeTypes:u,removeSelectedEdges:c,findEdge:d,findNode:g,isValidConnection:v}=ie(),E=ls(e.edge,a),h=qe(e,"edge");let f=r.ref(!1),_=r.ref(!1);const w=r.ref(""),N=r.ref(null),D=r.ref("source"),x=r.ref();r.provide(ii,e.id),r.provide(ri,x);const M=r.computed(()=>h.value.class instanceof Function?h.value.class(h.value):h.value.class),O=r.computed(()=>h.value.style instanceof Function?h.value.style(h.value):h.value.style),{handlePointerDown:p}=Gn({nodeId:w,handleId:N,type:D,isValidConnection:v.value,edgeUpdaterType:D,onEdgeUpdate:k,onEdgeUpdateEnd:V});return()=>{const I=g(h.value.source),Q=g(h.value.target);if(!I||!Q||!h.value)return null;let U;o.value===$e.Strict?U=I.handleBounds.source:U=[...I.handleBounds.source||[],...I.handleBounds.target||[]];const W=mo(U,h.value.sourceHandle);let $;o.value===$e.Strict?$=Q.handleBounds.target:$=[...Q.handleBounds.target||[],...Q.handleBounds.source||[]];const G=mo($,h.value.targetHandle),m=W?W.position:q.Bottom,b=G?G.position:q.Top,{sourceX:F,sourceY:R,targetY:A,targetX:C}=Fr(I,W,m,Q,G,b);return h.value.sourceX=F,h.value.sourceY=R,h.value.targetX=C,h.value.targetY=A,r.h("g",{ref:x,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${e.type===!1?"default":e.name}`,s.value,M.value,{updating:f.value,selected:h.value.selected,animated:h.value.animated,inactive:!e.selectable}],onClick:J,onContextmenu:y,onDblclick:z,onMouseenter:S,onMousemove:H,onMouseleave:X,onKeyDown:e.focusable?Z:void 0,tabIndex:e.focusable?0:void 0,"aria-label":h.value.ariaLabel===null?void 0:h.value.ariaLabel||`Edge from ${h.value.source} to ${h.value.target}`,"aria-describedby":e.focusable?`${Mi}-${t}`:void 0,role:e.focusable?"button":void 0},[_.value?null:r.h(e.type===!1?u.value.default:e.type,{id:e.id,sourceNode:I,targetNode:Q,source:h.value.source,target:h.value.target,type:h.value.type,updatable:e.updatable,selected:h.value.selected,animated:h.value.animated,label:h.value.label,labelStyle:h.value.labelStyle,labelShowBg:h.value.labelShowBg,labelBgStyle:h.value.labelBgStyle,labelBgPadding:h.value.labelBgPadding,labelBgBorderRadius:h.value.labelBgBorderRadius,data:h.value.data,events:{...h.value.events,...E.on},style:O.value,markerStart:`url(#${Me(h.value.markerStart,t)})`,markerEnd:`url(#${Me(h.value.markerEnd,t)})`,sourcePosition:m,targetPosition:b,sourceX:F,sourceY:R,targetX:C,targetY:A,sourceHandleId:h.value.sourceHandle,targetHandleId:h.value.targetHandle,interactionWidth:h.value.interactionWidth}),[e.updatable==="source"||e.updatable===!0?[r.h("g",{onMousedown:K,onMouseenter:L,onMouseout:B},r.h(Mo,{position:m,centerX:F,centerY:R,radius:i.value,type:"source","data-type":"source"}))]:null,e.updatable==="target"||e.updatable===!0?[r.h("g",{onMousedown:T,onMouseenter:L,onMouseout:B},r.h(Mo,{position:b,centerX:C,centerY:A,radius:i.value,type:"target","data-type":"target"}))]:null]])};function L(){f.value=!0}function B(){f.value=!1}function k(I,Q){E.emit.update({event:I,edge:h.value,connection:Q})}function V(I){E.emit.updateEnd({event:I,edge:h.value}),_.value=!1}function j(I,Q){I.button===0&&(_.value=!0,w.value=Q?h.value.target:h.value.source,N.value=(Q?h.value.targetHandle:h.value.sourceHandle)??"",D.value=Q?"target":"source",E.emit.updateStart({event:I,edge:h.value}),p(I))}function J(I){const Q={event:I,edge:h.value};e.selectable&&(l.value=!1,n([h.value])),E.emit.click(Q)}function y(I){E.emit.contextMenu({event:I,edge:h.value})}function z(I){E.emit.doubleClick({event:I,edge:h.value})}function S(I){E.emit.mouseEnter({event:I,edge:h.value})}function H(I){E.emit.mouseMove({event:I,edge:h.value})}function X(I){E.emit.mouseLeave({event:I,edge:h.value})}function K(I){j(I,!0)}function T(I){j(I,!1)}function Z(I){var Q;$i.includes(I.key)&&e.selectable&&(I.key==="Escape"?((Q=x.value)==null||Q.blur(),c([d(e.id)])):n([d(e.id)]))}}}),us=ss,cs={height:"0",width:"0"},ds={name:"EdgeLabelRenderer",compatConfig:{MODE:3}},fs=r.defineComponent({...ds,setup(e){const{viewportRef:t}=ie(),n=r.computed(()=>{var o;return(o=t.value)==null?void 0:o.getElementsByClassName("vue-flow__edge-labels")[0]});return(o,i)=>(r.openBlock(),r.createElementBlock("svg",null,[(r.openBlock(),r.createElementBlock("foreignObject",cs,[(r.openBlock(),r.createBlock(r.Teleport,{to:r.unref(n),disabled:!r.unref(n)},[r.renderSlot(o.$slots,"default")],8,["to","disabled"]))]))]))}}),hs={class:"vue-flow__connection"},gs=["d","marker-end","marker-start"],vs={name:"ConnectionLine",compatConfig:{MODE:3}},ms=r.defineComponent({...vs,props:{sourceNode:null},setup(e){var B;const t=ie(),n=r.toRef(t,"connectionMode"),o=r.toRef(t,"connectionStartHandle"),i=r.toRef(t,"connectionEndHandle"),a=r.toRef(t,"connectionPosition"),l=r.toRef(t,"connectionLineType"),s=r.toRef(t,"connectionLineStyle"),u=r.toRef(t,"connectionLineOptions"),c=r.toRef(t,"connectionStatus"),d=r.toRef(t,"viewport"),g=r.toRef(t,"findNode"),v={[q.Left]:q.Right,[q.Right]:q.Left,[q.Top]:q.Bottom,[q.Bottom]:q.Top},E=(B=r.inject(Ft))==null?void 0:B["connection-line"],h=r.computed(()=>o.value.handleId),f=r.computed(()=>o.value.type),_=r.computed(()=>{var k;return((k=i.value)==null?void 0:k.handleId)&&g.value(i.value.nodeId)||null}),w=r.computed(()=>{var k,V;return(n.value===$e.Strict?(k=e.sourceNode.handleBounds[f.value])==null?void 0:k.find(j=>j.id===h.value):[...e.sourceNode.handleBounds.source||[],...e.sourceNode.handleBounds.target||[]].find(j=>j.id===h.value))||((V=e.sourceNode.handleBounds[f.value??"source"])==null?void 0:V[0])}),N=r.computed(()=>{var k,V,j;return _.value&&((k=i.value)==null?void 0:k.handleId)&&((n.value===$e.Strict?(V=_.value.handleBounds[f.value==="source"?"target":"source"])==null?void 0:V.find(J=>{var y;return J.id===((y=i.value)==null?void 0:y.handleId)}):[..._.value.handleBounds.source||[],..._.value.handleBounds.target||[]].find(J=>{var y;return J.id===((y=i.value)==null?void 0:y.handleId)}))||((j=_.value.handleBounds[f.value??"target"])==null?void 0:j[0]))||null}),D=r.computed(()=>{var k;return(k=w.value)==null?void 0:k.position}),x=r.computed(()=>w.value?kt(D.value||q.Top,{...e.sourceNode.dimensions,...e.sourceNode.computedPosition},w.value):{x:e.sourceNode.dimensions.width/2,y:e.sourceNode.dimensions.height/2}),M=r.computed(()=>D.value?v[D.value]:void 0),O=r.computed(()=>(a.value.x-d.value.x)/d.value.zoom),p=r.computed(()=>(a.value.y-d.value.y)/d.value.zoom),L=r.computed(()=>{let k;const V={sourceX:x.value.x,sourceY:x.value.y,sourcePosition:D.value,targetX:O.value,targetY:p.value,targetPosition:M.value};switch(l.value??u.value.type){case ke.Bezier:[k]=$t(V);break;case ke.Step:[k]=Ot({...V,borderRadius:0});break;case ke.SmoothStep:[k]=Ot(V);break;case ke.SimpleBezier:[k]=Wn(V);break;case ke.Straight:[k]=jn(V);break;default:[k]=$t(V);break}return k});return(k,V)=>{var j;return r.openBlock(),r.createElementBlock("g",hs,[r.unref(E)?(r.openBlock(),r.createBlock(r.resolveDynamicComponent(r.unref(E)),r.normalizeProps(r.mergeProps({key:0},{sourceX:r.unref(x).x,sourceY:r.unref(x).y,sourcePosition:(j=r.unref(w))==null?void 0:j.position,targetX:r.unref(O),targetY:r.unref(p),targetPosition:r.unref(M),sourceNode:e.sourceNode,sourceHandle:r.unref(w),targetNode:r.unref(_),targetHandle:r.unref(N),markerEnd:`url(#${r.unref(Me)(r.unref(u).markerEnd)})`,markerStart:`url(#${r.unref(Me)(r.unref(u).markerStart)})`,connectionStatus:r.unref(c)})),null,16)):(r.openBlock(),r.createElementBlock("path",{key:1,d:r.unref(L),class:r.normalizeClass(["vue-flow__connection-path",[r.unref(u).class,r.unref(c)]]),style:r.normalizeStyle(r.unref(s)||r.unref(u).style||{}),"marker-end":`url(#${r.unref(Me)(r.unref(u).markerEnd)})`,"marker-start":`url(#${r.unref(Me)(r.unref(u).markerStart)})`},null,14,gs))])}}}),ps=["tabIndex"],ys={name:"NodesSelection",compatConfig:{MODE:3}},xs=r.defineComponent({...ys,setup(e){const t=ie(),n=r.toRef(t,"emits"),o=r.toRef(t,"viewport"),i=r.toRef(t,"getSelectedNodes"),a=r.toRef(t,"noPanClassName"),l=r.toRef(t,"disableKeyboardA11y"),s=r.toRef(t,"userSelectionActive"),u=ci(),c=r.ref(),d=Ci({el:c,onStart(f){n.value.selectionDragStart(f)},onDrag(f){n.value.selectionDrag(f)},onStop(f){n.value.selectionDragStop(f)}});r.onMounted(()=>{var f;l.value||(f=c.value)==null||f.focus({preventScroll:!0})});const g=r.computed(()=>Vt(i.value)),v=r.computed(()=>({width:`${g.value.width}px`,height:`${g.value.height}px`,top:`${g.value.y}px`,left:`${g.value.x}px`}));function E(f){n.value.selectionContextMenu({event:f,nodes:i.value})}function h(f){l.value||Fe[f.key]&&u({x:Fe[f.key].x,y:Fe[f.key].y},f.shiftKey)}return(f,_)=>!r.unref(s)&&r.unref(g).width&&r.unref(g).height?(r.openBlock(),r.createElementBlock("div",{key:0,class:r.normalizeClass(["vue-flow__nodesselection vue-flow__container",r.unref(a)]),style:r.normalizeStyle({transform:`translate(${r.unref(o).x}px,${r.unref(o).y}px) scale(${r.unref(o).zoom})`})},[r.createElementVNode("div",{ref_key:"el",ref:c,class:r.normalizeClass([{dragging:r.unref(d)},"vue-flow__nodesselection-rect"]),style:r.normalizeStyle(r.unref(v)),tabIndex:r.unref(l)?void 0:-1,onContextmenu:E,onKeydown:h},null,46,ps)],6)):r.createCommentVNode("",!0)}}),ws={name:"UserSelection",compatConfig:{MODE:3}},_s=r.defineComponent({...ws,setup(e){const{userSelectionRect:t}=ie();return(n,o)=>{var i,a,l,s;return r.openBlock(),r.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:r.normalizeStyle({width:`${(i=r.unref(t))==null?void 0:i.width}px`,height:`${(a=r.unref(t))==null?void 0:a.height}px`,transform:`translate(${(l=r.unref(t))==null?void 0:l.x}px, ${(s=r.unref(t))==null?void 0:s.y}px)`})},null,4)}}}),Pi={input:jr,default:qr,output:Qr},Di={default:Ri,straight:Ii,step:Bi,smoothstep:qn,simplebezier:Ti};function Es(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Ht.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:et.Free,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ke.Bezier,style:{}},connectionMode:$e.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:"Meta",zoomActivationKeyCode:"Meta",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:$r(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,disableKeyboardA11y:!1,ariaLiveMessage:"",__experimentalFeatures:{nestedFlow:!1}}}function zi(e){const t=Es();return e&&Object.keys(e).forEach(n=>{const o=e[n];oe(o)&&(t[n]=o)}),t}function bs(e,t,n){const o=r.computed(()=>f=>e.nodes&&!t.value.length?e.nodes.find(_=>_.id===f):e.nodes[t.value.indexOf(f)]),i=r.computed(()=>f=>e.edges&&!n.value.length?e.edges.find(_=>_.id===f):e.edges[n.value.indexOf(f)]),a=r.computed(()=>{var w;const f={...Di,...e.edgeTypes},_=Object.keys(f);return(w=e.edges)==null||w.forEach(N=>N.type&&!_.includes(N.type)&&(f[N.type]=N.type)),f}),l=r.computed(()=>{var w;const f={...Pi,...e.nodeTypes},_=Object.keys(f);return(w=e.nodes)==null||w.forEach(N=>N.type&&!_.includes(N.type)&&(f[N.type]=N.type)),f}),s=r.computed(()=>{const f=e.nodes.filter(_=>!_.hidden);return e.onlyRenderVisibleElements?f&&Hn(f,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):f??[]}),u=(f,_,w)=>{if(_=_??o.value(f.source),w=w??o.value(f.target),!_||!w){e.hooks.error.trigger(new le(ae.EDGE_ORPHANED,f.id));return}return!f.hidden&&!w.hidden&&!_.hidden},c=r.computed(()=>e.onlyRenderVisibleElements?e.edges.filter(f=>{const _=o.value(f.source),w=o.value(f.target);return u(f,_,w)&&Lr({sourcePos:_.computedPosition||{x:0,y:0},targetPos:w.computedPosition||{x:0,y:0},sourceWidth:_.dimensions.width,sourceHeight:_.dimensions.height,targetWidth:w.dimensions.width,targetHeight:w.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})}):e.edges.filter(f=>u(f))),d=r.computed(()=>[...s.value,...c.value]),g=r.computed(()=>e.nodes.filter(f=>f.selected)),v=r.computed(()=>e.edges.filter(f=>f.selected)),E=r.computed(()=>[...g.value??[],...v.value??[]]),h=r.computed(()=>s.value.filter(f=>f.initialized&&f.handleBounds!==void 0));return{getNode:o,getEdge:i,getElements:d,getEdgeTypes:a,getNodeTypes:l,getEdges:c,getNodes:s,getSelectedElements:E,getSelectedNodes:g,getSelectedEdges:v,getNodesInitialized:h}}function Jn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ai(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ft(){}var ot=.7,Rt=1/ot,Le="\\s*([+-]?\\d+)\\s*",it="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ss=/^#([0-9a-f]{3,8})$/,Ns=new RegExp(`^rgb\\(${Le},${Le},${Le}\\)$`),Cs=new RegExp(`^rgb\\(${pe},${pe},${pe}\\)$`),ks=new RegExp(`^rgba\\(${Le},${Le},${Le},${it}\\)$`),Ms=new RegExp(`^rgba\\(${pe},${pe},${pe},${it}\\)$`),$s=new RegExp(`^hsl\\(${it},${pe},${pe}\\)$`),Os=new RegExp(`^hsla\\(${it},${pe},${pe},${it}\\)$`),$o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jn(ft,rt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Oo,formatHex:Oo,formatHex8:Rs,formatHsl:Ts,formatRgb:Ro,toString:Ro});function Oo(){return this.rgb().formatHex()}function Rs(){return this.rgb().formatHex8()}function Ts(){return Vi(this).formatHsl()}function Ro(){return this.rgb().formatRgb()}function rt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ss.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?To(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ns.exec(e))?new se(t[1],t[2],t[3],1):(t=Cs.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ks.exec(e))?mt(t[1],t[2],t[3],t[4]):(t=Ms.exec(e))?mt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$s.exec(e))?Po(t[1],t[2]/100,t[3]/100,1):(t=Os.exec(e))?Po(t[1],t[2]/100,t[3]/100,t[4]):$o.hasOwnProperty(e)?To($o[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function To(e){return new se(e>>16&255,e>>8&255,e&255,1)}function mt(e,t,n,o){return o<=0&&(e=t=n=NaN),new se(e,t,n,o)}function Bs(e){return e instanceof ft||(e=rt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Cn(e,t,n,o){return arguments.length===1?Bs(e):new se(e,t,n,o??1)}function se(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Jn(se,Cn,Ai(ft,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Ie(this.r),Ie(this.g),Ie(this.b),Tt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bo,formatHex:Bo,formatHex8:Is,formatRgb:Io,toString:Io}));function Bo(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}`}function Is(){return`#${Te(this.r)}${Te(this.g)}${Te(this.b)}${Te((isNaN(this.opacity)?1:this.opacity)*255)}`}function Io(){const e=Tt(this.opacity);return`${e===1?"rgb(":"rgba("}${Ie(this.r)}, ${Ie(this.g)}, ${Ie(this.b)}${e===1?")":`, ${e})`}`}function Tt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ie(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Te(e){return e=Ie(e),(e<16?"0":"")+e.toString(16)}function Po(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new he(e,t,n,o)}function Vi(e){if(e instanceof he)return new he(e.h,e.s,e.l,e.opacity);if(e instanceof ft||(e=rt(e)),!e)return new he;if(e instanceof he)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),a=Math.max(t,n,o),l=NaN,s=a-i,u=(a+i)/2;return s?(t===a?l=(n-o)/s+(n<o)*6:n===a?l=(o-t)/s+2:l=(t-n)/s+4,s/=u<.5?a+i:2-a-i,l*=60):s=u>0&&u<1?0:l,new he(l,s,u,e.opacity)}function Ps(e,t,n,o){return arguments.length===1?Vi(e):new he(e,t,n,o??1)}function he(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Jn(he,Ps,Ai(ft,{brighter(e){return e=e==null?Rt:Math.pow(Rt,e),new he(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ot:Math.pow(ot,e),new he(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new se(ln(e>=240?e-240:e+120,i,o),ln(e,i,o),ln(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new he(Do(this.h),pt(this.s),pt(this.l),Tt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Tt(this.opacity);return`${e===1?"hsl(":"hsla("}${Do(this.h)}, ${pt(this.s)*100}%, ${pt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Do(e){return e=(e||0)%360,e<0?e+360:e}function pt(e){return Math.max(0,Math.min(1,e||0))}function ln(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Hi=e=>()=>e;function Ds(e,t){return function(n){return e+n*t}}function zs(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function As(e){return(e=+e)==1?Fi:function(t,n){return n-t?zs(t,n,e):Hi(isNaN(t)?n:t)}}function Fi(e,t){var n=t-e;return n?Ds(e,n):Hi(isNaN(e)?t:e)}const zo=function e(t){var n=As(t);function o(i,a){var l=n((i=Cn(i)).r,(a=Cn(a)).r),s=n(i.g,a.g),u=n(i.b,a.b),c=Fi(i.opacity,a.opacity);return function(d){return i.r=l(d),i.g=s(d),i.b=u(d),i.opacity=c(d),i+""}}return o.gamma=e,o}(1);function Ce(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var kn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(kn.source,"g");function Vs(e){return function(){return e}}function Hs(e){return function(t){return e(t)+""}}function Fs(e,t){var n=kn.lastIndex=sn.lastIndex=0,o,i,a,l=-1,s=[],u=[];for(e=e+"",t=t+"";(o=kn.exec(e))&&(i=sn.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[l]?s[l]+=a:s[++l]=a),(o=o[0])===(i=i[0])?s[l]?s[l]+=i:s[++l]=i:(s[++l]=null,u.push({i:l,x:Ce(o,i)})),n=sn.lastIndex;return n<t.length&&(a=t.slice(n),s[l]?s[l]+=a:s[++l]=a),s.length<2?u[0]?Hs(u[0].x):Vs(t):(t=u.length,function(c){for(var d=0,g;d<t;++d)s[(g=u[d]).i]=g.x(c);return s.join("")})}var Ao=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Li(e,t,n,o,i,a){var l,s,u;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,u/=s),e*o<t*n&&(e=-e,t=-t,u=-u,l=-l),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Ao,skewX:Math.atan(u)*Ao,scaleX:l,scaleY:s}}var yt;function Ls(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Mn:Li(t.a,t.b,t.c,t.d,t.e,t.f)}function Gs(e){return e==null||(yt||(yt=document.createElementNS("http://www.w3.org/2000/svg","g")),yt.setAttribute("transform",e),!(e=yt.transform.baseVal.consolidate()))?Mn:(e=e.matrix,Li(e.a,e.b,e.c,e.d,e.e,e.f))}function Gi(e,t,n,o){function i(c){return c.length?c.pop()+" ":""}function a(c,d,g,v,E,h){if(c!==g||d!==v){var f=E.push("translate(",null,t,null,n);h.push({i:f-4,x:Ce(c,g)},{i:f-2,x:Ce(d,v)})}else(g||v)&&E.push("translate("+g+t+v+n)}function l(c,d,g,v){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),v.push({i:g.push(i(g)+"rotate(",null,o)-2,x:Ce(c,d)})):d&&g.push(i(g)+"rotate("+d+o)}function s(c,d,g,v){c!==d?v.push({i:g.push(i(g)+"skewX(",null,o)-2,x:Ce(c,d)}):d&&g.push(i(g)+"skewX("+d+o)}function u(c,d,g,v,E,h){if(c!==g||d!==v){var f=E.push(i(E)+"scale(",null,",",null,")");h.push({i:f-4,x:Ce(c,g)},{i:f-2,x:Ce(d,v)})}else(g!==1||v!==1)&&E.push(i(E)+"scale("+g+","+v+")")}return function(c,d){var g=[],v=[];return c=e(c),d=e(d),a(c.translateX,c.translateY,d.translateX,d.translateY,g,v),l(c.rotate,d.rotate,g,v),s(c.skewX,d.skewX,g,v),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,g,v),c=d=null,function(E){for(var h=-1,f=v.length,_;++h<f;)g[(_=v[h]).i]=_.x(E);return g.join("")}}}var Ys=Gi(Ls,"px, ","px)","deg)"),Xs=Gi(Gs,", ",")",")"),Us=1e-12;function Vo(e){return((e=Math.exp(e))+1/e)/2}function Zs(e){return((e=Math.exp(e))-1/e)/2}function Ks(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ws=function e(t,n,o){function i(a,l){var s=a[0],u=a[1],c=a[2],d=l[0],g=l[1],v=l[2],E=d-s,h=g-u,f=E*E+h*h,_,w;if(f<Us)w=Math.log(v/c)/t,_=function(p){return[s+p*E,u+p*h,c*Math.exp(t*p*w)]};else{var N=Math.sqrt(f),D=(v*v-c*c+o*f)/(2*c*n*N),x=(v*v-c*c-o*f)/(2*v*n*N),M=Math.log(Math.sqrt(D*D+1)-D),O=Math.log(Math.sqrt(x*x+1)-x);w=(O-M)/t,_=function(p){var L=p*w,B=Vo(M),k=c/(n*N)*(B*Ks(t*L+M)-Zs(M));return[s+k*E,u+k*h,c*B/Vo(t*L+M)]}}return _.duration=w*1e3*t/Math.SQRT2,_}return i.rho=function(a){var l=Math.max(.001,+a),s=l*l,u=s*s;return e(l,s,u)},i}(Math.SQRT2,2,4);var Ye=0,Ke=0,Ue=0,Yi=1e3,Bt,We,It=0,De=0,Jt=0,at=typeof performance=="object"&&performance.now?performance:Date,Xi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function eo(){return De||(Xi(qs),De=at.now()+Jt)}function qs(){De=0}function Pt(){this._call=this._time=this._next=null}Pt.prototype=Ui.prototype={constructor:Pt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?eo():+n)+(t==null?0:+t),!this._next&&We!==this&&(We?We._next=this:Bt=this,We=this),this._call=e,this._time=n,$n()},stop:function(){this._call&&(this._call=null,this._time=1/0,$n())}};function Ui(e,t,n){var o=new Pt;return o.restart(e,t,n),o}function js(){eo(),++Ye;for(var e=Bt,t;e;)(t=De-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ye}function Ho(){De=(It=at.now())+Jt,Ye=Ke=0;try{js()}finally{Ye=0,Js(),De=0}}function Qs(){var e=at.now(),t=e-It;t>Yi&&(Jt-=t,It=e)}function Js(){for(var e,t=Bt,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bt=n);We=e,$n(o)}function $n(e){if(!Ye){Ke&&(Ke=clearTimeout(Ke));var t=e-De;t>24?(e<1/0&&(Ke=setTimeout(Ho,e-at.now()-Jt)),Ue&&(Ue=clearInterval(Ue))):(Ue||(It=at.now(),Ue=setInterval(Qs,Yi)),Ye=1,Xi(Ho))}}function Fo(e,t,n){var o=new Pt;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var eu=Xt("start","end","cancel","interrupt"),tu=[],Zi=0,Lo=1,On=2,_t=3,Go=4,Rn=5,Et=6;function en(e,t,n,o,i,a){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;nu(e,n,{name:t,index:o,group:i,on:eu,tween:tu,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Zi})}function to(e,t){var n=ve(e,t);if(n.state>Zi)throw new Error("too late; already scheduled");return n}function ye(e,t){var n=ve(e,t);if(n.state>_t)throw new Error("too late; already running");return n}function ve(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function nu(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Ui(a,0,n.time);function a(c){n.state=Lo,n.timer.restart(l,n.delay,n.time),n.delay<=c&&l(c-n.delay)}function l(c){var d,g,v,E;if(n.state!==Lo)return u();for(d in o)if(E=o[d],E.name===n.name){if(E.state===_t)return Fo(l);E.state===Go?(E.state=Et,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete o[d]):+d<t&&(E.state=Et,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete o[d])}if(Fo(function(){n.state===_t&&(n.state=Go,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=On,n.on.call("start",e,e.__data__,n.index,n.group),n.state===On){for(n.state=_t,i=new Array(v=n.tween.length),d=0,g=-1;d<v;++d)(E=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(i[++g]=E);i.length=g+1}}function s(c){for(var d=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Rn,1),g=-1,v=i.length;++g<v;)i[g].call(e,d);n.state===Rn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Et,n.timer.stop(),delete o[t];for(var c in o)return;delete e.__transition}}function bt(e,t){var n=e.__transition,o,i,a=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((o=n[l]).name!==t){a=!1;continue}i=o.state>On&&o.state<Rn,o.state=Et,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[l]}a&&delete e.__transition}}function ou(e){return this.each(function(){bt(this,e)})}function iu(e,t){var n,o;return function(){var i=ye(this,e),a=i.tween;if(a!==n){o=n=a;for(var l=0,s=o.length;l<s;++l)if(o[l].name===t){o=o.slice(),o.splice(l,1);break}}i.tween=o}}function ru(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var a=ye(this,e),l=a.tween;if(l!==o){i=(o=l).slice();for(var s={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=s;break}u===c&&i.push(s)}a.tween=i}}function au(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=ve(this.node(),n).tween,i=0,a=o.length,l;i<a;++i)if((l=o[i]).name===e)return l.value;return null}return this.each((t==null?iu:ru)(n,e,t))}function no(e,t,n){var o=e._id;return e.each(function(){var i=ye(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ve(i,o).value[t]}}function Ki(e,t){var n;return(typeof t=="number"?Ce:t instanceof rt?zo:(n=rt(t))?(t=n,zo):Fs)(e,t)}function lu(e){return function(){this.removeAttribute(e)}}function su(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uu(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttribute(e);return l===i?null:l===o?a:a=t(o=l,n)}}function cu(e,t,n){var o,i=n+"",a;return function(){var l=this.getAttributeNS(e.space,e.local);return l===i?null:l===o?a:a=t(o=l,n)}}function du(e,t,n){var o,i,a;return function(){var l,s=n(this),u;return s==null?void this.removeAttribute(e):(l=this.getAttribute(e),u=s+"",l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s)))}}function fu(e,t,n){var o,i,a;return function(){var l,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),u=s+"",l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s)))}}function hu(e,t){var n=Ut(e),o=n==="transform"?Xs:Ki;return this.attrTween(e,typeof t=="function"?(n.local?fu:du)(n,o,no(this,"attr."+e,t)):t==null?(n.local?su:lu)(n):(n.local?cu:uu)(n,o,t))}function gu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function vu(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mu(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&vu(e,a)),n}return i._value=t,i}function pu(e,t){var n,o;function i(){var a=t.apply(this,arguments);return a!==o&&(n=(o=a)&&gu(e,a)),n}return i._value=t,i}function yu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Ut(e);return this.tween(n,(o.local?mu:pu)(o,t))}function xu(e,t){return function(){to(this,e).delay=+t.apply(this,arguments)}}function wu(e,t){return t=+t,function(){to(this,e).delay=t}}function _u(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?xu:wu)(t,e)):ve(this.node(),t).delay}function Eu(e,t){return function(){ye(this,e).duration=+t.apply(this,arguments)}}function bu(e,t){return t=+t,function(){ye(this,e).duration=t}}function Su(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Eu:bu)(t,e)):ve(this.node(),t).duration}function Nu(e,t){if(typeof t!="function")throw new Error;return function(){ye(this,e).ease=t}}function Cu(e){var t=this._id;return arguments.length?this.each(Nu(t,e)):ve(this.node(),t).ease}function ku(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ye(this,e).ease=n}}function Mu(e){if(typeof e!="function")throw new Error;return this.each(ku(this._id,e))}function $u(e){typeof e!="function"&&(e=gi(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var a=t[i],l=a.length,s=o[i]=[],u,c=0;c<l;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new Ne(o,this._parents,this._name,this._id)}function Ou(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,a=Math.min(o,i),l=new Array(o),s=0;s<a;++s)for(var u=t[s],c=n[s],d=u.length,g=l[s]=new Array(d),v,E=0;E<d;++E)(v=u[E]||c[E])&&(g[E]=v);for(;s<o;++s)l[s]=t[s];return new Ne(l,this._parents,this._name,this._id)}function Ru(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Tu(e,t,n){var o,i,a=Ru(t)?to:ye;return function(){var l=a(this,e),s=l.on;s!==o&&(i=(o=s).copy()).on(t,n),l.on=i}}function Bu(e,t){var n=this._id;return arguments.length<2?ve(this.node(),n).on.on(e):this.each(Tu(n,e,t))}function Iu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Pu(){return this.on("end.remove",Iu(this._id))}function Du(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xn(e));for(var o=this._groups,i=o.length,a=new Array(i),l=0;l<i;++l)for(var s=o[l],u=s.length,c=a[l]=new Array(u),d,g,v=0;v<u;++v)(d=s[v])&&(g=e.call(d,d.__data__,v,s))&&("__data__"in d&&(g.__data__=d.__data__),c[v]=g,en(c[v],t,n,v,c,ve(d,n)));return new Ne(a,this._parents,t,n)}function zu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hi(e));for(var o=this._groups,i=o.length,a=[],l=[],s=0;s<i;++s)for(var u=o[s],c=u.length,d,g=0;g<c;++g)if(d=u[g]){for(var v=e.call(d,d.__data__,g,u),E,h=ve(d,n),f=0,_=v.length;f<_;++f)(E=v[f])&&en(E,t,n,f,v,h);a.push(v),l.push(d)}return new Ne(a,l,t,n)}var Au=ct.prototype.constructor;function Vu(){return new Au(this._groups,this._parents)}function Hu(e,t){var n,o,i;return function(){var a=Ge(this,e),l=(this.style.removeProperty(e),Ge(this,e));return a===l?null:a===n&&l===o?i:i=t(n=a,o=l)}}function Wi(e){return function(){this.style.removeProperty(e)}}function Fu(e,t,n){var o,i=n+"",a;return function(){var l=Ge(this,e);return l===i?null:l===o?a:a=t(o=l,n)}}function Lu(e,t,n){var o,i,a;return function(){var l=Ge(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Ge(this,e))),l===u?null:l===o&&u===i?a:(i=u,a=t(o=l,s))}}function Gu(e,t){var n,o,i,a="style."+t,l="end."+a,s;return function(){var u=ye(this,e),c=u.on,d=u.value[a]==null?s||(s=Wi(t)):void 0;(c!==n||i!==d)&&(o=(n=c).copy()).on(l,i=d),u.on=o}}function Yu(e,t,n){var o=(e+="")=="transform"?Ys:Ki;return t==null?this.styleTween(e,Hu(e,o)).on("end.style."+e,Wi(e)):typeof t=="function"?this.styleTween(e,Lu(e,o,no(this,"style."+e,t))).each(Gu(this._id,e)):this.styleTween(e,Fu(e,o,t),n).on("end.style."+e,null)}function Xu(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Uu(e,t,n){var o,i;function a(){var l=t.apply(this,arguments);return l!==i&&(o=(i=l)&&Xu(e,l,n)),o}return a._value=t,a}function Zu(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Uu(e,t,n??""))}function Ku(e){return function(){this.textContent=e}}function Wu(e){return function(){var t=e(this);this.textContent=t??""}}function qu(e){return this.tween("text",typeof e=="function"?Wu(no(this,"text",e)):Ku(e==null?"":e+""))}function ju(e){return function(t){this.textContent=e.call(this,t)}}function Qu(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ju(i)),t}return o._value=e,o}function Ju(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qu(e))}function ec(){for(var e=this._name,t=this._id,n=qi(),o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,u,c=0;c<s;++c)if(u=l[c]){var d=ve(u,t);en(u,e,n,c,l,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ne(o,this._parents,e,n)}function tc(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(a,l){var s={value:l},u={value:function(){--i===0&&a()}};n.each(function(){var c=ye(this,o),d=c.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),i===0&&a()})}var nc=0;function Ne(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function qi(){return++nc}var xe=ct.prototype;Ne.prototype={constructor:Ne,select:Du,selectAll:zu,selectChild:xe.selectChild,selectChildren:xe.selectChildren,filter:$u,merge:Ou,selection:Vu,transition:ec,call:xe.call,nodes:xe.nodes,node:xe.node,size:xe.size,empty:xe.empty,each:xe.each,on:Bu,attr:hu,attrTween:yu,style:Yu,styleTween:Zu,text:qu,textTween:Ju,remove:Pu,tween:au,delay:_u,duration:Su,ease:Cu,easeVarying:Mu,end:tc,[Symbol.iterator]:xe[Symbol.iterator]};function oc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ic={time:null,delay:0,duration:250,ease:oc};function rc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ac(e){var t,n;e instanceof Ne?(t=e._id,e=e._name):(t=qi(),(n=ic).time=eo(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,a=0;a<i;++a)for(var l=o[a],s=l.length,u,c=0;c<s;++c)(u=l[c])&&en(u,e,t,c,l,n||rc(u,t));return new Ne(o,this._parents,e,t)}ct.prototype.interrupt=ou;ct.prototype.transition=ac;const xt=e=>()=>e;function lc(e,{sourceEvent:t,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function be(e,t,n){this.k=e,this.x=t,this.y=n}be.prototype={constructor:be,scale:function(e){return e===1?this:new be(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new be(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xe=new be(1,0,0);be.prototype;function un(e){e.stopImmediatePropagation()}function Ze(e){e.preventDefault(),e.stopImmediatePropagation()}function sc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function uc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Yo(){return this.__zoom||Xe}function cc(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function dc(){return navigator.maxTouchPoints||"ontouchstart"in this}function fc(e,t,n){var o=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),l>a?(a+l)/2:Math.min(0,a)||Math.max(0,l))}function hc(){var e=sc,t=uc,n=fc,o=cc,i=dc,a=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,u=Ws,c=Xt("start","zoom","end"),d,g,v,E=500,h=150,f=0,_=10;function w(y){y.property("__zoom",Yo).on("wheel.zoom",L,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",k).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",J).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}w.transform=function(y,z,S,H){var X=y.selection?y.selection():y;X.property("__zoom",Yo),y!==X?M(y,z,S,H):X.interrupt().each(function(){O(this,arguments).event(H).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},w.scaleBy=function(y,z,S,H){w.scaleTo(y,function(){var X=this.__zoom.k,K=typeof z=="function"?z.apply(this,arguments):z;return X*K},S,H)},w.scaleTo=function(y,z,S,H){w.transform(y,function(){var X=t.apply(this,arguments),K=this.__zoom,T=S==null?x(X):typeof S=="function"?S.apply(this,arguments):S,Z=K.invert(T),I=typeof z=="function"?z.apply(this,arguments):z;return n(D(N(K,I),T,Z),X,l)},S,H)},w.translateBy=function(y,z,S,H){w.transform(y,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),l)},null,H)},w.translateTo=function(y,z,S,H,X){w.transform(y,function(){var K=t.apply(this,arguments),T=this.__zoom,Z=H==null?x(K):typeof H=="function"?H.apply(this,arguments):H;return n(Xe.translate(Z[0],Z[1]).scale(T.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof S=="function"?-S.apply(this,arguments):-S),K,l)},H,X)};function N(y,z){return z=Math.max(a[0],Math.min(a[1],z)),z===y.k?y:new be(z,y.x,y.y)}function D(y,z,S){var H=z[0]-S[0]*y.k,X=z[1]-S[1]*y.k;return H===y.x&&X===y.y?y:new be(y.k,H,X)}function x(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function M(y,z,S,H){y.on("start.zoom",function(){O(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(H).end()}).tween("zoom",function(){var X=this,K=arguments,T=O(X,K).event(H),Z=t.apply(X,K),I=S==null?x(Z):typeof S=="function"?S.apply(X,K):S,Q=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),U=X.__zoom,W=typeof z=="function"?z.apply(X,K):z,$=u(U.invert(I).concat(Q/U.k),W.invert(I).concat(Q/W.k));return function(G){if(G===1)G=W;else{var m=$(G),b=Q/m[2];G=new be(b,I[0]-m[0]*b,I[1]-m[1]*b)}T.zoom(null,G)}})}function O(y,z,S){return!S&&y.__zooming||new p(y,z)}function p(y,z){this.that=y,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,z),this.taps=0}p.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,z){return this.mouse&&y!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var z=fe(this.that).datum();c.call(y,this.that,new lc(y,{sourceEvent:this.sourceEvent,target:w,type:y,transform:this.that.__zoom,dispatch:c}),z)}};function L(y,...z){if(!e.apply(this,arguments))return;var S=O(this,z).event(y),H=this.__zoom,X=Math.max(a[0],Math.min(a[1],H.k*Math.pow(2,o.apply(this,arguments)))),K=me(y);if(S.wheel)(S.mouse[0][0]!==K[0]||S.mouse[0][1]!==K[1])&&(S.mouse[1]=H.invert(S.mouse[0]=K)),clearTimeout(S.wheel);else{if(H.k===X)return;S.mouse=[K,H.invert(K)],bt(this),S.start()}Ze(y),S.wheel=setTimeout(T,h),S.zoom("mouse",n(D(N(H,X),S.mouse[0],S.mouse[1]),S.extent,l));function T(){S.wheel=null,S.end()}}function B(y,...z){if(v||!e.apply(this,arguments))return;var S=y.currentTarget,H=O(this,z,!0).event(y),X=fe(y.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",Q,!0),K=me(y,S),T=y.clientX,Z=y.clientY;Si(y.view),un(y),H.mouse=[K,this.__zoom.invert(K)],bt(this),H.start();function I(U){if(Ze(U),!H.moved){var W=U.clientX-T,$=U.clientY-Z;H.moved=W*W+$*$>f}H.event(U).zoom("mouse",n(D(H.that.__zoom,H.mouse[0]=me(U,S),H.mouse[1]),H.extent,l))}function Q(U){X.on("mousemove.zoom mouseup.zoom",null),Ni(U.view,H.moved),Ze(U),H.event(U).end()}}function k(y,...z){if(e.apply(this,arguments)){var S=this.__zoom,H=me(y.changedTouches?y.changedTouches[0]:y,this),X=S.invert(H),K=S.k*(y.shiftKey?.5:2),T=n(D(N(S,K),H,X),t.apply(this,z),l);Ze(y),s>0?fe(this).transition().duration(s).call(M,T,H,y):fe(this).call(w.transform,T,H,y)}}function V(y,...z){if(e.apply(this,arguments)){var S=y.touches,H=S.length,X=O(this,z,y.changedTouches.length===H).event(y),K,T,Z,I;for(un(y),T=0;T<H;++T)Z=S[T],I=me(Z,this),I=[I,this.__zoom.invert(I),Z.identifier],X.touch0?!X.touch1&&X.touch0[2]!==I[2]&&(X.touch1=I,X.taps=0):(X.touch0=I,K=!0,X.taps=1+!!d);d&&(d=clearTimeout(d)),K&&(X.taps<2&&(g=I[0],d=setTimeout(function(){d=null},E)),bt(this),X.start())}}function j(y,...z){if(this.__zooming){var S=O(this,z).event(y),H=y.changedTouches,X=H.length,K,T,Z,I;for(Ze(y),K=0;K<X;++K)T=H[K],Z=me(T,this),S.touch0&&S.touch0[2]===T.identifier?S.touch0[0]=Z:S.touch1&&S.touch1[2]===T.identifier&&(S.touch1[0]=Z);if(T=S.that.__zoom,S.touch1){var Q=S.touch0[0],U=S.touch0[1],W=S.touch1[0],$=S.touch1[1],G=(G=W[0]-Q[0])*G+(G=W[1]-Q[1])*G,m=(m=$[0]-U[0])*m+(m=$[1]-U[1])*m;T=N(T,Math.sqrt(G/m)),Z=[(Q[0]+W[0])/2,(Q[1]+W[1])/2],I=[(U[0]+$[0])/2,(U[1]+$[1])/2]}else if(S.touch0)Z=S.touch0[0],I=S.touch0[1];else return;S.zoom("touch",n(D(T,Z,I),S.extent,l))}}function J(y,...z){if(this.__zooming){var S=O(this,z).event(y),H=y.changedTouches,X=H.length,K,T;for(un(y),v&&clearTimeout(v),v=setTimeout(function(){v=null},E),K=0;K<X;++K)T=H[K],S.touch0&&S.touch0[2]===T.identifier?delete S.touch0:S.touch1&&S.touch1[2]===T.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(T=me(T,this),Math.hypot(g[0]-T[0],g[1]-T[1])<_)){var Z=fe(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return w.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:xt(+y),w):o},w.filter=function(y){return arguments.length?(e=typeof y=="function"?y:xt(!!y),w):e},w.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:xt(!!y),w):i},w.extent=function(y){return arguments.length?(t=typeof y=="function"?y:xt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),w):t},w.scaleExtent=function(y){return arguments.length?(a[0]=+y[0],a[1]=+y[1],w):[a[0],a[1]]},w.translateExtent=function(y){return arguments.length?(l[0][0]=+y[0][0],l[1][0]=+y[1][0],l[0][1]=+y[0][1],l[1][1]=+y[1][1],w):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},w.constrain=function(y){return arguments.length?(n=y,w):n},w.duration=function(y){return arguments.length?(s=+y,w):s},w.interpolate=function(y){return arguments.length?(u=y,w):u},w.on=function(){var y=c.on.apply(c,arguments);return y===c?w:y},w.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,w):Math.sqrt(f)},w.tapDistance=function(y){return arguments.length?(_=+y,w):_},w}const cn=.1;function Oe(){}const gc={zoomIn:Oe,zoomOut:Oe,zoomTo:Oe,fitView:Oe,setCenter:Oe,fitBounds:Oe,project:e=>e,setTransform:Oe,getTransform:()=>({x:0,y:0,zoom:1}),initialized:!1},vc=(e,t)=>{const n=e,o=r.toRef(n,"nodes"),i=r.toRef(n,"d3Zoom"),a=r.toRef(n,"d3Selection"),l=r.toRef(n,"dimensions"),s=r.toRef(n,"translateExtent"),u=r.toRef(n,"minZoom"),c=r.toRef(n,"maxZoom"),d=r.toRef(n,"viewport"),g=r.toRef(n,"snapToGrid"),v=r.toRef(n,"snapGrid"),E=r.toRef(n,"hooks"),h=t,f=r.toRef(h,"getNodes"),_=r.ref(!1);E.value.nodesInitialized.on(()=>{_.value=!0});const w=r.computed(()=>!!i.value&&!!a.value&&!!l.value.width&&!!l.value.height&&_.value);function N(x,M){a.value&&i.value&&i.value.scaleBy(dn(a.value,M),x)}function D(x,M,O,p){const{x:L,y:B}=Dn({x:-x,y:-M},s.value),k=Xe.translate(-L,-B).scale(O);a.value&&i.value&&i.value.transform(dn(a.value,p),k)}return r.computed(()=>w.value?{initialized:!0,zoomIn:x=>{N(1.2,x==null?void 0:x.duration)},zoomOut:x=>{N(1/1.2,x==null?void 0:x.duration)},zoomTo:(x,M)=>{a.value&&i.value&&i.value.scaleTo(dn(a.value,M==null?void 0:M.duration),x)},setTransform:(x,M)=>{D(x.x,x.y,x.zoom,M==null?void 0:M.duration)},getTransform:()=>({x:d.value.x,y:d.value.y,zoom:d.value.zoom}),fitView:(x={padding:cn,includeHiddenNodes:!1,duration:0})=>{if(!o.value.length)return;const M=(x.includeHiddenNodes?o.value:f.value).filter(k=>{var J;const V=k.initialized&&k.dimensions.width&&k.dimensions.height;let j=!0;return(J=x.nodes)!=null&&J.length&&(j=x.nodes.includes(k.id)),V&&j}),O=Vt(M),{x:p,y:L,zoom:B}=Je(O,l.value.width,l.value.height,x.minZoom??u.value,x.maxZoom??c.value,x.padding??cn,x.offset);D(p,L,B,x==null?void 0:x.duration)},setCenter:(x,M,O)=>{const p=typeof(O==null?void 0:O.zoom)<"u"?O.zoom:c.value,L=l.value.width/2-x*p,B=l.value.height/2-M*p;D(L,B,p,O==null?void 0:O.duration)},fitBounds:(x,M={padding:cn})=>{const{x:O,y:p,zoom:L}=Je(x,l.value.width,l.value.height,u.value,c.value,M.padding);D(O,p,L,M==null?void 0:M.duration)},project:x=>At(x,d.value,g.value,v.value)}:gc)};function dn(e,t=0){return e.transition().duration(t)}function fn(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let i={};if(Se(t.style)?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0)if(Ee(i.width)){const a=Number(i.width.replace("px",""));i.width=`${a+n}px`}else i.width+=n;if(o>0)if(Ee(i.height)){const a=Number(i.height.replace("px",""));i.height=`${a+o}px`}else i.height+=o;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,Ee(i.width)){const l=Number(i.width.replace("px",""));i.width=`${l+a}px`}else i.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,Ee(i.height)){const l=Number(i.height.replace("px",""));i.height=`${l+a}px`}else i.height+=a;e.position.y=0}t.dimensions.width=Number(i.width.toString().replace("px","")),t.dimensions.height=Number(i.height.toString().replace("px","")),Se(t.style)?t.style=a=>{const l=t.style;return{...l(a),...i}}:t.style={...t.style,...i}}}}function lt(e,t){e.filter(i=>i.type==="add"||i.type==="remove").forEach(i=>{if(i.type==="add")t.findIndex(l=>l.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const a=t.findIndex(l=>l.id===i.id);a!==-1&&t.splice(a,1)}});const o=t.map(i=>i.id);return t.forEach(i=>{var l,s;const a=e.filter(u=>u.id===i.id);for(const u of a)switch(u.type){case"select":i.selected=u.selected;break;case"position":if(Re(i)&&(typeof u.position<"u"&&(i.position=u.position),typeof u.dragging<"u"&&(i.dragging=u.dragging),i.expandParent&&i.parentNode)){const c=t[o.indexOf(i.parentNode)];c&&Re(c)&&fn(i,c)}break;case"dimensions":if(Re(i)){if(typeof u.dimensions<"u"&&(i.dimensions=u.dimensions),typeof u.updateStyle<"u"&&(i.style={...i.style||{},width:`${(l=u.dimensions)==null?void 0:l.width}px`,height:`${(s=u.dimensions)==null?void 0:s.height}px`}),typeof u.resizing<"u"&&(i.resizing=u.resizing),i.expandParent&&i.parentNode){const c=t[o.indexOf(i.parentNode)];c&&Re(c)&&(c.initialized?fn(i,c):r.nextTick(()=>{fn(i,c)}))}i.initialized||(i.initialized=!0)}break}}),t}function mc(e,t){return lt(e,t)}function pc(e,t){return lt(e,t)}function we(e,t){return{id:e,type:"select",selected:t}}function Xo(e){return{item:e,type:"add"}}function hn(e){return{id:e,type:"remove"}}function gn(e,t){return e.reduce((n,o)=>{let i=t.includes(o.id);oe(o.selectable)&&!o.selectable&&(i=!1);const a=Re(o)?"changedNodes":"changedEdges";return!o.selected&&i?n[a].push(we(o.id,!0)):o.selected&&!i&&n[a].push(we(o.id,!1)),n},{changedNodes:[],changedEdges:[]})}function yc(e,t,n,o){let i=!1;const a=vc(e,t),l=m=>{const b=m??n.value??[];e.hooks.updateNodeInternals.trigger(b)},s=m=>{if(m)return e.nodes&&!n.value.length?e.nodes.find(b=>b.id===m):e.nodes[n.value.indexOf(m)]},u=m=>{if(m)return e.edges&&!o.value.length?e.edges.find(b=>b.id===m):e.edges[o.value.indexOf(m)]},c=(m,b,F)=>{const R=[];m.forEach(A=>{var P,ee;const C={id:A.id,type:"position",dragging:F,from:A.from};if(b&&(C.position=A.position,A.parentNode)){const te=s(A.parentNode);C.position={x:C.position.x-(((P=te==null?void 0:te.computedPosition)==null?void 0:P.x)??0),y:C.position.y-(((ee=te==null?void 0:te.computedPosition)==null?void 0:ee.y)??0)}}R.push(C)}),R!=null&&R.length&&e.hooks.nodesChange.trigger(R)},d=m=>{var A;if(!e.vueFlowRef)return;const b=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!b)return;let F;if((A=e.__experimentalFeatures)!=null&&A.nestedFlow){let C=[b],P=b,ee;for(;!ee&&P;)P=P.parentElement,ee=P==null?void 0:P.classList.contains("vue-flow__transformationpane"),ee&&(C=[P,...C]);C.forEach(te=>{const re=window.getComputedStyle(te),{m22:de}=new window.DOMMatrixReadOnly(re.transform);F?F*=de:F=de})}else{const C=window.getComputedStyle(b),{m22:P}=new window.DOMMatrixReadOnly(C.transform);F=P}const R=m.reduce((C,P)=>{const ee=s(P.id);if(ee){const te=Dt(P.nodeElement);!!(te.width&&te.height&&(ee.dimensions.width!==te.width||ee.dimensions.height!==te.height||P.forceUpdate))&&(ee.handleBounds.source=_o(".source",P.nodeElement,F),ee.handleBounds.target=_o(".target",P.nodeElement,F),ee.dimensions=te,ee.initialized=!0,C.push({id:ee.id,type:"dimensions",dimensions:te}))}return C},[]);e.fitViewOnInit&&!i&&(ue(()=>a.value.initialized).toBe(!0).then(()=>{a.value.fitView()}),i=!0),R.length&&e.hooks.nodesChange.trigger(R)},g=(m,b)=>{const F=m.map(C=>C.id);let R,A=[];if(e.multiSelectionActive)R=F.map(C=>we(C,b));else{const C=gn([...e.nodes,...e.edges],F);R=C.changedNodes,A=C.changedEdges}R.length&&e.hooks.nodesChange.trigger(R),A.length&&e.hooks.edgesChange.trigger(A)},v=(m,b)=>{const F=m.map(C=>C.id);let R=[],A;if(e.multiSelectionActive)A=F.map(C=>we(C,b));else{const C=gn([...e.nodes,...e.edges],F);R=C.changedNodes,A=C.changedEdges}R.length&&e.hooks.nodesChange.trigger(R),A.length&&e.hooks.edgesChange.trigger(A)},E=(m,b)=>{const F=m.filter(Ae).map(P=>P.id),R=m.filter(ge).map(P=>P.id);let{changedNodes:A,changedEdges:C}=gn([...e.nodes,...e.edges],[...F,...R]);e.multiSelectionActive&&(A=F.map(P=>we(P,b)),C=R.map(P=>we(P,b))),A.length&&e.hooks.nodesChange.trigger(A),C.length&&e.hooks.edgesChange.trigger(C)},h=m=>{g(m,!0)},f=m=>{v(m,!0)},_=m=>{E(m,!0)},w=m=>{if(!m.length)return g(m,!1);const F=m.map(R=>R.id).map(R=>we(R,!1));F.length&&e.hooks.nodesChange.trigger(F)},N=m=>{if(!m.length)return v(m,!1);const F=m.map(R=>R.id).map(R=>we(R,!1));F.length&&e.hooks.edgesChange.trigger(F)},D=m=>{if(!m||!m.length)return E([],!1);const{changedNodes:b,changedEdges:F}=m.reduce((R,A)=>{const C=we(A.id,!1);return Ae(A)?R.changedNodes.push(C):R.changedEdges.push(C),R},{changedNodes:[],changedEdges:[]});b.length&&e.hooks.nodesChange.trigger(b),F.length&&e.hooks.edgesChange.trigger(F)},x=m=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([m,e.maxZoom]),e.minZoom=m},M=m=>{var b;(b=e.d3Zoom)==null||b.scaleExtent([e.minZoom,m]),e.maxZoom=m},O=m=>{var b;(b=e.d3Zoom)==null||b.translateExtent(m),e.translateExtent=m},p=m=>{e.nodeExtent=m,l(n.value)},L=m=>{e.nodesDraggable=m,e.nodesConnectable=m,e.elementsSelectable=m},B=m=>{const b=m instanceof Function?m(e.nodes):m;!e.initialized&&!b.length||(e.nodes=vo(b,e.nodes,s,e.hooks.error.trigger))},k=m=>{const b=m instanceof Function?m(e.edges):m;if(!e.initialized&&!b.length)return;const F=e.isValidConnection?b.filter(R=>e.isValidConnection(R,{edges:e.edges,sourceNode:s(R.source),targetNode:s(R.target)})):b;e.edges=F.reduce((R,A)=>{const C=s(A.source),P=s(A.target),ee=!C||typeof C>"u",te=!P||typeof P>"u";if(ee&&te?e.hooks.error.trigger(new le(ae.EDGE_SOURCE_TARGET_MISSING,A.id,A.source,A.target)):(ee&&e.hooks.error.trigger(new le(ae.EDGE_SOURCE_MISSING,A.id,A.source)),te&&e.hooks.error.trigger(new le(ae.EDGE_TARGET_MISSING,A.id,A.target))),ee||te)return R;const re=u(A.id);return R.push({...zn(A,Object.assign({},re,e.defaultEdgeOptions)),sourceNode:C,targetNode:P}),R},[])},V=m=>{const b=m instanceof Function?m([...e.nodes,...e.edges]):m;!e.initialized&&!b.length||(B(b.filter(Ae)),k(b.filter(ge)))},j=m=>{const b=m instanceof Function?m(e.nodes):m,R=vo(b,e.nodes,s,e.hooks.error.trigger).map(Xo);R.length&&e.hooks.nodesChange.trigger(R)},J=m=>{const b=m instanceof Function?m(e.edges):m,R=(e.isValidConnection?b.filter(A=>e.isValidConnection(A,{edges:e.edges,sourceNode:s(A.source),targetNode:s(A.target)})):b).reduce((A,C)=>{const P=Vr({...C,...e.defaultEdgeOptions},e.edges,e.hooks.error.trigger);if(P){const ee=s(P.source),te=s(P.target),re=!ee||typeof ee>"u",de=!te||typeof te>"u";if(re&&de?e.hooks.error.trigger(new le(ae.EDGE_SOURCE_TARGET_MISSING,P.id,P.source,P.target)):(re&&e.hooks.error.trigger(new le(ae.EDGE_SOURCE_MISSING,P.id,P.source)),de&&e.hooks.error.trigger(new le(ae.EDGE_TARGET_MISSING,P.id,P.target))),re||de)return A;A.push(Xo({...P,sourceNode:ee,targetNode:te}))}return A},[]);R.length&&e.hooks.edgesChange.trigger(R)},y=(m,b=!0)=>{const F=m instanceof Function?m(e.nodes):m,R=[],A=[];F.forEach(C=>{const P=typeof C=="string"?s(C):C;if(!(oe(P.deletable)&&!P.deletable)&&(R.push(hn(P.id)),b)){const ee=ut([P],e.edges).filter(te=>oe(te.deletable)?te.deletable:!0);A.push(...ee.map(te=>hn(te.id)))}}),A.length&&e.hooks.edgesChange.trigger(A),R.length&&e.hooks.nodesChange.trigger(R)},z=m=>{const b=m instanceof Function?m(e.edges):m,F=[];b.forEach(R=>{const A=typeof R=="string"?u(R):R;oe(A.deletable)&&!A.deletable||F.push(hn(typeof R=="string"?R:R.id))}),e.hooks.edgesChange.trigger(F)},S=(m,b,F=!0)=>Hr(m,b,e.edges,u,F,e.hooks.error.trigger),H=m=>lt(m,e.nodes),X=m=>lt(m,e.edges),K=(m,b,F,R=!1)=>{R?e.connectionClickStartHandle=m:e.connectionStartHandle=m,e.connectionEndHandle=null,e.connectionStatus=null,b&&(e.connectionPosition=b)},T=(m,b=null,F=null)=>{e.connectionStartHandle&&(e.connectionPosition=m,e.connectionEndHandle=b,e.connectionStatus=F)},Z=(m,b)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionStatus=null,b?e.connectionClickStartHandle=null:e.connectionStartHandle=null},I=m=>{const b=Rr(m),F=b?null:s(m.id);return!b&&!F?[null,null,b]:[b?m:ho(F),F,b]},Q=(m,b=!0,F)=>{const[R,A,C]=I(m);return R?(F||e.nodes).filter(P=>{if(!C&&(P.id===A.id||!P.computedPosition))return!1;const ee=ho(P),te=wn(ee,R);return b&&te>0||te>=Number(m.width)*Number(m.height)}):[]},U=(m,b,F=!0)=>{const[R]=I(m);if(!R)return!1;const A=wn(R,b);return F&&A>0||A>=Number(m.width)*Number(m.height)},W=(m,b)=>{const{viewport:F,dimensions:R,d3Zoom:A,d3Selection:C,translateExtent:P}=e;if(!A||!C||!m.x&&!m.y)return;const ee=Xe.translate(F.x+m.x,F.y+m.y).scale(F.zoom),te=[[0,0],[R.width,R.height]],re=A.constrain()(ee,te,P);b==null||b(re),A.transform(C,re)},$=m=>{const b=m instanceof Function?m(e):m,F=["modelValue","nodes","edges","maxZoom","minZoom","translateExtent","nodeExtent","hooks","defaultEdgeOptions"];oe(b.defaultEdgeOptions)&&(e.defaultEdgeOptions=b.defaultEdgeOptions);const R=b.modelValue||b.nodes||b.edges?[]:void 0;R&&(b.modelValue&&R.push(...b.modelValue),b.nodes&&R.push(...b.nodes),b.edges&&R.push(...b.edges),V(R));const A=()=>{oe(b.maxZoom)&&M(b.maxZoom),oe(b.minZoom)&&x(b.minZoom),oe(b.translateExtent)&&O(b.translateExtent),oe(b.nodeExtent)&&p(b.nodeExtent)};Object.keys(b).forEach(C=>{const P=b[C];!F.includes(C)&&oe(P)&&(e[C]=P)}),e.d3Zoom?A():ue(()=>e.d3Zoom).not.toBeUndefined().then(A),e.initialized||(e.initialized=!0)};return{updateNodePositions:c,updateNodeDimensions:d,setElements:V,setNodes:B,setEdges:k,addNodes:j,addEdges:J,removeNodes:y,removeEdges:z,findNode:s,findEdge:u,updateEdge:S,applyEdgeChanges:X,applyNodeChanges:H,addSelectedElements:_,addSelectedNodes:h,addSelectedEdges:f,setMinZoom:x,setMaxZoom:M,setTranslateExtent:O,setNodeExtent:p,removeSelectedElements:D,removeSelectedNodes:w,removeSelectedEdges:N,startConnection:K,updateConnection:T,endConnection:Z,setInteractive:L,setState:$,getIntersectingNodes:Q,isNodeIntersecting:U,panBy:W,fitView:async(m={padding:.1})=>{await ue(()=>a.value.initialized).toBe(!0),a.value.fitView(m)},zoomIn:async m=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomIn(m)},zoomOut:async m=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomOut(m)},zoomTo:async(m,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.zoomTo(m,b)},setTransform:async(m,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.setTransform(m,b)},getTransform:()=>a.value.getTransform(),setCenter:async(m,b,F)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.setCenter(m,b,F)},fitBounds:async(m,b)=>{await ue(()=>a.value.initialized).toBe(!0),a.value.fitBounds(m,b)},project:m=>a.value.project(m),toObject:()=>JSON.parse(JSON.stringify({nodes:e.nodes.map(m=>{const{computedPosition:b,handleBounds:F,selected:R,dimensions:A,isParent:C,resizing:P,dragging:ee,initialized:te,...re}=m;return re}),edges:e.edges.map(m=>{const{selected:b,sourceNode:F,targetNode:R,...A}=m;return A}),position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom})),updateNodeInternals:l,$reset:()=>{e.edges=[],e.nodes=[],$(zi())},$destroy:()=>{}}}class Be{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){return Be.instance||(Be.instance=new Be),Be.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=zi(n),i=r.reactive(o),a=r.computed(()=>i.nodes.map(v=>v.id)),l=r.computed(()=>i.edges.map(v=>v.id)),s=bs(i,a,l),u=yc(i,s,a,l),c={};Object.entries(i.hooks).forEach(([v,E])=>{const h=`on${v.charAt(0).toUpperCase()+v.slice(1)}`;c[h]=E.on});const d={};Object.entries(i.hooks).forEach(([v,E])=>{d[v]=E.trigger}),u.setState(i);const g={...c,...s,...u,...r.toRefs(i),emits:d,id:t,vueFlowVersion:"1.19.2",$destroy:()=>{this.remove(t)}};return this.set(t,g),g}getId(){return`vue-flow-${this.currentId++}`}}const ie=e=>{const t=Be.getInstance(),n=r.getCurrentScope(),o=e==null?void 0:e.id,i=(n==null?void 0:n.vueFlowId)||o;let a,l=!1;if(n){const s=r.inject(_n,null);typeof s<"u"&&s!==null&&(a=s)}if(a||i&&(a=t.get(i)),!a||a&&o&&o!==a.id){const s=o??t.getId();a=t.create(s,e),n&&(l=!0)}else e&&a.setState(e);return n&&(r.provide(_n,a),n.vueFlowId=a.id,l&&st(()=>{if(a){const s=t.get(a.id);s?s.$destroy():Qe(`No store instance found for id ${a.id} in storage.`)}})),a};function xc(e,t,n){const o=r.effectScope();return o.run(()=>{[()=>{o.run(()=>{let h,f,_=!!(n.nodes.value.length||n.edges.value.length);h=ze([e.modelValue,()=>{var w,N;return(N=(w=e.modelValue)==null?void 0:w.value)==null?void 0:N.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setElements(w),!f&&!_&&w.length?_=!0:f==null||f.resume())}),f=ze([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([w,N])=>{var D;(D=e.modelValue)!=null&&D.value&&Array.isArray(e.modelValue.value)&&(h==null||h.pause(),e.modelValue.value=[...w,...N],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,_=!!n.nodes.value.length;h=ze([e.nodes,()=>{var w,N;return(N=(w=e.nodes)==null?void 0:w.value)==null?void 0:N.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setNodes(w),!f&&!_&&w.length?_=!0:f==null||f.resume())}),f=ze([n.nodes,()=>n.nodes.value.length],([w])=>{var N;(N=e.nodes)!=null&&N.value&&Array.isArray(e.nodes.value)&&(h==null||h.pause(),e.nodes.value=[...w],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{let h,f,_=!!n.edges.value.length;h=ze([e.edges,()=>{var w,N;return(N=(w=e.edges)==null?void 0:w.value)==null?void 0:N.length}],([w])=>{w&&Array.isArray(w)&&(f==null||f.pause(),n.setEdges(w),!f&&!_&&w.length?_=!0:f==null||f.resume())}),f=ze([n.edges,()=>n.edges.value.length],([w])=>{var N;(N=e.edges)!=null&&N.value&&Array.isArray(e.edges.value)&&(h==null||h.pause(),e.edges.value=[...w],r.nextTick(()=>{h==null||h.resume()}))},{immediate:_}),r.onScopeDispose(()=>{h==null||h.stop(),f==null||f.stop()})})},()=>{o.run(()=>{r.watch(()=>t.minZoom,()=>{t.minZoom&&oe(t.minZoom)&&n.setMinZoom(t.minZoom)})})},()=>{o.run(()=>{r.watch(()=>t.maxZoom,()=>{t.maxZoom&&oe(t.maxZoom)&&n.setMaxZoom(t.maxZoom)})})},()=>{o.run(()=>{r.watch(()=>t.translateExtent,()=>{t.translateExtent&&oe(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)})})},()=>{o.run(()=>{r.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&oe(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)})})},()=>{o.run(()=>{r.watch(()=>t.applyDefault,()=>{oe(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),r.watch(n.applyDefault,(h,f,_)=>{n.applyDefault.value?(n.onNodesChange(n.applyNodeChanges),n.onEdgesChange(n.applyEdgeChanges)):(n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)),_(()=>{n.hooks.value.nodesChange.off(n.applyNodeChanges),n.hooks.value.edgesChange.off(n.applyEdgeChanges)})},{immediate:!0})})},()=>{o.run(()=>{const h=async f=>{let _=f;Se(t.autoConnect)&&(_=await t.autoConnect(f)),_!==!1&&n.addEdges([_])};r.watch(()=>t.autoConnect,()=>{oe(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),r.watch(n.autoConnect,(f,_,w)=>{f?n.onConnect(h):n.hooks.value.connect.off(h),w(()=>{n.hooks.value.connect.off(h)})},{immediate:!0})})},()=>{const h=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];Object.keys(t).forEach(f=>{if(!h.includes(f)){const _=r.toRef(t,f),w=n[f];o.run(()=>{r.watch(_,N=>{oe(N)&&(w.value=N)},{flush:"pre"})})}})}].forEach(h=>h())}),()=>o.stop()}function Uo(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const wc={name:"Pane",compatConfig:{MODE:3}},_c=r.defineComponent({...wc,props:{isSelecting:{type:Boolean}},setup(e){const{id:t,vueFlowRef:n,getNodes:o,getEdges:i,viewport:a,emits:l,userSelectionActive:s,removeSelectedElements:u,panOnDrag:c,userSelectionRect:d,elementsSelectable:g,nodesSelectionActive:v,addSelectedElements:E,getSelectedEdges:h,getSelectedNodes:f,removeNodes:_,removeEdges:w,selectionMode:N,deleteKeyCode:D,multiSelectionKeyCode:x,multiSelectionActive:M}=ie(),O=r.ref(null),p=r.ref(0),L=r.ref(0),B=r.ref(),k=r.computed(()=>g.value&&(e.isSelecting||s.value));je(D,T=>{if(!T)return;const Z=o.value.reduce((I,Q)=>((!Q.selected&&Q.parentNode&&I.find(U=>U.id===Q.parentNode)||Q.selected)&&I.push(Q),I),[]);(Z||h.value)&&(h.value.length>0&&w(h.value),Z.length>0&&_(Z),v.value=!1,u())}),je(x,T=>{M.value=T});function V(){s.value=!1,d.value=null,p.value=0,L.value=0}function j(T){T.target!==O.value||k.value||(l.paneClick(T),u(),v.value=!1)}function J(T){var Z;if(T.target===O.value){if(Array.isArray(c.value)&&((Z=c.value)!=null&&Z.includes(2))){T.preventDefault();return}l.paneContextMenu(T)}}function y(T){T.target===O.value&&l.paneScroll(T)}function z(T){if(B.value=n.value.getBoundingClientRect(),!k.value||!g||!e.isSelecting||T.button!==0||T.target!==O.value||!B.value)return;const{x:Z,y:I}=Uo(T,B.value);u(),d.value={width:0,height:0,startX:Z,startY:I,x:Z,y:I},s.value=!0,l.selectionStart(T)}function S(T){if(!e.isSelecting||!B.value||!d.value)return;if(!k.value)return l.paneMouseMove(T);s.value||(s.value=!0),v.value&&(v.value=!1);const Z=Uo(T,B.value),I=d.value.startX??0,Q=d.value.startY??0,U={...d.value,x:Z.x<I?Z.x:I,y:Z.y<Q?Z.y:Q,width:Math.abs(Z.x-I),height:Math.abs(Z.y-Q)},W=Hn(o.value,d.value,a.value,N.value===Ht.Partial),$=ut(W,i.value);p.value=W.length,L.value=$.length,d.value=U,E([...W,...$])}function H(T){k.value&&T.button===0&&(!s.value&&d.value&&T.target===O.value&&j(T),v.value=p.value>0,V(),l.selectionEnd(T))}function X(T){var Z;if(!k.value)return l.paneMouseLeave(T);s.value&&(v.value=p.value>0,(Z=l.selectionEnd)==null||Z.call(l,T)),V()}function K(T){k.value||l.paneMouseEnter(T)}return(T,Z)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"container",ref:O,key:`pane-${r.unref(t)}`,class:r.normalizeClass(["vue-flow__pane vue-flow__container",{selection:e.isSelecting}]),onClick:j,onContextmenu:J,onWheelPassive:y,onMouseenter:K,onMousedown:z,onMousemove:S,onMouseup:H,onMouseleave:X},[r.renderSlot(T.$slots,"default"),r.unref(s)&&r.unref(d)?(r.openBlock(),r.createBlock(_s,{key:0})):r.createCommentVNode("",!0),r.unref(v)&&r.unref(f).length?(r.openBlock(),r.createBlock(xs,{key:1})):r.createCommentVNode("",!0)],34))}}),Ec={class:"vue-flow__nodes vue-flow__container"},bc={name:"Nodes",compatConfig:{MODE:3}},Sc=r.defineComponent({...bc,setup(e){const t=r.inject(Ft),n=ie(),o=r.toRef(n,"nodesDraggable"),i=r.toRef(n,"nodesFocusable"),a=r.toRef(n,"elementsSelectable"),l=r.toRef(n,"nodesConnectable"),s=r.toRef(n,"getNodes"),u=r.toRef(n,"getNodesInitialized"),c=r.toRef(n,"getNodeTypes"),d=r.toRef(n,"updateNodeDimensions"),g=r.toRef(n,"emits");let v=r.ref();ue(()=>s.value.length>0&&u.value.length===s.value.length).toBe(!0).then(()=>{r.nextTick(()=>{g.value.nodesInitialized(u.value)})}),r.onMounted(()=>{v.value=new ResizeObserver(N=>{const D=N.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));d.value(D)})}),r.onBeforeUnmount(()=>{var N;return(N=v.value)==null?void 0:N.disconnect()});function E(N){return typeof N>"u"?o.value:N}function h(N){return typeof N>"u"?a.value:N}function f(N){return typeof N>"u"?l.value:N}function _(N){return typeof N>"u"?i.value:N}function w(N,D){const x=N||"default";let M=D??c.value[x];const O=r.getCurrentInstance();if(typeof M=="string"&&O){const L=Object.keys(O.appContext.components);L&&L.includes(x)&&(M=r.resolveComponent(x,!1))}if(typeof M!="string")return M;const p=t==null?void 0:t[`node-${x}`];return p||(g.value.error(new le(ae.NODE_TYPE_MISSING,M)),!1)}return(N,D)=>(r.openBlock(),r.createElementBlock("div",Ec,[r.unref(v)?(r.openBlock(!0),r.createElementBlock(r.Fragment,{key:0},r.renderList(r.unref(s),x=>(r.openBlock(),r.createBlock(r.unref(ql),{id:x.id,key:x.id,"resize-observer":r.unref(v),type:w(x.type,x.template),name:x.type||"default",draggable:E(x.draggable),selectable:h(x.selectable),connectable:f(x.connectable),focusable:_(x.focusable),node:x},null,8,["id","resize-observer","type","name","draggable","selectable","connectable","focusable","node"]))),128)):r.createCommentVNode("",!0)]))}}),Nc=["id","markerWidth","markerHeight","markerUnits","orient"],Cc=["stroke","stroke-width","fill"],kc=["stroke","stroke-width"],Mc={name:"MarkerType",compatConfig:{MODE:3}},$c=r.defineComponent({...Mc,props:{id:null,type:null,color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(r.openBlock(),r.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===r.unref(Ct).ArrowClosed?(r.openBlock(),r.createElementBlock("polyline",{key:0,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:e.color,points:"-5,-4 0,0 -5,4 -5,-4"},null,8,Cc)):r.createCommentVNode("",!0),e.type===r.unref(Ct).Arrow?(r.openBlock(),r.createElementBlock("polyline",{key:1,stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":e.strokeWidth,fill:"none",points:"-5,-4 0,0 -5,4"},null,8,kc)):r.createCommentVNode("",!0)],8,Nc))}}),Oc={name:"MarkerDefinitions",compatConfig:{MODE:3}},Rc=r.defineComponent({...Oc,setup(e){const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"edges"),i=r.toRef(t,"connectionLineOptions"),a=r.toRef(t,"defaultMarkerColor"),l=r.computed(()=>{const s=[],u=[],c=d=>{if(d){const g=Me(d,n.value);s.includes(g)||(typeof d=="object"?u.push({...d,id:g,color:d.color||a.value}):u.push({id:g,color:a.value,type:d}),s.push(g))}};return[i.value.markerEnd,i.value.markerStart].forEach(c),o.value.reduce((d,g)=>([g.markerStart,g.markerEnd].forEach(c),d.sort((v,E)=>v.id.localeCompare(E.id))),u),u});return(s,u)=>(r.openBlock(),r.createElementBlock("defs",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(l),c=>(r.openBlock(),r.createBlock($c,{id:c.id,key:c.id,type:c.type,color:c.color,width:c.width,height:c.height,markerUnits:c.markerUnits,"stroke-width":c.strokeWidth,orient:c.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))]))}}),Tc={key:0,class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Bc={name:"Edges",compatConfig:{MODE:3}},Ic=r.defineComponent({...Bc,setup(e){const t=r.inject(Ft),n=ie(),o=r.toRef(n,"connectionStartHandle"),i=r.toRef(n,"nodesConnectable"),a=r.toRef(n,"edgesUpdatable"),l=r.toRef(n,"edgesFocusable"),s=r.toRef(n,"elementsSelectable"),u=r.toRef(n,"getSelectedNodes"),c=r.toRef(n,"findNode"),d=r.toRef(n,"getEdges"),g=r.toRef(n,"getNodesInitialized"),v=r.toRef(n,"getEdgeTypes"),E=r.toRef(n,"elevateEdgesOnSelect"),h=r.toRef(n,"dimensions"),f=r.toRef(n,"emits"),_=tn(()=>{var p;return(p=o.value)==null?void 0:p.nodeId},()=>{var p;return(p=o.value)!=null&&p.nodeId?c.value(o.value.nodeId):!1}),w=tn(()=>{var p;return(p=o.value)==null?void 0:p.nodeId},()=>{var p,L;return!!(_.value&&(typeof _.value.connectable>"u"?i.value:_.value.connectable)&&((p=o.value)!=null&&p.nodeId)&&((L=o.value)!=null&&L.type))}),N=tn([()=>d.value.map(p=>p.zIndex),()=>E.value?[u.value.length]:[0],()=>E.value?g.value.map(p=>p.computedPosition.z):[]],()=>Gr(d.value,c.value,E.value));function D(p){return typeof p>"u"?s.value:p}function x(p){return typeof p>"u"?a.value:p}function M(p){return typeof p>"u"?l.value:p}function O(p,L){const B=p||"default";let k=L??v.value[B];const V=r.getCurrentInstance();if(typeof k=="string"&&V){const J=Object.keys(V.appContext.components);J&&J.includes(B)&&(k=r.resolveComponent(B,!1))}if(k&&typeof k!="string")return k;const j=t==null?void 0:t[`edge-${B}`];return j||(f.value.error(new le(ae.EDGE_TYPE_MISSING,k)),!1)}return(p,L)=>r.unref(h).width&&r.unref(h).height?(r.openBlock(),r.createElementBlock(r.Fragment,{key:0},[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(N),B=>(r.openBlock(),r.createElementBlock("svg",{key:B.level,class:"vue-flow__edges vue-flow__container",style:r.normalizeStyle(`z-index: ${B.level}`)},[B.isMaxLevel?(r.openBlock(),r.createBlock(Rc,{key:0})):r.createCommentVNode("",!0),r.createElementVNode("g",null,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(B.edges,k=>(r.openBlock(),r.createBlock(r.unref(us),{id:k.id,key:k.id,edge:k,type:O(k.type,k.template),name:k.type||"default",selectable:D(k.selectable),updatable:x(k.updatable),focusable:M(k.focusable)},null,8,["id","edge","type","name","selectable","updatable","focusable"]))),128))])],4))),128)),r.unref(w)&&r.unref(_)?(r.openBlock(),r.createElementBlock("svg",Tc,[r.createVNode(ms,{"source-node":r.unref(_)},null,8,["source-node"])])):r.createCommentVNode("",!0)],64)):r.createCommentVNode("",!0)}}),Pc=r.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Dc={name:"Transform",compatConfig:{MODE:3}},zc=r.defineComponent({...Dc,setup(e){const{id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}=ie(),u=r.ref(!Tn);return ue(()=>i.value&&a.value&&l.value.width>0&&l.value.height>0).toBeTruthy().then(()=>{o.paneReady({id:t,viewport:n,emits:o,d3Zoom:i,d3Selection:a,dimensions:l,...s}),setTimeout(()=>{u.value=!0},0)}),(c,d)=>(r.openBlock(),r.createElementBlock("div",{key:`transform-${r.unref(t)}`,class:"vue-flow__transformationpane vue-flow__container",style:r.normalizeStyle({transform:`translate(${r.unref(n).x}px,${r.unref(n).y}px) scale(${r.unref(n).zoom})`,opacity:r.unref(u)?void 0:0})},[r.createVNode(Ic),Pc,r.createVNode(Sc),r.renderSlot(c.$slots,"default")],4))}}),Ac={name:"Viewport",compatConfig:{MODE:3}},Vc=r.defineComponent({...Ac,setup(e){const t=ie(),n=r.toRef(t,"id"),o=r.toRef(t,"minZoom"),i=r.toRef(t,"maxZoom"),a=r.toRef(t,"defaultViewport"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"dimensions"),u=r.toRef(t,"zoomActivationKeyCode"),c=r.toRef(t,"selectionKeyCode"),d=r.toRef(t,"panActivationKeyCode"),g=r.toRef(t,"panOnScroll"),v=r.toRef(t,"panOnScrollMode"),E=r.toRef(t,"panOnScrollSpeed"),h=r.toRef(t,"panOnDrag"),f=r.toRef(t,"zoomOnDoubleClick"),_=r.toRef(t,"zoomOnPinch"),w=r.toRef(t,"zoomOnScroll"),N=r.toRef(t,"preventScrolling"),D=r.toRef(t,"noWheelClassName"),x=r.toRef(t,"noPanClassName"),M=r.toRef(t,"setState"),O=r.toRef(t,"emits"),p=r.toRef(t,"connectionStartHandle"),L=r.toRef(t,"userSelectionActive"),B=r.toRef(t,"paneDragging"),k=r.ref();let V=r.ref(!1),j=r.ref(!1),J=r.ref(!1),y=r.ref(0);const z=je(d.value),S=r.computed(()=>!V.value&&h.value&&z.value),H=r.computed(()=>c.value!==!0&&V.value||c.value===!0&&S.value!==!0);let X=r.ref({x:0,y:0,zoom:0});r.onMounted(()=>{Er(k,I);const U=Pn();In(U,"resize",I)}),r.onMounted(()=>{const U=k.value,W=U.getBoundingClientRect(),$=hc().scaleExtent([o.value,i.value]).translateExtent(l.value),G=fe(U).call($),m=G.on("wheel.zoom"),b=Xe.translate(a.value.x??0,a.value.y??0).scale(Pe(a.value.zoom??1,o.value,i.value)),F=[[0,0],[W.width,W.height]],R=$.constrain()(b,F,l.value);$.transform(G,R),M.value({d3Zoom:$,d3Selection:G,d3ZoomHandler:m,viewport:{x:R.x,y:R.y,zoom:R.k},viewportRef:U}),je(c.value,C=>{V.value=C});const A=je(u.value);r.watchEffect(()=>{V.value&&L.value&&!j.value?$.on("zoom",null):!V.value&&!L.value&&$.on("zoom",C=>{M.value({viewport:{x:C.transform.x,y:C.transform.y,zoom:C.transform.k}});const P=Z(C.transform);J.value=K(h.value,y.value??0),O.value.viewportChange(P),O.value.move({event:C,flowTransform:P})})}),$.on("start",C=>{var ee;if(!C.sourceEvent)return null;y.value=C.sourceEvent.button,j.value=!0;const P=Z(C.transform);((ee=C.sourceEvent)==null?void 0:ee.type)==="mousedown"&&M.value({paneDragging:!0}),X.value=P,O.value.viewportChangeStart(P),O.value.moveStart({event:C,flowTransform:P})}),$.on("end",C=>{if(!C.sourceEvent)return null;if(j.value=!1,M.value({paneDragging:!1}),K(h.value,y.value??0)&&!J.value&&O.value.paneContextMenu(C.sourceEvent),J.value=!1,T(X.value,C.transform)){const P=Z(C.transform);X.value=P,O.value.viewportChangeEnd(P),O.value.moveEnd({event:C,flowTransform:P})}}),r.watchEffect(()=>{g.value&&!A.value&&!L.value?G.on("wheel.zoom",C=>{if(Q(C,D.value))return!1;C.preventDefault(),C.stopImmediatePropagation();const P=G.property("__zoom").k||1;if(C.ctrlKey&&_.value){const de=me(C),ji=-C.deltaY*(C.deltaMode===1?.05:C.deltaMode?1:.002)*10,Qi=P*2**ji;$.scaleTo(G,Qi,de);return}const ee=C.deltaMode===1?20:1,te=v.value===et.Vertical?0:C.deltaX*ee,re=v.value===et.Horizontal?0:C.deltaY*ee;$.translateBy(G,-(te/P)*E.value,-(re/P)*E.value)},{passive:!1}):typeof m<"u"&&G.on("wheel.zoom",function(C,P){if(!N.value||Q(C,D.value))return null;C.preventDefault(),m.call(this,C,P)},{passive:!1})}),$.filter(C=>{var re,de;const P=A.value||w.value,ee=_.value&&C.ctrlKey;if(C.button===1&&C.type==="mousedown"&&((re=C.target)!=null&&re.closest(".vue-flow__node")||(de=C.target)!=null&&de.closest(".vue-flow__edge")))return!0;if(!h.value&&!P&&!g.value&&!f.value&&!_.value||L.value||!f.value&&C.type==="dblclick"||Q(C,D.value)&&C.type==="wheel"||Q(C,x.value)&&C.type!=="wheel"||!_.value&&C.ctrlKey&&C.type==="wheel"||!P&&!g.value&&!ee&&C.type==="wheel"||!h.value&&(C.type==="mousedown"||C.type==="touchstart")||Array.isArray(h.value)&&!h.value.includes(C.button)&&(C.type==="mousedown"||C.type==="touchstart"))return!1;const te=Array.isArray(h.value)&&h.value.includes(C.button)||!C.button||C.button<=1;return(!C.ctrlKey||C.type==="wheel")&&te})});function K(U,W){return W===2&&Array.isArray(U)&&U.includes(2)}function T(U,W){return U.x!==W.x&&!isNaN(W.x)||U.y!==W.y&&!isNaN(W.y)||U.zoom!==W.k&&!isNaN(W.k)}function Z(U){return{x:U.x,y:U.y,zoom:U.k}}function I(){if(!k.value)return;const{width:U,height:W}=Dt(k.value);(U===0||W===0)&&O.value.error(new le(ae.MISSING_VIEWPORT_DIMENSIONS)),s.value.width=U||500,s.value.height=W||500}function Q(U,W){return U.target.closest(`.${W}`)}return(U,W)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[(r.openBlock(),r.createElementBlock("div",{ref_key:"viewportEl",ref:k,key:`viewport-${r.unref(n)}`,class:"vue-flow__viewport vue-flow__container"},[r.createVNode(_c,{"is-selecting":r.unref(H),class:r.normalizeClass({connecting:!!r.unref(p),dragging:r.unref(B),draggable:!!r.unref(h)})},{default:r.withCtx(()=>[r.createVNode(zc,null,{default:r.withCtx(()=>[r.renderSlot(U.$slots,"zoom-pane")]),_:3})]),_:3},8,["is-selecting","class"])])),r.renderSlot(U.$slots,"default")],64))}}),Hc=["id"],Fc=["id"],Lc=["id"],Gc={name:"A11yDescriptions",compatConfig:{MODE:3}},Yc=r.defineComponent({...Gc,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ie(),i={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"};return(a,l)=>(r.openBlock(),r.createElementBlock(r.Fragment,null,[r.createElementVNode("div",{id:`${r.unref(ki)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+r.toDisplayString(r.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Hc),r.createElementVNode("div",{id:`${r.unref(Mi)}-${r.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,Fc),r.unref(n)?r.createCommentVNode("",!0):(r.openBlock(),r.createElementBlock("div",{key:0,id:`${r.unref(Ul)}-${r.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:i},r.toDisplayString(r.unref(o)),9,Lc))],64))}}),Xc={name:"VueFlow",compatConfig:{MODE:3}},Uc=r.defineComponent({...Xc,props:{id:null,modelValue:null,nodes:null,edges:null,edgeTypes:null,nodeTypes:null,connectionMode:null,connectionLineType:null,connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:null,isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:null,selectionKeyCode:null,multiSelectionKeyCode:null,zoomActivationKeyCode:null,panActivationKeyCode:null,snapToGrid:{type:Boolean,default:void 0},snapGrid:null,onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:null,maxZoom:null,defaultViewport:null,translateExtent:null,nodeExtent:null,defaultMarkerColor:null,zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:null,panOnScrollMode:null,zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:null,edgeUpdaterRadius:null,fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:null,noWheelClassName:null,noPanClassName:null,defaultEdgeOptions:null,elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},__experimentalFeatures:null},emits:["nodesChange","edgesChange","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","updateNodeInternals","error","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,i=qe(o,"modelValue",n),a=qe(o,"nodes",n),l=qe(o,"edges",n),{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...g}=ie(o),v=xc({modelValue:i,nodes:a,edges:l},o,{vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...g});Or(n,u);const E=r.ref();return r.provide(Ft,r.useSlots()),r.onUnmounted(()=>{v()}),r.onMounted(()=>{s.value=E.value}),t({vueFlowRef:s,hooks:u,getNodeTypes:c,getEdgeTypes:d,...g}),(h,f)=>(r.openBlock(),r.createElementBlock("div",{ref_key:"el",ref:E,class:"vue-flow"},[r.createVNode(Vc,null,{nodes:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(c)),_=>r.renderSlot(h.$slots,`node-${_}`)),256))]),edges:r.withCtx(()=>[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(Object.keys(r.unref(d)),_=>r.renderSlot(h.$slots,`edge-${_}`)),256))]),"connection-name":r.withCtx(()=>[r.renderSlot(h.$slots,"connection-line")]),"zoom-pane":r.withCtx(()=>[r.renderSlot(h.$slots,"zoom-pane")]),default:r.withCtx(()=>[r.renderSlot(h.$slots,"default")]),_:3}),r.createVNode(Yc)],512))}}),Zc={name:"Panel",compatConfig:{MODE:3}},Kc=r.defineComponent({...Zc,props:{position:null},setup(e){const t=e,{userSelectionActive:n}=ie(),o=r.computed(()=>`${t.position}`.split("-"));return(i,a)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["vue-flow__panel",r.unref(o)]),style:r.normalizeStyle({pointerEvents:r.unref(n)?"none":"all"})},[r.renderSlot(i.$slots,"default")],6))}}),vn=.1,Wc=e=>{const t=ie({id:e}),n=r.toRef(t,"nodes"),o=r.toRef(t,"d3Zoom"),i=r.toRef(t,"d3Selection"),a=r.toRef(t,"dimensions"),l=r.toRef(t,"translateExtent"),s=r.toRef(t,"minZoom"),u=r.toRef(t,"maxZoom"),c=r.toRef(t,"viewport"),d=r.toRef(t,"snapToGrid"),g=r.toRef(t,"snapGrid"),v=r.toRef(t,"getNodes");return{zoomIn:f=>{E(1.2,f==null?void 0:f.duration)},zoomOut:f=>{E(1/1.2,f==null?void 0:f.duration)},zoomTo:(f,_)=>{i.value&&o.value&&o.value.scaleTo(mn(i.value,_==null?void 0:_.duration),f)},setTransform:(f,_)=>{h(f.x,f.y,f.zoom,_==null?void 0:_.duration)},getTransform:()=>({x:c.value.x,y:c.value.y,zoom:c.value.zoom}),fitView:(f={padding:vn,includeHiddenNodes:!1,duration:0})=>{if(!n.value.length)return;const _=(f.includeHiddenNodes?n.value:v.value).filter(M=>{var L;const O=M.initialized&&M.dimensions.width&&M.dimensions.height;let p=!0;return(L=f.nodes)!=null&&L.length&&(p=f.nodes.includes(M.id)),O&&p}),w=Vt(_),{x:N,y:D,zoom:x}=Je(w,a.value.width,a.value.height,f.minZoom??s.value,f.maxZoom??u.value,f.padding??vn,f.offset);h(N,D,x,f==null?void 0:f.duration)},setCenter:(f,_,w)=>{const N=typeof(w==null?void 0:w.zoom)<"u"?w.zoom:u.value,D=a.value.width/2-f*N,x=a.value.height/2-_*N;h(D,x,N,w==null?void 0:w.duration)},fitBounds:(f,_={padding:vn})=>{const{x:w,y:N,zoom:D}=Je(f,a.value.width,a.value.height,s.value,u.value,_.padding);h(w,N,D,_==null?void 0:_.duration)},project:f=>At(f,c.value,d.value,g.value)};function E(f,_){i.value&&o.value&&o.value.scaleBy(mn(i.value,_),f)}function h(f,_,w,N){const{x:D,y:x}=Dn({x:-f,y:-_},l.value),M=Xe.translate(-D,-x).scale(w);i.value&&o.value&&o.value.transform(mn(i.value,N),M)}};function mn(e,t=0){return e.transition().duration(t)}function qc(e){const t=e??r.inject(ii,""),n=r.inject(ri,null),{findEdge:o,emits:i}=ie(),a=o(t);return a||i.error(new le(ae.EDGE_NOT_FOUND,t)),{id:t,edge:a,edgeEl:n}}exports.BaseEdge=dt;exports.BezierEdge=Ri;exports.ConnectionLineType=ke;exports.ConnectionMode=$e;exports.EdgeLabelRenderer=fs;exports.EdgeText=Oi;exports.ErrorCode=ae;exports.GlobalVueFlowStorage=Be;exports.Handle=tt;exports.MarkerType=Ct;exports.NodeIdInjection=Fn;exports.PanOnScrollMode=et;exports.Panel=Kc;exports.PanelPosition=ni;exports.Position=q;exports.SelectionMode=Ht;exports.SimpleBezierEdge=Ti;exports.SmoothStepEdge=qn;exports.StepEdge=Bi;exports.StraightEdge=Ii;exports.VueFlow=Uc;exports.VueFlowError=le;exports.VueFlowInjection=_n;exports.addEdge=Pr;exports.applyChanges=lt;exports.applyEdgeChanges=mc;exports.applyNodeChanges=pc;exports.clamp=Pe;exports.connectionExists=An;exports.defaultEdgeTypes=Di;exports.defaultNodeTypes=Pi;exports.getBezierEdgeCenter=Kn;exports.getBezierPath=$t;exports.getBoundsofRects=zr;exports.getConnectedEdges=ut;exports.getIncomers=Ir;exports.getMarkerId=Me;exports.getNodesInside=Hn;exports.getOutgoers=Br;exports.getRectOfNodes=Vt;exports.getSimpleBezierPath=Wn;exports.getSimpleEdgeCenter=Zn;exports.getSmoothStepPath=Ot;exports.getStraightPath=jn;exports.getTransformForBounds=Je;exports.graphPosToZoomedPos=Vn;exports.isEdge=ge;exports.isGraphEdge=jo;exports.isGraphNode=Re;exports.isNode=Ae;exports.pointToRendererPoint=At;exports.rendererPointToPoint=Vn;exports.updateEdge=Dr;exports.useEdge=qc;exports.useGetPointerPosition=di;exports.useHandle=Gn;exports.useNode=ai;exports.useVueFlow=ie;exports.useZoomPanHelper=Wc;
